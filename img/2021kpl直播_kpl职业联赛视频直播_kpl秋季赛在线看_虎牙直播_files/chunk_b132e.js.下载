(window.HUYA_MAIN_APP_WEBPACK_JSONP=window.HUYA_MAIN_APP_WEBPACK_JSONP||[]).push([[37],{77:function(e,n,r){"use strict";r.r(n),r.d(n,"getUserCard",(function(){return a})),r.d(n,"getUserBadge",(function(){return u})),r.d(n,"setBadge",(function(){return i})),r.d(n,"getUserLevelInfo",(function(){return d}));var t=r(0);function a(e,n){return new Promise((function(r,a){var u=setTimeout((function(){return a(new Error("TIMEOUT"))}),5e3),i=function(e){clearTimeout(u),r(e)};t.default.ready((function(r){if(t.default.isH5){var a=new r.taf.HUYA.GetUserCardReq;a.tId=r.userId,a.lPid=n,a.lReqUid=e,r.sendWup2("huyauserui","getUserCard",a,i)}else t.default.isFlash&&(t.default.one("GetUserCardRsp",(function(e){var n=e.param;return i(n)})),r.callAs("GetUserCardReq",{uid:e}))}))}))}function u(e,n){return new Promise((function(r,a){var u=setTimeout((function(){return a(new Error("TIMEOUT"))}),5e3),i=function(e){clearTimeout(u),r(e)};t.default.isH5?t.default.ready((function(r){var t=new r.taf.HUYA.BadgeReq;t.lToUid=e,t.lBadgeId=n,r.sendWup2("liveui","queryBadgeInfo",t,i)})):(t.default.one("GetFansBadgeInfoResp",(function(e){var n=e.param;return i(n)})),t.default.ready((function(r){return r.callAs("GetFansBadgeInfoReq",{user_uid:e,badge_id:n})})))}))}function i(e){var n=e.lFansUid,r=e.lBadgeId,a=e.iVFlag,u=e.iEffectiveDay;return new Promise((function(e,i){var d=setTimeout((function(){return i(new Error("TIMEOUT"))}),5e3),f=function(n){clearTimeout(d);var r=n.iRet;switch(r){case 0:e(n);break;case 907:i(new Error("名额已满"));break;default:i(new Error("".concat(r)))}};t.default.isH5?t.default.ready((function(e){var t=Object.assign(new e.taf.HUYA.SetBadgeVReq,{lFansUid:n,lBadgeId:r,iVFlag:a,iEffectiveDay:u,tUserId:e.userId});e.sendWup2("liveui","setBadgeV",t,f)})):(t.default.one("setBadgeVRsp",(function(e){var n=e.param;return f(n)})),t.default.ready((function(e){e.callAs("SetBadgeVReq",{lFansUid:n,lBadgeId:r,iVFlag:a,iEffectiveDay:u})})))}))}function d(){return new Promise((function(e,n){var r=setTimeout((function(){return n(new Error("TIMEOUT"))}),24e3);t.default.ready((function(n){if(t.default.isH5){var a=Object.assign(new n.taf.HUYA.GetUserLevelInfoReq,{tId:n.userId});n.sendWup2("huyauserui","getUserLevelInfo",a,(function(n){clearTimeout(r),e(n)}))}else t.default.one("getUserLevelInfoRsp",(function(n){var r=n.data.param;return e(r)})),n.callAs("getUserLevelInfo")}))}))}}}]);