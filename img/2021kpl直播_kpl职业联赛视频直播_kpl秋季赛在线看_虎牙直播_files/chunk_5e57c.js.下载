(window.HUYA_MAIN_APP_WEBPACK_JSONP=window.HUYA_MAIN_APP_WEBPACK_JSONP||[]).push([[437],{1168:function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return m}));var r=n(19),o=n.n(r),i=n(0);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=s(t);if(e){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=1,m=2,p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(n,t);var e=a(n);function n(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=e.call(this)).type=l,i.default.on("displayModeChange",(function(e){var n=-1;switch(e){case 0:n=l;break;case 1:case 2:n=m;break;case 3:n=l}-1!=n&&n!=t.type&&t.emit("change",t.type=n)})),t}return n}(o.a);e.c=new p},295:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return u}));var r=n(28),o="dark",i="light",u=n.n(r).a.createContext(i);e.d=function(){return Object(r.useContext)(u)}},313:function(t,e,n){"use strict";var r=n(28),o=n(303),i=n(308);function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],u=!0,c=!1;try{for(n=n.call(t);!(u=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{u||null==n.return||n.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.a=function(){var t,e=Object(r.useRef)(null),n=Object(r.useContext)(o.c),c=(t={},a(t,o.b,"half"),a(t,o.a,"full"),t)[n],f=e.current=i.b[c],s=u(Object(r.useState)([f.path,f.param]),2),l=u(s[0],2),m=l[0],p=l[1],y=s[1];return Object(r.useEffect)((function(){var t=function(t,e){return y([t,e])};return f.on("change",t),function(){return f.off("change",t)}}),[f]),[m,p,Object(r.useCallback)((function(){var t;return(t=e.current).to.apply(t,arguments)}),[]),Object(r.useCallback)((function(){return e.current.back()}),[])]}},315:function(t,e,n){"use strict";var r=n(19),o=n.n(r),i=n(3),u=n(4),c=n.n(u);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b(t);if(e){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(i,t);var e,n,r,o=p(i);function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this)).seed=0,n.moments=[],n.__loader=t,e&&(n.once("append",(function(){return n.listenerRemoteUpdate()})),n.on("reload",(function(){return n.listenerRemoteUpdate()}))),n}return e=i,(n=[{key:"find",value:function(t){var e=null;return this.moments.some((function(n){if(n&&n.momId==t)return e=n,!0})),e}},{key:"remove",value:function(t){var e=this.find(t);if(e){var n=this.moments.indexOf(e);this.moments.splice(n,1),this.emit("remove",e),this.emit("change","remove")}}},{key:"append",value:function(t){var e={};this.moments.forEach((function(t){var n=t.momId;return e[n]=!0}));var n,r=[].concat(t).filter((function(t){if(t&&!e[t.momId])return e[t.momId]=!0,!0}));r.length>0&&((n=this.moments).push.apply(n,f(r)),this.emit("append",r),this.emit("change","append"))}},{key:"insert",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o;n.length>0&&((o=this.moments).splice.apply(o,[t,0].concat(n)),this.emit("insert",n),this.emit("change","insert"))}},{key:"loadRemainingComments",value:function(){var t=this,e=this.__loader(this.seed);return e.then((function(e){var n=e.moments,r=void 0===n?[]:n,o=e.seed;t.seed=o,t.append(r)})).catch((function(t){})),e}},{key:"reload",value:function(){var t=this,e=this.__loader(0);return e.then((function(e){var n,r=e.moments,o=void 0===r?[]:r,i=e.seed,u={},c=o.filter((function(t){if(t&&!u[t.momId])return u[t.momId]=!0,!0}));t.seed=i,t.moments.length=0,(n=t.moments).push.apply(n,f(c)),t.emit("reload",c,e),t.emit("change","reload")})).catch((function(t){})),e}},{key:"listenerRemoteUpdate",value:function(){this.__timer&&clearTimeout(this.__timer);var t=this;!function e(){t.__timer=setTimeout((function(){t.__loader(0).then((function(n){n.moments.some((function(e){var n=e.cTime;return t.moments.every((function(t){var e=t.cTime;return n>e}))}))?t.emit("update"):e()}))}),9e5)}()}}])&&l(e.prototype,n),r&&l(e,r),i}(o.a),d=n(312);function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=_(t);if(e){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}function j(t,e){if(e&&("object"===v(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var S=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}(i,t);var e,n,r,o=g(i);function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this)).uid=t,n.pidOrGameId=e,n.sectionId="",n.sectionName="",n.commNum=0,n.browseNum=0,n.sectionMomentList=new h((function(e){return-2!=e?Object(d.f)({uid:t,seed:e,section:n.sectionId,iWhichTab:0}):Promise.resolve({seed:-2,moments:[],commNum:n.commNum,browseNum:n.browseNum})}),!0),n.sectionMomentListPopular=new h((function(e){return-2!=e?Object(d.f)({uid:t,seed:e,section:n.sectionId,iWhichTab:1}):Promise.resolve({seed:-2,moments:[],commNum:n.commNum,browseNum:n.browseNum})})),n.userMomentList=new h((function(e){return-2!=e?Object(d.i)({uid:t,seed:e}):Promise.resolve({seed:-2,moments:[]})})),n.getSectionInfo=c.a.once((function(){n.sectionMomentList.loadRemainingComments();var t=n.sectionMomentListPopular.loadRemainingComments();return t.then((function(t){var e=t.commNum,r=t.browseNum;n.commNum=e,n.browseNum=r,n.emit("updateSectionInfo")})).catch((function(t){})),t})),n.sectionMomentList.on("reload",(function(t,e){var r=e.commNum,o=e.browseNum;n.commNum=r,n.browseNum=o,n.emit("updateSectionInfo")})),n.sectionMomentListPopular.on("reload",(function(t,e){var r=e.commNum,o=e.browseNum;n.commNum=r,n.browseNum=o,n.emit("updateSectionInfo")})),n}return e=i,(n=[{key:"postMoment",value:function(t){var e=this,n=t.text,r=t.images,o=t.vote,i=Object(d.k)({uid:this.uid,text:n,images:r,vote:o,belongPlate:this.sectionId});return i.then((function(t){e.sectionMomentList.insert(0,t),e.userMomentList.insert(0,t),e.commNum+=1,e.browseNum+=1,e.emit("updateSectionInfo")})).catch((function(t){})),i}},{key:"removeMoment",value:function(t){var e=this,n=t.momId,r=t.belongPlate,o=Object(d.l)({uid:this.uid,momId:n,belongPlate:r.join(",")});return o.then((function(t){(e.sectionMomentList.find(n)||e.sectionMomentListPopular.find(n))&&(e.commNum-=1,e.emit("updateSectionInfo")),e.sectionMomentList.remove(n),e.sectionMomentListPopular.remove(n),e.userMomentList.remove(n)})).catch((function(t){})),o}},{key:"getSections",value:function(){var t=this,e=Object(d.h)(this.uid,this.pidOrGameId);return e.then((function(e){var n=e.sections,r=Object.keys(n||{});if(r.length){var o=r[0],i=o?n[o]:"";o&&(t.sectionId=o),i&&(t.sectionName=i)}})).catch((function(t){})),e}}])&&w(e.prototype,n),r&&w(e,r),i}(o.a);e.a=new S(HUYA_UTIL.getCookieVal("udb_uid"),i.default.lp)},366:function(t,e,n){"use strict";var r=n(28),o=n(303),i=n(19);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=m(t);if(e){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(i,t);var e,n,r,o=f(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this)).visible=!1,t.show=t.show.bind(l(t)),t.hide=t.hide.bind(l(t)),t.toggle=t.toggle.bind(l(t)),t}return e=i,(n=[{key:"show",value:function(){this.visible||(this.visible=!0,this.emit("change",this.visible))}},{key:"hide",value:function(){this.visible&&(this.visible=!1,this.emit("change",this.visible))}},{key:"toggle",value:function(){this.visible?this.hide():this.show()}}])&&c(e.prototype,n),r&&c(e,r),i}(n.n(i).a),y={half:new p,full:new p};function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],u=!0,c=!1;try{for(n=n.call(t);!(u=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{u||null==n.return||n.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.a=function(){var t,e=Object(r.useRef)(null),n=Object(r.useContext)(o.c),i=(t={},d(t,o.b,"half"),d(t,o.a,"full"),t)[n],u=e.current=y[i],c=b(Object(r.useState)(u.visible),2),a=c[0],f=c[1];return Object(r.useEffect)((function(){return u.on("change",f),function(){return u.off("change",f)}}),[u]),[a,Object(r.useCallback)((function(){var t;return(t=e.current).hide.apply(t,arguments)}),[]),Object(r.useCallback)((function(){var t;return(t=e.current).show.apply(t,arguments)}),[]),Object(r.useCallback)((function(){var t;return(t=e.current).toggle.apply(t,arguments)}),[])]}},444:function(t,e,n){"use strict";var r=n(28),o=n(435);e.a=function(){return Object(r.useContext)(o.a)}}}]);