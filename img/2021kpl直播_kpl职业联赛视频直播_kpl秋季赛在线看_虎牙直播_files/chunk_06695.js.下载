(window.HUYA_MAIN_APP_WEBPACK_JSONP=window.HUYA_MAIN_APP_WEBPACK_JSONP||[]).push([[371],{1178:function(e,t,a){"use strict";a(1179);var n=a(4),r=a(28),c=a.n(r),o=a(343),l=a(314),i=a(457),m=a(364),u=a(304),s=a(437),f=a(439),d=a(303),E=a(440),p=a(1187),b=a(1189),v=a(1196),h=a(1198),O=a(443),S=a(315),A=(a(308),a(313)),y=a(444);function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,c=[],o=!0,l=!1;try{for(a=a.call(e);!(o=(n=a.next()).done)&&(c.push(n.value),!t||c.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==a.return||a.return()}finally{if(l)throw r}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function j(e){var t=e.detailStore,a=N(Object(A.a)(),4),i=(a[0],a[1]),_=(i.mid,i.isFoucs,a[2],a[3]),j=N(Object(r.useState)(!1),2),D=j[0],C=j[1],I=N(Object(r.useState)(!1),2),T=I[0],g=I[1],k=N(Object(r.useState)(null),2),L=k[0],P=k[1],w=Object(y.a)().uid,U=Object(u.a)(),H=Object(r.useContext)(d.c),x=Object(n.throttle)((function(){var e=L.scrollTop;e+L.clientHeight>L.scrollHeight-5&&e&&t.commentListStore.queryCommentList()}),200);Object(r.useEffect)((function(){m.a.on(l.a.NOTICE_IS_REPLING,(function(){g(!0)})),m.a.on(l.a.NOTICE_REPLY_SUCCESS,(function(){g(!1)}))}),[]),Object(r.useEffect)((function(){return t.on(l.a.UPDATE_NEW_DETAIL,(function(){C(!D)})),function(){t.removeAllListeners()}}),[t]);var W=Object(r.useCallback)((function(){f.a.confirm({text:"确定要删除么？",onOk:function(){return S.a.removeMoment(t.data).then((function(){return _()}))},container:document.getElementById("J_MatchCommunity_modal_".concat(H)),style:{width:"300px",height:"auto",top:"95px",bottom:"auto"}})}),[t.data,H]);return t.data?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"postDetail-wrap",onClick:function(){g(!1)}},c.a.createElement("div",{className:"postDetail-header"},c.a.createElement("span",{className:"postDetail-back",onClick:_},c.a.createElement("i",{className:"icon"}),"返回")),c.a.createElement("div",{className:"postDetail-box",ref:function(e){P(e)},onWheel:x},c.a.createElement("div",{className:"postDetail-hd"},c.a.createElement("img",{className:"postDetail-avatar",src:TT.trimUrl(t.data.iconUrl),alt:"头像"}),c.a.createElement("span",{className:"postDetail-nick"},t.data.nickName),c.a.createElement("div",{className:"postDetail-hd-r"},c.a.createElement("i",{className:"postDetail-time"},Object(o.a)(t.data.cTime,4)),t.data.uid==w&&c.a.createElement("div",{className:"postDetail-menu"},c.a.createElement(s.a,null,c.a.createElement(s.a.Item,{onClick:W},"删除"))))),t.data.momentAttachment.length?c.a.createElement(E.a,{data:t.data.momentAttachment[0]}):c.a.createElement(p.a,{htmlDoc:HUYA_UTIL.unescape(t.data.htmlDoc)}),""!=t.vote.voteId&&c.a.createElement("div",{className:"postDetail-vote"},c.a.createElement(O.a,{store:t.vote})),c.a.createElement("p",{className:"postDetail-comment-nav"},"评论",t.data.commentCount?c.a.createElement("i",{className:"comment-amount"},"(",t.data.commentCount,")"):""),c.a.createElement(b.a,{commentListStore:t.commentListStore}))),c.a.createElement(v.a,{likeStore:t.likeStore,onClick:function(){U({eid:"usr/click/post-detailwritecomment/community",eid_desc:"赛事社区/帖子详情/参与评论"}),m.a.reply(t,l.b.TARGET_POST)}}),c.a.createElement(h.a,{isRepling:T})):null}t.a=function(){var e=N(Object(r.useState)(null),2),t=e[0],a=e[1];return Object(r.useEffect)((function(){return i.a.on(l.a.SHOW_DETAIL,(function(){a(i.a.detail)})),function(){i.a.removeAllListeners()}}),[]),Object(r.useEffect)((function(){!t&&i.a.emit(l.a.SHOW_DETAIL)})),t?c.a.createElement(j,{detailStore:t}):""}},1179:function(e,t,a){}}]);