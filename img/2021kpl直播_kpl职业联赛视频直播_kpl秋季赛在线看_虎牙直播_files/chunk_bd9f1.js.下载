(window.HUYA_MAIN_APP_WEBPACK_JSONP=window.HUYA_MAIN_APP_WEBPACK_JSONP||[]).push([[381],{144:function(e,t,a){"use strict";a.r(t);a(959);var n=a(14),l=a(68),r=(a(2),a(3)),u=a(0),c=a(285),i=a.n(c),o=(a(4),a(15),a(8)),d=new o.a;d.state=1,d.update=function(e){e!==d.state&&d.emit("change",d.state=e)};var s=d,f=new o.a;f.val=0,f.update=function(e){e!==f.val&&f.emit("change",f.val=e)},TT.event.on("TT_CALL",(function(e){"getStreamerLevel"==e.reqName&&TT.onCall({id:e.id,reqName:e.reqName,data:f.val})}));var m=f;var v,p=function(){var e=$.extend(this,new o.a);e.data=null,e.update=function(t){t&&e.emit("change",e.data=t)},e.fetchRemoteData=function(t){u.default.ready((function(a){if(u.default.isH5){var n=new a.taf.HUYA.PresenterLevelProgressReq;n.tId=a.userId,n.lPid=r.default.lp,a.sendWup2("presenterui","getPresenterLevelProgress",n,(function(a){e.update(a),t(a)}))}else setTimeout(t,0)}))},u.default.isH5&&u.default.ready((function(t){t.addTafListener("7708",e.update),t.addTafListener("7709",e.update)}))};function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,l,r=[],u=!0,c=!1;try{for(a=a.call(e);!(u=(n=a.next()).done)&&(r.push(n.value),!t||r.length!==t);u=!0);}catch(e){c=!0,l=e}finally{try{u||null==a.return||a.return()}finally{if(c)throw l}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function h(){var e=E(Object(n.useState)(1),2),t=e[0],a=e[1],l=E(Object(n.useState)(0),2),c=l[0],o=l[1],d=E(Object(n.useState)(0),2),f=d[0],v=d[1],L=E(Object(n.useState)(null),2),h=L[0],g=L[1],N=E(Object(n.useState)(!1),2),y=N[0],w=N[1],b=null;function x(){clearTimeout(b),v(1),y||P()}function I(){b=setTimeout((function(){v(0)}),200)}Object(n.useEffect)((function(){s.on("change",(function(e){a(e)})),m.on("change",(function(e){o(e)})),u.default.isH5&&(u.default.ready((function(e){var t=new e.taf.HUYA.PresenterLevelBaseReq;t.tId=e.userId,t.lPid=r.default.lp,e.sendWup2("presenterui","getPresenterLevelBase",t,(function(e){s.update(e.iLightUp),m.update(e.tLevelBase.iLevel)}))})),u.default.ready((function(e){e.addTafListener("7708",(function(e){s.update(e.iLightUp),m.update(e.tLevelBase.iLevel)})),e.addTafListener("7709",(function(e){s.update(e.iLightUp),m.update(e.tLevelBase.iLevel)}))}))),u.default.isFlash&&u.default.ready((function(){u.default.call("PresenterLevelBaseReq"),u.default.one("PresenterLevelBaseRsp",(function(e){s.update(e.param.iLightUp),m.update(e.param.tLevelBase.iLevel)}))}))}),[]);var P=function(){var e=new p;e.fetchRemoteData((function(t){g(t),e.on("change",(function(e){g(e)})),w(!0)}))};return n.default.createElement(n.default.Fragment,null,n.default.createElement("i",{onMouseEnter:function(){x()},onMouseLeave:function(){I()},id:"J_roomHdHostLvIcon",className:i()("anchor-level-icon","anchor-level-icon-".concat(1===t?"hig":"dim","-0"),"anchor-level-icon-".concat(1===t?"hig":"dim","-").concat(c))}),1===f&&u.default.isH5&&n.default.createElement("div",{onMouseEnter:function(){x()},onMouseLeave:function(){I()},style:{display:"block"},className:"entrance-expand",id:"J_roomHdHostLvPanel"},n.default.createElement("i",{className:"entrance-expand-arr"}),n.default.createElement("div",{className:"entrance-expand-bor"}),n.default.createElement("div",{className:i()("host-lv-info",{"room-mod-loading":!y}),id:"J_roomHdHostLvInfo"},h&&n.default.createElement("div",{className:"room-AnchorLvInfo"},0==h.iLevelMax?n.default.createElement("div",{className:"exp-needed"},"还差",n.default.createElement("em",null,h.lNextLevelExp-h.tLevelBase.lExp),"点经验升级"):n.default.createElement("div",{className:"exp-needed"},"主播当前已达到最高等级"),n.default.createElement("div",{className:"exp-progress"},n.default.createElement("span",{className:"from"},n.default.createElement("i",{className:i()("alv-icon","alv-icon-".concat(["dim","hig"][h.iLightUp],"-").concat(h.tLevelBase.iLevel))})),0==h.iLevelMax?n.default.createElement(n.default.Fragment,null,n.default.createElement("p",{className:"bar"},n.default.createElement("b",{style:{width:"".concat((h.tLevelBase.lExp-h.lCurrLevelExp)/(h.lNextLevelExp-h.lCurrLevelExp)*100,"%")}})),n.default.createElement("span",{className:"to"},n.default.createElement("i",{className:i()("alv-icon","alv-icon-".concat(["dim","hig"][h.iLightUp],"-").concat(h.tLevelBase.iLevel+1))}))):n.default.createElement("p",{className:"bar"},n.default.createElement("b",{style:{width:"100%"}}))),n.default.createElement("div",{className:"upgrade-task"},h.iLightUp?n.default.createElement("div",{className:"desc-a"},n.default.createElement("p",{className:"t1"},n.default.createElement("i",null),n.default.createElement("span",null,"每100金豆提升1点经验")),n.default.createElement("p",{className:"t2"},n.default.createElement("i",null),n.default.createElement("span",null,"升级主播勋章，闪耀虎牙"))):n.default.createElement("div",{className:"desc-b"},n.default.createElement("i",null),n.default.createElement("p",null,"主播未完成每周成长任务等级勋章无法点亮，送金豆礼物可以让主播勋章重新点亮哦~"))),n.default.createElement("div",{className:"ft"},n.default.createElement("div",{className:"week-total"},n.default.createElement("span",null,"本周成长值："),n.default.createElement("em",null,h.tGrowInfo.lWeeklyIncExp),h.tGrowInfo.lWeeklyIncExp>=h.tGrowInfo.lWeeklyExp?n.default.createElement("b",null,"(成长任务已完成)"):n.default.createElement("i",null,"(还差",h.tGrowInfo.lWeeklyExp-h.tGrowInfo.lWeeklyIncExp,"完成任务)")),n.default.createElement("div",{className:"week-rank"},n.default.createElement("span",null,"当前排名："),n.default.createElement("a",{target:"_blank",href:"".concat(TT.app.hd,"web/anchor_level/index.html?pid=").concat(h.tLevelBase.lPid)},n.default.createElement("em",null,h.tGrowInfo.iRank<=0||h.tGrowInfo.iRank>999?"999+":h.tGrowInfo.iRank),n.default.createElement("i",null,">"))))))))}v=document.getElementsByClassName("host-level")[0],l.default.render(n.default.createElement(h,null),v)},959:function(e,t,a){}}]);