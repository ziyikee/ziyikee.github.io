(window.HUYA_MAIN_APP_WEBPACK_JSONP=window.HUYA_MAIN_APP_WEBPACK_JSONP||[]).push([[359],{1249:function(e,n,t){var a=t(1250);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};t(287)(a,r);a.locals&&(e.exports=a.locals)},1250:function(e,n,t){var a=t(286),r=t(288),l=t(1251),o=t(1252),i=t(1253);n=a(!1);var c=r(l),u=r(o),s=r(i);n.push([e.i,".OnTVMemePanel--1U091e58zzReZVlDwJhe4C .OnTVMemePanelFt--e-d4F9_vlo142-jMLrJA7{margin-top:20px;text-align:center}.OnTVMemePanel--1U091e58zzReZVlDwJhe4C .OnTVMemePanelFt--e-d4F9_vlo142-jMLrJA7 .OnTVMemePanelSend--3naKPJ6wjQhtUoXEREV0Rt{display:inline-block;width:335px;height:40px;line-height:40px;text-align:center;font-size:14px;color:#fff;background-color:#ffa200;border-radius:100px;vertical-align:middle;cursor:pointer;user-select:none}.OnTVMemePanel--1U091e58zzReZVlDwJhe4C .OnTVMemePanelFt--e-d4F9_vlo142-jMLrJA7 .OnTVMemePanelSend--3naKPJ6wjQhtUoXEREV0Rt:hover{opacity:0.85}.OnTVMemePanel--1U091e58zzReZVlDwJhe4C .OnTVMemePanelFt--e-d4F9_vlo142-jMLrJA7 .OnTVMemePanelSend--3naKPJ6wjQhtUoXEREV0Rt.disabled--2R1_Ky_7CFbbuuZhItqeCD{background:#999;cursor:default}.OnTVMemePanel--1U091e58zzReZVlDwJhe4C .OnTVMemePanelFt--e-d4F9_vlo142-jMLrJA7 .OnTVMemePanelSend--3naKPJ6wjQhtUoXEREV0Rt.disabled--2R1_Ky_7CFbbuuZhItqeCD:hover{opacity:1}.MemeList--1Lld1slMWGnX7APVzFJEZo{width:352px}.MemeList--1Lld1slMWGnX7APVzFJEZo .MemeItem--NT6mE3xqG9aP-kKFP0ww1{position:relative;display:inline-flex;align-items:center;justify-content:center;width:160px;height:87px;padding-top:8px;margin:10px 15px 0 0;box-sizing:border-box;background:url("+c+") no-repeat;background-size:cover;cursor:pointer}.MemeList--1Lld1slMWGnX7APVzFJEZo .MemeItem--NT6mE3xqG9aP-kKFP0ww1.active--2GXiSzEQdHf0qHL_pVF236{background-image:url("+u+")}.MemeList--1Lld1slMWGnX7APVzFJEZo .MemeItem--NT6mE3xqG9aP-kKFP0ww1.active--2GXiSzEQdHf0qHL_pVF236::after{position:absolute;top:0;right:-5px;width:16px;height:16px;background:url("+s+');content:""}.MemeList--1Lld1slMWGnX7APVzFJEZo .MemeItem--NT6mE3xqG9aP-kKFP0ww1 img{max-width:100%}.MemeList--1Lld1slMWGnX7APVzFJEZo .MemeItem--NT6mE3xqG9aP-kKFP0ww1 span{line-height:2;border:1px solid #999;border-radius:5px;padding:0 .8em}\n',""]),n.locals={OnTVMemePanel:"OnTVMemePanel--1U091e58zzReZVlDwJhe4C",OnTVMemePanelFt:"OnTVMemePanelFt--e-d4F9_vlo142-jMLrJA7",OnTVMemePanelSend:"OnTVMemePanelSend--3naKPJ6wjQhtUoXEREV0Rt",disabled:"disabled--2R1_Ky_7CFbbuuZhItqeCD",MemeList:"MemeList--1Lld1slMWGnX7APVzFJEZo",MemeItem:"MemeItem--NT6mE3xqG9aP-kKFP0ww1",active:"active--2GXiSzEQdHf0qHL_pVF236"},e.exports=n},1437:function(e,n,t){"use strict";var a=t(3),r=t(28),l=t.n(r),o=(t(42),t(285)),i=t.n(o),c=t(292),u=t(290),s=t(75),m=t.n(s),d=t(325),f=t.n(d),p=t(420),P=t.n(p),M=t(421),b=t.n(M),h=(t(305),t(299),t(291),t(307),t(34),t(0));var O=t(1249),g=t.n(O),v=["active","onClick"];function E(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}function V(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function y(){return(y=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}function w(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var a,r,l=[],o=!0,i=!1;try{for(t=t.call(e);!(o=(a=t.next()).done)&&(l.push(a.value),!n||l.length!==n);o=!0);}catch(e){i=!0,r=e}finally{try{o||null==t.return||t.return()}finally{if(i)throw r}}return l}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return T(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return T(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}function x(e){var n=e.active,t=e.onClick,a=E(e,v),r=(a.id,a.name),o=a.flexiUrl;return l.a.createElement("div",{className:i()(g.a.MemeItem,V({},g.a.active,n)),onClick:t},!!o&&l.a.createElement("img",{src:o.replace(".png","_3.png"),alt:r,style:{maxHeight:"30px"}}),!o&&l.a.createElement("span",null,r))}n.a=Object(c.d)((function(e,n){return{panelInfo:e.panelInfo,anchorInfo:e.anchorInfo}}))((function(e){var n=e.panelInfo,t=(e.anchorInfo,Object(r.useMemo)((function(){return n.info.pack.filter((function(e){return e.iItemId==p.EmojiType.EMOJI_Flexible_Emotion})).map((function(e){var n=e.sContent;return m.a.findEmoticon(n)||{id:n,name:"表情-[".concat(n,"]"),flexiUrl:"",price:0}}))}),[n.info.pack])),o=w(Object(r.useState)(t[0]),2),c=o[0],s=o[1],d=Object(r.useCallback)((function(){f.a.send(c.id).catch((function(e){u.default.error("发送失败：".concat(e.message))}))}),[c]),M=Object(p.useMemeService)(),O=Object(p.useMemeInfo)(M).packages,v=Object(r.useMemo)((function(){var e=M.findEmoji(p.EmojiType.EMOJI_Flexible_Emotion,c.id);return e&&M.findPackage(e.lPackageId)}),[M,c,O]),E=w(Object(r.useState)(!1),2),T=E[0],j=E[1],k=Object(r.useCallback)((function(){TT.sudo((function(){j(!0)}))}),[]),F=Object(r.useCallback)((function(){return j(!1)}),[]),I=Object(r.useCallback)((function(){_(!0),new Promise((function(e,n){var t=setTimeout((function(){h.default.off("getSequenceRsp",a),n(new Error("timeout"))}),8e3);function a(n){clearTimeout(t),e(n)}h.default.call("getSequenceReq",{iBusinessType:27}),h.default.one("getSequenceRsp",a)})).then((function(e){var n=e.sSeq;f.a.send(c.id,{order_id:n}).then((function(){return _(!1)})).catch((function(e){_(!1),u.default.error("发送失败：".concat(e.message))}))})).catch((function(e){_(!1),u.default.error("发送失败：".concat(e.message))}))}),[c]),S=w(Object(r.useState)(!1),2),C=S[0],_=S[1];return l.a.createElement(P.a,null,l.a.createElement("div",{className:g.a.OnTVMemePanel},l.a.createElement("div",{className:g.a.OnTVMemePanelBd},l.a.createElement("div",{className:g.a.MemeList},t.map((function(e,n){return l.a.createElement(x,y({},e,{onClick:function(){return s(e)},active:e===c,key:n}))})))),l.a.createElement("div",{className:g.a.OnTVMemePanelFt,"data-pkg":v&&"".concat(v.sPackIdentify,"(").concat(v.lPackageId,")")}," ",!!v&&0==v.iStatus&&l.a.createElement("span",{className:g.a.OnTVMemePanelSend,onClick:k},v.sRechargeBtonText||"立即解锁"),!!v&&1==v.iStatus&&l.a.createElement("span",{className:g.a.OnTVMemePanelSend,onClick:d},"立即参与"),!v&&0==c.price&&l.a.createElement("span",{className:g.a.OnTVMemePanelSend,onClick:d},"立即参与"),!v&&c.price>0&&l.a.createElement("span",{className:i()(g.a.OnTVMemePanelSend,V({},g.a.disabled,C)),onClick:C?function(){}:I},c.price,"金豆/条"))),T&&l.a.createElement(b.a,{packageId:v.lPackageId,profileUid:a.default.lp,onSuccess:function(){return M.fetchMemeInfo(!0)},onClose:F}))}))}}]);