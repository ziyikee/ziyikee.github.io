(window.HUYA_MAIN_APP_WEBPACK_JSONP=window.HUYA_MAIN_APP_WEBPACK_JSONP||[]).push([[418],{400:function(e,t,a){var r=a(718);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(287)(r,n);r.locals&&(e.exports=r.locals)},714:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mount=void 0;var r=a(12),n=(0,r.__importDefault)(a(28)),o=(0,r.__importDefault)(a(42)),i=(0,r.__importDefault)(a(715)),s=(0,r.__importDefault)(a(400));t.mount=function(e){var t=document.getElementById("J_treasureChestContainer");if(t){var a=document.createElement("div");a.className=s.default.root,t.appendChild(a),o.default.render(n.default.createElement(i.default,(0,r.__assign)({},e)),a)}}},715:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(12),n=(0,r.__importStar)(a(28)),o=(0,r.__importDefault)(a(3)),i=a(4),s=(0,r.__importStar)(a(79)),l=(0,r.__importStar)(a(398)),u=a(15),c=(0,r.__importDefault)(a(716)),d=(0,r.__importDefault)(a(717)),p=(0,r.__importDefault)(a(400));function f(e){var t=e.data,a=e.conf,r=t.iTotal,f=t.tBoxInfo,m=f.sBoxId,x=f.iState,w=f.iStateRetSec,b=f.tBaseInfo,_=b.iBoxType,B=b.iAwardType,E=f.tSender,y=(0,n.useMemo)((function(){var e=a.vCfg.value.find((function(e){return e.iBoxType==_})),t="",r="";if(e)try{var n=JSON.parse(HUYA_UTIL.unescape(e.sIconUrl)),o=n.web_static,i=n.web_dynamic;t=o,r=i}catch(e){console.error(e)}return{sBoxName:e?e.sBoxName:"宝箱",sIconStatic:t||c.default,sIconDynamic:r||d.default}}),[_]),T=y.sBoxName,k=y.sIconStatic,N=y.sIconDynamic,g=(0,n.useMemo)((function(){var e="";switch(x){case l.ETreasureBoxState.Ready:e=k;break;case l.ETreasureBoxState.Rob:case l.ETreasureBoxState.End:e=N;break;default:e=k}return e}),[x,k,N]),h=(0,n.useState)(-1),S=h[0],v=h[1];(0,n.useEffect)((function(){if(x===l.ETreasureBoxState.Ready&&w>0){var e=w;v(e);var t=setInterval((function(){v(e>0?e-=1:0)}),1e3);return function(){return clearInterval(t)}}}),[m,x,w]);var J=(0,n.useMemo)((function(){var e=Math.floor(S/60),t=S%60;return(0,i.padStart00)(e)+":"+(0,i.padStart00)(t)}),[S]),R=(0,n.useCallback)((function(){TT.sudo((function(){s.getInstance().then((function(e){e.loadPopup("nkdlmwyw",JSON.stringify({boxConfig:f}))}))}))}),[f]),H=(0,n.useCallback)((function(){R(),(0,u.reportEvent)({eid:"usr/click/studio/chest",eid_desc:"用户/点击/宝箱领取",prop:JSON.stringify({treasure_id:m,treasure_type:""+B,ayyuid:""+o.default.lp,uid:(0,i.getUid)()||"",status:""+l.ETreasureBoxState.Rob})})}),[R,m,B]);return(0,n.useEffect)((function(){x===l.ETreasureBoxState.Rob?s.getInstance().then((function(e){var t=JSON.stringify({boxConfig:f});e.postLocalMessage("nkdlmwyw","treasure-box:rob","web_popup",t,!0)})):x===l.ETreasureBoxState.End&&s.getInstance().then((function(e){var t=JSON.stringify({boxConfig:f});e.postLocalMessage("nkdlmwyw","treasure-box:end","web_popup",t,!0)}))}),[x,f]),n.default.createElement("div",{className:p.default.TreasureBox},n.default.createElement("div",{className:p.default.wrap},n.default.createElement("img",{className:g,src:k,alt:T,onClick:R}),x===l.ETreasureBoxState.Ready&&S>-1&&n.default.createElement("span",{className:p.default.btn},J),x===l.ETreasureBoxState.Rob&&n.default.createElement("span",{className:p.default.btn+" "+p.default.pointer,onClick:H},"领取"),x===l.ETreasureBoxState.End&&n.default.createElement("span",{className:p.default.btn},"正在发放")),r>1&&n.default.createElement("i",{className:p.default.total},r),x===l.ETreasureBoxState.Ready&&n.default.createElement("div",{className:p.default.tips},n.default.createElement("p",{className:p.default.tit},n.default.createElement("em",null,E.sNick),n.default.createElement("span",null,"的",T)),n.default.createElement("div",{className:p.default.content},n.default.createElement("p",null,"领取还未开始，请耐心等待~"))))}t.default=function(e){var t=e.data,a=e.conf,r=(0,n.useState)(t),s=r[0],c=r[1],d=(s.iTotal,s.tBoxInfo),p=d.sBoxId,m=d.tBaseInfo.iAwardType,x=d.iState===l.ETreasureBoxState.None;return(0,n.useEffect)((function(){return l.default.on("TreasureBoxPanelInfoChange",c),function(){l.default.off("TreasureBoxPanelInfoChange",c)}}),[c]),(0,n.useEffect)((function(){(0,u.reportEvent)({eid:"sys/pageview/studio/chest",eid_desc:"系统/展示/宝箱掉落",prop:JSON.stringify({treasure_id:p,treasure_type:""+m,ayyuid:""+o.default.lp,uid:(0,i.getUid)()||""})})}),[p]),x?null:n.default.createElement(f,{data:s,conf:a})}},718:function(e,t,a){(t=a(286)(!1)).push([e.i,'.treasureChestContainer--2R6yk99SyyraTQgFQGqtwZ{position:absolute;right:16px;bottom:10px;z-index:999;display:flex;flex-direction:column;align-items:center}.root--2aKA4qG5AyaIVwVtAI3UA5{display:inline-block;margin-top:10px}.TreasureBox--3Oc13ddaA-kJ0XWnN_H0lw{position:relative}.TreasureBox--3Oc13ddaA-kJ0XWnN_H0lw .wrap--3R7CHeTRkVc4JaH2Bn4ktZ{display:inline-flex;flex-direction:column;align-items:center}.TreasureBox--3Oc13ddaA-kJ0XWnN_H0lw .wrap--3R7CHeTRkVc4JaH2Bn4ktZ .icon--30fGifZJjbmjjV6TDSanyq{max-width:80px;cursor:pointer}.TreasureBox--3Oc13ddaA-kJ0XWnN_H0lw .wrap--3R7CHeTRkVc4JaH2Bn4ktZ .btn--2LLbltZIewbHe2Y8_8W1Q6{margin-top:-12px;display:inline-block;padding:2px 9px 3px;background:#FF8800;color:#fff;text-align:center;border-radius:11px}.TreasureBox--3Oc13ddaA-kJ0XWnN_H0lw .wrap--3R7CHeTRkVc4JaH2Bn4ktZ .btn--2LLbltZIewbHe2Y8_8W1Q6.pointer--3okl94B1MkcGkcZcwqZwRd{cursor:pointer}.TreasureBox--3Oc13ddaA-kJ0XWnN_H0lw .total--JeQ0SBBnJTte3izalRx8W{position:absolute;top:0;right:0;padding:0 6px;background:#FF1313;color:#fff;border-radius:50%}.TreasureBox--3Oc13ddaA-kJ0XWnN_H0lw:hover .tips--1uhG2cObRNEpazwjFp4Wip{display:block}.TreasureBox--3Oc13ddaA-kJ0XWnN_H0lw .tips--1uhG2cObRNEpazwjFp4Wip{display:none;position:absolute;right:10px;bottom:100%;margin-bottom:-15px;padding:8px 10px;border:1px solid #DEDEDE;background:#fff;color:#666;border-radius:5px;box-shadow:1px 1px 5px 0px rgba(99,99,99,0.3);white-space:nowrap;opacity:.85}.TreasureBox--3Oc13ddaA-kJ0XWnN_H0lw .tips--1uhG2cObRNEpazwjFp4Wip .tit--12JH7-Wv12mG9I5QfmJRMw{font-size:14px;line-height:2;display:flex;align-items:center}.TreasureBox--3Oc13ddaA-kJ0XWnN_H0lw .tips--1uhG2cObRNEpazwjFp4Wip .tit--12JH7-Wv12mG9I5QfmJRMw em{max-width:8em;overflow:hidden;text-overflow:ellipsis;color:#f80}.TreasureBox--3Oc13ddaA-kJ0XWnN_H0lw .tips--1uhG2cObRNEpazwjFp4Wip .content--350M4ZCEMHteRjpRmxSNyU{line-height:1.8}.TreasureBox--3Oc13ddaA-kJ0XWnN_H0lw .tips--1uhG2cObRNEpazwjFp4Wip::after{position:absolute;bottom:-14px;right:30px;width:0;height:0;border:7px solid transparent;border-top-color:#fff;content:""}\n',""]),t.locals={treasureChestContainer:"treasureChestContainer--2R6yk99SyyraTQgFQGqtwZ",root:"root--2aKA4qG5AyaIVwVtAI3UA5",TreasureBox:"TreasureBox--3Oc13ddaA-kJ0XWnN_H0lw",wrap:"wrap--3R7CHeTRkVc4JaH2Bn4ktZ",icon:"icon--30fGifZJjbmjjV6TDSanyq",btn:"btn--2LLbltZIewbHe2Y8_8W1Q6",pointer:"pointer--3okl94B1MkcGkcZcwqZwRd",total:"total--JeQ0SBBnJTte3izalRx8W",tips:"tips--1uhG2cObRNEpazwjFp4Wip",tit:"tit--12JH7-Wv12mG9I5QfmJRMw",content:"content--350M4ZCEMHteRjpRmxSNyU"},e.exports=t}}]);