(window.HUYA_MAIN_APP_WEBPACK_JSONP=window.HUYA_MAIN_APP_WEBPACK_JSONP||[]).push([[498],{1063:function(n,e,t){},1064:function(module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){rethrow=rethrow||function(n,e,t,a,r){var s=e.split("\n"),i=Math.max(a-3,0),o=Math.min(s.length,a+3),l=r(t),c=s.slice(i,o).map((function(n,e){var t=e+i+1;return(t==a?" >> ":"    ")+t+"| "+n})).join("\n");throw n.path=l,n.message=(l||"ejs")+":"+a+"\n"+c+"\n\n"+n.message,n},escapeFn=escapeFn||function(n){return null==n?"":String(n).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(n){return _ENCODE_HTML_RULES[n]||n}var __line=1,__lines='<div class="superFans-fansDay">\n    <i class="fansDay-title"></i>\n    <i class="btn-close j_btn-close"></i>\n    <div class="anchor-msg">\n        <img class="anchor-avatar" src="<%= TT.trimUrl(avatar) %>">\n        <p class="msg-title">今天是我的超级粉丝日</p>\n        <p class="msg-tips">超粉送礼可获得4倍亲密度和亲密度上限</p>\n    </div>\n    <span class="btn-ok j_btn-close<%= !isSuperFans ? \' j_superFans-recharge\' : \'\' %>"><%= !isSuperFans ? \'立即开通\' : \'我知道了\' %>（<i class="j_countdown">5</i>s）</span>\n</div>',__filename="widget/superFans-fansDay/tips.tmpl";try{var __output="";function __append(n){null!=n&&(__output+=n)}with(locals||{})__append('<div class="superFans-fansDay">\n    <i class="fansDay-title"></i>\n    <i class="btn-close j_btn-close"></i>\n    <div class="anchor-msg">\n        <img class="anchor-avatar" src="'),__line=5,__append(escapeFn(TT.trimUrl(avatar))),__append('">\n        <p class="msg-title">今天是我的超级粉丝日</p>\n        <p class="msg-tips">超粉送礼可获得4倍亲密度和亲密度上限</p>\n    </div>\n    <span class="btn-ok j_btn-close'),__line=9,__append(escapeFn(isSuperFans?"":" j_superFans-recharge")),__append('">'),__append(escapeFn(isSuperFans?"我知道了":"立即开通")),__append('（<i class="j_countdown">5</i>s）</span>\n</div>'),__line=10;return __output}catch(e){rethrow(e,__lines,__filename,__line,escapeFn)}}},112:function(n,e,t){"use strict";t.r(e);t(1063);var a=t(3),r=t(2),s=t(337),i=t.n(s),o=t(51);function l(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==t)return;var a,r,s=[],i=!0,o=!1;try{for(t=t.call(n);!(i=(a=t.next()).done)&&(s.push(a.value),!e||s.length!==e);i=!0);}catch(n){o=!0,r=n}finally{try{i||null==t.return||t.return()}finally{if(o)throw r}}return s}(n,e)||function(n,e){if(!n)return;if("string"==typeof n)return c(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return c(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,a=new Array(e);t<e;t++)a[t]=n[t];return a}var u={};function p(n,e){u[e.lBadgeId]=(new Date).getMonth()+1,localStorage.setItem("ROOM_FANSDAY_SHOW",JSON.stringify(u));var s=t(1064),i=$("#chatRoom"),l=n.normalBadge.find(e.lBadgeId),c=$(s({avatar:a.default.avatar,isSuperFans:!!l&&l.tSuperFansInfo.iSFFlag>0}));i.append(c);var p=null,_=5;!function n(){p=setTimeout((function(){--_?(c.find(".j_countdown").text(_),n()):(clearTimeout(p),c.remove())}),1e3)}(),c.on("click",".j_btn-close",(function(){c.remove(),clearTimeout(p)})).on("click",".j_superFans-recharge",(function(){Object(o.default)(a.default.lp,r.default.id,r.default.sid,r.default.gid);try{ya.reportProductEvent({eid:"click/superFansDay/recharge",eid_desc:"点击/超粉日/开通"})}catch(n){}}))}Promise.all([i.a.ensureGetBadgeInfoList(),i.a.getCurrentPresenterBadgeInfo()]).then((function(n){var e=l(n,2),t=(e[0],e[1]);TT.event.on("triggerSuperFansTips",(function(){p(i.a,t)}));var a=(new Date).getDate();if(t.tSuperFansConfig.iSFFlag>0&&t.tSuperFansConfig.iSFDay==a){var r=localStorage.getItem("ROOM_FANSDAY_SHOW");if(r){var s=JSON.parse(r),o=(new Date).getMonth()+1;s&&s[t.lBadgeId]!=o&&p(i.a,t)}else p(i.a,t)}})).catch((function(){}))}}]);