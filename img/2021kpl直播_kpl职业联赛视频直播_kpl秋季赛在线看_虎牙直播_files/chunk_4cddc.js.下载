(window.HUYA_MAIN_APP_WEBPACK_JSONP=window.HUYA_MAIN_APP_WEBPACK_JSONP||[]).push([[479],{1286:function(a,t,e){},1288:function(module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){rethrow=rethrow||function(a,t,e,n,s){var p=t.split("\n"),i=Math.max(n-3,0),r=Math.min(p.length,n+3),c=s(e),m=p.slice(i,r).map((function(a,t){var e=t+i+1;return(e==n?" >> ":"    ")+e+"| "+a})).join("\n");throw a.path=c,a.message=(c||"ejs")+":"+n+"\n"+m+"\n\n"+a.message,a},escapeFn=escapeFn||function(a){return null==a?"":String(a).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(a){return _ENCODE_HTML_RULES[a]||a}var __line=1,__lines='<%\r\n    var hours = (new Date(teams[\'startTime\']*1000)).getHours();\r\n    var min = (new Date(teams[\'startTime\']*1000)).getMinutes();\r\n%>\r\n<div class="camp-wrap" id="camp-wrap">\r\n    <div class="camp-cnt">\r\n        <div class="camp-cnt-team clearfix">\r\n        \t<div class="support-team support-team-blue">\r\n                <img src="<%= TT.trimUrl(teams[\'teamAAvatar\']) %>" alt="<%= teams[\'teamAName\'] %>" class="camp-team-avatar">\r\n                <div class="camp-team-button" title="支持战队，获取战队勋章" data-cid="1">\r\n                    <i></i>支持\r\n                </div>\r\n                <div style="clear:both"></div>\r\n                <p><%= teams[\'teamAName\'] %></p>    \r\n            </div>\r\n        \t<div class="team-vs">\r\n        \t\t<span></span>\r\n        \t\t<p><%= (\'00\' + hours).slice( (hours+\'\').length ) + \':\' + (\'00\' + min).slice( (min+\'\').length ) %></p>\r\n        \t</div>\r\n            <div class="support-team support-team-red">\r\n                <img src="<%= TT.trimUrl(teams[\'teamBAvatar\']) %>" alt="<%= teams[\'teamBName\'] %>" class="camp-team-avatar">\r\n                <div class="camp-team-button" title="支持战队，获取战队勋章" data-cid="2">\r\n                    <i></i>支持\r\n                </div>\r\n                <div style="clear:both"></div>\r\n                <p><%= teams[\'teamBName\'] %></p> \r\n            </div>\r\n        \t\r\n            <div class="camp-tip-layer"></div>\r\n        </div>\r\n        <div class="camp-cnt-process">\r\n        </div>  \r\n    </div>\r\n    <div class="camp-cnt-detail-wrap">\r\n        <div class="camp-cnt-detail">\r\n            <p>1. 选择支持战队激活阵营模式，获得战队发言勋章</p>\r\n            <p>2. 激活的战队，仅在当前的比赛有效</p>\r\n            <p class="cnt-text-gs">3. 支持战队后，送礼将增加战队的礼物支持率</p>\r\n        </div>\r\n        <span class="camp-cnt-btn camp-cnt-zk"></span>\r\n    </div>\r\n</div>\r\n',__filename="widget/room-camp/tpl.tmpl";try{var __output="";function __append(a){null!=a&&(__output+=a)}with(locals||{}){var hours=new Date(1e3*teams.startTime).getHours(),min=new Date(1e3*teams.startTime).getMinutes();__line=4,__append('\r\n<div class="camp-wrap" id="camp-wrap">\r\n    <div class="camp-cnt">\r\n        <div class="camp-cnt-team clearfix">\r\n        \t<div class="support-team support-team-blue">\r\n                <img src="'),__line=9,__append(escapeFn(TT.trimUrl(teams.teamAAvatar))),__append('" alt="'),__append(escapeFn(teams.teamAName)),__append('" class="camp-team-avatar">\r\n                <div class="camp-team-button" title="支持战队，获取战队勋章" data-cid="1">\r\n                    <i></i>支持\r\n                </div>\r\n                <div style="clear:both"></div>\r\n                <p>'),__line=14,__append(escapeFn(teams.teamAName)),__append('</p>    \r\n            </div>\r\n        \t<div class="team-vs">\r\n        \t\t<span></span>\r\n        \t\t<p>'),__line=18,__append(escapeFn(("00"+hours).slice((hours+"").length)+":"+("00"+min).slice((min+"").length))),__append('</p>\r\n        \t</div>\r\n            <div class="support-team support-team-red">\r\n                <img src="'),__line=21,__append(escapeFn(TT.trimUrl(teams.teamBAvatar))),__append('" alt="'),__append(escapeFn(teams.teamBName)),__append('" class="camp-team-avatar">\r\n                <div class="camp-team-button" title="支持战队，获取战队勋章" data-cid="2">\r\n                    <i></i>支持\r\n                </div>\r\n                <div style="clear:both"></div>\r\n                <p>'),__line=26,__append(escapeFn(teams.teamBName)),__append('</p> \r\n            </div>\r\n        \t\r\n            <div class="camp-tip-layer"></div>\r\n        </div>\r\n        <div class="camp-cnt-process">\r\n        </div>  \r\n    </div>\r\n    <div class="camp-cnt-detail-wrap">\r\n        <div class="camp-cnt-detail">\r\n            <p>1. 选择支持战队激活阵营模式，获得战队发言勋章</p>\r\n            <p>2. 激活的战队，仅在当前的比赛有效</p>\r\n            <p class="cnt-text-gs">3. 支持战队后，送礼将增加战队的礼物支持率</p>\r\n        </div>\r\n        <span class="camp-cnt-btn camp-cnt-zk"></span>\r\n    </div>\r\n</div>\r\n'),__line=43}return __output}catch(e){rethrow(e,__lines,__filename,__line,escapeFn)}}},1455:function(a,t,e){"use strict";e.r(t);e(1286);var n=e(1287),s=$("#J_mod_matchCamp");s.removeClass("room-mod-loading");var p=new i(n.a,s);function i(a,t){var n=e(1288)(a.info),s=$(n);return a.info.support.initStateReady((function(t){var e=s.find(".camp-team-button");function n(t){e.removeClass("camp-team-button-on").attr("title","支持战队，获取战队勋章").html("<i></i>支持"),$(".camp-tip-layer").hide(),0!=t&&(e.eq(t-1).attr("title","").addClass("camp-team-button-on").html("<i></i>已支持"),function(t){if(0==t)return;var e=_.escape(a.info.teams[1==t?"teamAName":"teamBName"]),n='<h3>已支持<span class="camp-red">'+e+'</span>！</h3><div class="camp-tip-cnt"><p>成功获得'+e+"发言勋章</p>"+(2731==G_info.mid?"":1==t?'<p><span class="camp-blue">蓝色</span>弹幕</p>':'<p><span class="camp-red">红色</span>弹幕</p>')+'<p class="tips-text-gift">送礼计入'+e+"战队礼物支持率</p></div>";$(".camp-tip-layer").attr("class","camp-tip-layer camp-tip-layer-"+(t-1)).html(n)}(t))}0!=t&&n(t),a.info.support.on("change",(function(a){n(a),0!=a&&$(".camp-tip-layer").show()}))})),s.on("click",".camp-team-button",(function(t){var e=$(this);t.preventDefault(),TT.getUserInfo((function(t){if(t.isLogined){var n=parseInt(e.data("cid"),10);a.info.support.to(a.info.support.team==n?0:n);try{ya.reportProductEvent({eid:"click/hd/camp/zy",eid_desc:"点击/活动/camp/阵营"})}catch(a){}}else TT.login.login()}))})),s.on("mouseenter",".camp-team-button-on",(function(){$(".camp-tip-layer").show()})).on("mouseleave",".camp-team-button-on",(function(){$(".camp-tip-layer").hide()})),function(){var t=new e(a.info.pk);function e(a){var t=null,e="POP",n=(a.giftOpenState?'<p class="process-tit type-pop"></p>':"")+'<span class="camp-process-blue"></span><span class="camp-process-red"></span>',p=s.find(".camp-cnt-process");function i(){var t={POP:a.pop.blue,GIFT:a.gift.blue}[e],n=t+{POP:a.pop.red,GIFT:a.gift.red}[e],s=.5,i=.5;0!=n&&(i=1-(s=t/n)),p.find(".camp-process-blue").css({width:Math.max(Math.min(100*s,85),15)+"%"}).text((100*s).toFixed(1)+"%"),p.find(".camp-process-red").css({width:Math.max(Math.min(100*i,85),15)+"%"}).text((100*i).toFixed(1)+"%")}function r(){switch(clearTimeout(t),e="POP"==e?"GIFT":"POP"){case"POP":p.find(".process-tit").removeClass("type-gift").addClass("type-pop");break;case"GIFT":p.find(".process-tit").removeClass("type-pop").addClass("type-gift")}i(),t=setTimeout(r,1e4)}return p.html(n),i(),a.on("change",i),a.giftOpenState&&(p.on("click.toggle",".process-tit",(function(a){a.preventDefault(),r()})),t=setTimeout(r,1e4)),{destory:function(){clearTimeout(t),p.off("click.toggle"),a.off("change",i)}}}a.info.pk.on("change:openState",(function(){t.destory(),t=new e(a.info.pk)}))}(),s[a.info.pk.giftOpenState?"removeClass":"addClass"]("camp-giftOpenState-0"),a.info.pk.on("change:openState",(function(){s[a.info.pk.giftOpenState?"removeClass":"addClass"]("camp-giftOpenState-0")})),t.append(s),{destory:function(){s.remove()}}}n.a.on("change",(function(){p&&(p.destory(),p=null),-1!==n.a.info.sid?(s.show(),p=new i(n.a,s)):s.hide(),TT.emit("resizeWide")}))}}]);