(window.HUYA_MAIN_APP_WEBPACK_JSONP=window.HUYA_MAIN_APP_WEBPACK_JSONP||[]).push([[394],{1029:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useMemePanelVisible=t.useMemePaymentState=t.useStoreService=void 0;var n=a(12),i=(0,n.__importStar)(a(28)),r=(0,n.__importDefault)(a(19)),l=(0,n.__importDefault)(a(3)),o=(0,n.__importDefault)(a(75)),u=(0,n.__importDefault)(a(325)),m=(0,n.__importDefault)(a(82)),s=new(function(e){function t(t){var a=e.call(this)||this;return a.paymentState=!1,a.panelVisible=!1,a.pid=0,a.pid=t,a}return(0,n.__extends)(t,e),t.prototype.openPanel=function(){this.panelVisible||this.emit("memePanelVisibleChange",this.panelVisible=!0)},t.prototype.closePanel=function(){this.panelVisible&&this.emit("memePanelVisibleChange",this.panelVisible=!1)},t.prototype.togglePanel=function(){return this.panelVisible?this.closePanel():this.openPanel()},t.prototype.openMemePayment=function(){var e=this;TT.sudo((function(){e.paymentState||e.emit("memePaymentStateChange",e.paymentState=!0)}))},t.prototype.closeMemePayment=function(){this.paymentState&&this.emit("memePaymentStateChange",this.paymentState=!1)},t.prototype.sendMeme=function(e){var t=e.iType,a=e.sId;if(1===t||2===t){var n=o.default.findEmoticon(a);n&&(0===n.type?m.default.speak.send(n.name):2===n.type&&u.default.send(n.id).catch((function(e){m.default.speak.notice("发送失败："+e.message)})))}},t}(r.default))(l.default.lp),c=i.default.createContext(s);t.default=function(e){var t=e.children;return i.default.createElement(c.Provider,{value:s},t)},t.useStoreService=function(){return(0,i.useContext)(c)},t.useMemePaymentState=function(e){var t=(0,i.useState)(e.paymentState),a=t[0],n=t[1];return(0,i.useEffect)((function(){var t=function(){return n(e.paymentState)};return e.on("memePaymentStateChange",t),function(){e.off("memePaymentStateChange",t)}}),[e]),a},t.useMemePanelVisible=function(e){var t=(0,i.useState)(e.panelVisible),a=t[0],n=t[1];return(0,i.useEffect)((function(){var t=function(){return n(e.panelVisible)};return e.on("memePanelVisibleChange",t),function(){e.off("memePanelVisibleChange",t)}}),[e]),a}},1030:function(e,t,a){var n=a(1031);"string"==typeof n&&(n=[[e.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a(287)(n,i);n.locals&&(e.exports=n.locals)},1031:function(e,t,a){var n=a(286),i=a(288),r=a(1032),l=a(1033),o=a(1034),u=a(1035);t=n(!1);var m=i(r),s=i(l),c=i(o),d=i(u);t.push([e.i,".RoomMemePanel--1-Uraz9-spzxKdxRf7sxyB{order:6}.app--3JmbgQXFY1_OKfyXV5JAIh{position:relative;display:inline-block}.app--3JmbgQXFY1_OKfyXV5JAIh .entry--k4pVN0eWZG2KcjYy1__ug{display:inline-block;width:22px;height:22px;line-height:19px;box-sizing:border-box;border:2px solid;border-radius:50%;text-align:center;user-select:none;cursor:pointer;color:#AEAEAE}.app--3JmbgQXFY1_OKfyXV5JAIh .entry--k4pVN0eWZG2KcjYy1__ug.active--2BsOy5Ntv5pOMuSbY5FVty,.app--3JmbgQXFY1_OKfyXV5JAIh .entry--k4pVN0eWZG2KcjYy1__ug:hover{color:#9E9E9E}.panel--2ViWPWHRrk6mFJrCuqecMQ{position:relative}.panel--2ViWPWHRrk6mFJrCuqecMQ.skr--2xv2unWUCGis7l8dPsX6Dq{background-image:url("+m+");background-repeat:no-repeat;background-position:left bottom;background-size:340px 135px}.panel--2ViWPWHRrk6mFJrCuqecMQ .panel-ft--1Ho_jQt9m3uYBQU6zUOmPS{position:relative;z-index:2;padding:10px}.panel--2ViWPWHRrk6mFJrCuqecMQ .lock--16fPf_pDOKjpxgvXWsP0tI{position:absolute;z-index:1;bottom:0;left:0;width:100%;height:120px;text-align:center;background-image:linear-gradient(0, rgba(255,255,255,0), rgba(255,255,255,0.9), rgba(255,255,255,0.9), rgba(255,255,255,0))}.panel--2ViWPWHRrk6mFJrCuqecMQ .lock--16fPf_pDOKjpxgvXWsP0tI .btn--2_LHn0IgGZr8xDFqbyl-o6{margin-top:30px;display:inline-block;line-height:30px;border-radius:4px;color:#fff;background-color:#ff9600;padding:0 0.8em;cursor:pointer;user-select:none}.panel--2ViWPWHRrk6mFJrCuqecMQ .lock--16fPf_pDOKjpxgvXWsP0tI .btn--2_LHn0IgGZr8xDFqbyl-o6:hover{opacity:0.9}.MemeTab--3Dj3h2xCUJaOfVa_upCAUE{display:flex;align-items:center}.MemeTab--3Dj3h2xCUJaOfVa_upCAUE .item--3JwuXpfdxl2TzD2FY0IBWA{position:relative;flex:1;display:inline-flex;align-items:center;justify-content:center;height:34px;padding:5px;border:1px solid #D3D3D3;box-sizing:border-box;border-radius:4px;cursor:pointer}.MemeTab--3Dj3h2xCUJaOfVa_upCAUE .item--3JwuXpfdxl2TzD2FY0IBWA img{max-height:20px !important;max-width:100%}.MemeTab--3Dj3h2xCUJaOfVa_upCAUE .item--3JwuXpfdxl2TzD2FY0IBWA.active--2BsOy5Ntv5pOMuSbY5FVty{border-color:#FF9600}.MemeTab--3Dj3h2xCUJaOfVa_upCAUE .item--3JwuXpfdxl2TzD2FY0IBWA .id--3xHxhKLFT5bCE66sOaxZZU{position:absolute;top:-9px;right:-6px;display:inline-flex;align-items:center;line-height:18px;padding:0 6px;background:#8192A2;border-radius:9px;color:#fff}.MemeTab--3Dj3h2xCUJaOfVa_upCAUE .item--3JwuXpfdxl2TzD2FY0IBWA .id--3xHxhKLFT5bCE66sOaxZZU i{display:inline-block;width:14px;height:14px;background:url("+s+");background-size:cover;margin-right:2px}.MemeTab--3Dj3h2xCUJaOfVa_upCAUE .item--3JwuXpfdxl2TzD2FY0IBWA+.item--3JwuXpfdxl2TzD2FY0IBWA{margin-left:8px}.MemeTab--3Dj3h2xCUJaOfVa_upCAUE .prev--12fdrtU4CCndVPfUxHsBtZ,.MemeTab--3Dj3h2xCUJaOfVa_upCAUE .next--2uM6TgQ53gw0qiNif8bsVD{width:23px;height:34px;box-sizing:border-box;border:1px solid #bbb;border-radius:4px;cursor:pointer;background-position:50%;background-repeat:no-repeat;background-size:18px}.MemeTab--3Dj3h2xCUJaOfVa_upCAUE .prev--12fdrtU4CCndVPfUxHsBtZ.disabled--1y0oovs4x1M-yuGOBnFZLQ,.MemeTab--3Dj3h2xCUJaOfVa_upCAUE .next--2uM6TgQ53gw0qiNif8bsVD.disabled--1y0oovs4x1M-yuGOBnFZLQ{opacity:0.35;cursor:default}.MemeTab--3Dj3h2xCUJaOfVa_upCAUE .prev--12fdrtU4CCndVPfUxHsBtZ{margin-right:8px;background-image:url("+c+")}.MemeTab--3Dj3h2xCUJaOfVa_upCAUE .next--2uM6TgQ53gw0qiNif8bsVD{margin-left:8px;background-image:url("+d+")}.box--QFg8FSITbByMQW_rGqc3C .box-hd--3ObzAOVRLmmhop2QDN6bkZ{min-height:30px;background:linear-gradient(90deg, rgba(255,239,194,0.5) 0%, rgba(255,223,138,0.5) 100%);display:flex;align-items:center;padding:0 10px}.box--QFg8FSITbByMQW_rGqc3C .box-bd--1UxrKIxy0YoEx3Rfm5pGM1{height:100px}.box--QFg8FSITbByMQW_rGqc3C .box-title--24XktkSy0KS4MgNIBx1OJ5{color:#D27000}.MemoPanelLock--3xY6Tvoh8Ex9EAm7k_s-3b .memeList--Lrs9uavG37DK-64L58pxI{display:flex;justify-content:center;flex-wrap:wrap;height:90px;overflow:hidden}.MemoPanelLock--3xY6Tvoh8Ex9EAm7k_s-3b .memeList--Lrs9uavG37DK-64L58pxI .memeItem--1kw893oTHZqEvgXVLsyOOc{display:inline-block;margin-top:15px}.MemoPanelLock--3xY6Tvoh8Ex9EAm7k_s-3b .memeList--Lrs9uavG37DK-64L58pxI .memeItem--1kw893oTHZqEvgXVLsyOOc+.memeItem--1kw893oTHZqEvgXVLsyOOc{margin-left:20px}.MemoPanel--4xc-GSY09xL-NC0GTJrIM .memeList--Lrs9uavG37DK-64L58pxI{display:flex;align-items:center;justify-content:center;flex-wrap:wrap}.MemoPanel--4xc-GSY09xL-NC0GTJrIM .memeList--Lrs9uavG37DK-64L58pxI .memeItem--1kw893oTHZqEvgXVLsyOOc{display:inline-block;margin-top:15px;cursor:pointer;margin-left:20px}.MemoPanel--4xc-GSY09xL-NC0GTJrIM .expireTime--1ww5JwGMfVJMTuSIPEs7ah{flex:1;text-align:right;color:#C9AD8C}\n",""]),t.locals={RoomMemePanel:"RoomMemePanel--1-Uraz9-spzxKdxRf7sxyB",app:"app--3JmbgQXFY1_OKfyXV5JAIh",entry:"entry--k4pVN0eWZG2KcjYy1__ug",active:"active--2BsOy5Ntv5pOMuSbY5FVty",panel:"panel--2ViWPWHRrk6mFJrCuqecMQ",skr:"skr--2xv2unWUCGis7l8dPsX6Dq","panel-ft":"panel-ft--1Ho_jQt9m3uYBQU6zUOmPS",lock:"lock--16fPf_pDOKjpxgvXWsP0tI",btn:"btn--2_LHn0IgGZr8xDFqbyl-o6",MemeTab:"MemeTab--3Dj3h2xCUJaOfVa_upCAUE",item:"item--3JwuXpfdxl2TzD2FY0IBWA",id:"id--3xHxhKLFT5bCE66sOaxZZU",prev:"prev--12fdrtU4CCndVPfUxHsBtZ",next:"next--2uM6TgQ53gw0qiNif8bsVD",disabled:"disabled--1y0oovs4x1M-yuGOBnFZLQ",box:"box--QFg8FSITbByMQW_rGqc3C","box-hd":"box-hd--3ObzAOVRLmmhop2QDN6bkZ","box-bd":"box-bd--1UxrKIxy0YoEx3Rfm5pGM1","box-title":"box-title--24XktkSy0KS4MgNIBx1OJ5",MemoPanelLock:"MemoPanelLock--3xY6Tvoh8Ex9EAm7k_s-3b",memeList:"memeList--Lrs9uavG37DK-64L58pxI",memeItem:"memeItem--1kw893oTHZqEvgXVLsyOOc",MemoPanel:"MemoPanel--4xc-GSY09xL-NC0GTJrIM",expireTime:"expireTime--1ww5JwGMfVJMTuSIPEs7ah"},e.exports=t},109:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mount=void 0;var n=a(12),i=a(4),r=(0,n.__importStar)(a(28)),l=(0,n.__importDefault)(a(42)),o=(0,n.__importDefault)(a(285)),u=(0,n.__importStar)(a(420)),m=(0,n.__importDefault)(a(75)),s=(0,n.__importDefault)(a(323)),c=(0,n.__importDefault)(a(311)),d=(0,n.__importDefault)(a(421)),f=(0,n.__importDefault)(a(352)),p=(0,n.__importStar)(a(1029)),x=(0,n.__importDefault)(a(1030)),b=(0,n.__importDefault)(a(1036)),g=(0,n.__importDefault)(a(1037));function h(e){var t=e.iType;return t===u.EmojiType.EMOJI_Flexible_Emotion||t===u.EmojiType.EMOJI_Normal_Emotion}var v=r.default.createContext(m.default);function y(e){var t=e.children;return r.default.createElement(v.Provider,{value:m.default},t)}function _(){var e,t,a=(0,p.useStoreService)(),i=(0,p.useMemePaymentState)(a),l=(0,p.useMemePanelVisible)(a),m=(0,r.useCallback)((function(){return a.togglePanel()}),[a]),f=(0,r.useRef)(null),b=(0,r.useRef)(null);(0,r.useEffect)((function(){function e(e){i||(f.current.contains(e.target)||b.current.contains(e.target)||a.closePanel())}if(l)return document.body.addEventListener("click",e,!1),function(){document.body.removeEventListener("click",e,!1)}}),[l,i,a]);var g=(0,u.useMemeService)(),h=(0,u.useMemeInfo)(g).packages,v=(0,r.useState)((function(){var e=h.find((function(e){return 1==e.iStatus}))||h[0];return e?e.lPackageId:-1})),y=v[0],_=v[1],P=(0,r.useMemo)((function(){return g.findPackage(y)||{lPackageId:-1,sPackIdentify:"",iStatus:0,iPrice:0,lExpireTime:0,sRechargeBtonText:"",emojiList:[]}}),[y,h]);return r.default.createElement("div",{className:x.default.app,ref:f},r.default.createElement("i",{onClick:m,className:(0,o.default)(x.default.entry,(e={},e[x.default.active]=l,e))},"梗"),l&&r.default.createElement(s.default,{style:{left:"-1px"}},r.default.createElement(c.default,{absissa:159,style:{width:"340px"}},r.default.createElement("div",{className:(0,o.default)(x.default.panel,(t={},t[x.default.skr]=0===P.iStatus,t)),ref:b},0===P.iStatus&&r.default.createElement(E,(0,n.__assign)({},P)),1===P.iStatus&&r.default.createElement(M,(0,n.__assign)({},P)),r.default.createElement("div",{className:x.default["panel-ft"]},r.default.createElement(k,{packages:(0,n.__spreadArray)([],h,!0).sort((function(e,t){return e.iStatus&&!t.iStatus?-1:1})),currentPackage:P,onSelect:function(e){var t=e.lPackageId;return _(t)}})),0===P.iStatus&&r.default.createElement("div",{className:x.default.lock},r.default.createElement("span",{className:x.default.btn,onClick:function(){return a.openMemePayment()}},P.sRechargeBtonText||"立即解锁"))))),i&&r.default.createElement(d.default,{packageId:P.lPackageId,profileUid:a.pid,onSuccess:function(){return g.fetchMemeInfo(!0)},onClose:function(){return a.closeMemePayment()}}))}function E(e){e.sRechargeBtonText;var t=e.emojiList;return r.default.createElement("div",{className:(0,o.default)(x.default.box,x.default.MemoPanelLock)},r.default.createElement("div",{className:x.default["box-hd"]},r.default.createElement("img",{src:b.default,width:14}),r.default.createElement("span",{className:x.default["box-title"]}," 解锁以下梗，做直播间最靓的仔~~")),r.default.createElement("div",{className:x.default["box-bd"]},r.default.createElement("div",{className:x.default.memeList},t.filter(h).slice(0,4).map((function(e,t){var a=e.sId;return r.default.createElement("div",{className:x.default.memeItem,key:t},r.default.createElement(P,{id:a}))})))))}function M(e){var t,a,n,l,u,m,s,c=e.emojiList,d=e.lExpireTime,b=(0,p.useStoreService)();return r.default.createElement("div",{className:(0,o.default)(x.default.box,x.default.MemoPanel)},r.default.createElement("div",{className:x.default["box-hd"]},r.default.createElement("img",{src:g.default,width:14}),r.default.createElement("span",{className:x.default["box-title"]}," 已解锁，点击即可发送"),r.default.createElement("span",{className:x.default.expireTime},"有效期至 ",(t="string"==typeof d?parseInt(d,10):d,a=new Date(1e3*t),n=a.getFullYear(),l=a.getMonth()+1,u=a.getDate(),m=a.getHours(),s=a.getMinutes(),n+"/"+(0,i.padStart00)(l)+"/"+(0,i.padStart00)(u)+" "+(0,i.padStart00)(m)+":"+(0,i.padStart00)(s)))),r.default.createElement(f.default,{className:x.default["box-bd"]},r.default.createElement("div",{className:x.default.memeList},c.filter(h).map((function(e,t){return r.default.createElement("div",{className:x.default.memeItem,onClick:function(){return function(e){b.sendMeme(e),b.closePanel()}(e)},key:t},r.default.createElement(P,{id:e.sId}))})))))}function P(e){var t=e.id,a=(0,r.useContext)(v).findEmoticon(t);if(a){var n=a.url,i=a.extraUrl,l=a.type,o=a.flexiUrl.replace(".png","_3.png")||i||n,u=0===l?"28px":2===l?"30px":"auto";return r.default.createElement("img",{src:o,alt:"梗-"+t,style:{maxHeight:u}})}return null}function k(e){var t=e.packages,a=e.currentPackage,n=e.onSelect,i=t.length-1;t.indexOf(a);function l(e){var r=Math.max(0,Math.min(e,i));a!=t[r]&&n(t[r])}return r.default.createElement("div",{className:x.default.MemeTab},!1,t.map((function(e,t){var n,i=e.emojiList,u=e.sPackIdentify,m=e.iStatus;return i.length>0?r.default.createElement("span",{className:(0,o.default)(x.default.item,(n={},n[x.default.active]=e==a,n)),onClick:function(){return l(t)},key:t},r.default.createElement("b",{className:x.default.id},0==m&&r.default.createElement("i",null),u||t+1),r.default.createElement(P,{id:i[0].sId})):null})),!1)}t.mount=function(){var e=document.createElement("div");e.className=(0,o.default)("room-chat-tool",x.default.RoomMemePanel),$(".room-chat-tools").append(e),l.default.render(r.default.createElement(u.default,null,r.default.createElement(y,null,r.default.createElement(p.default,null,r.default.createElement(_,null)))),e)}}}]);