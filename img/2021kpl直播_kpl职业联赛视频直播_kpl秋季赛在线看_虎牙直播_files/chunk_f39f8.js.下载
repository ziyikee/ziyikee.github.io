(window.HUYA_MAIN_APP_WEBPACK_JSONP=window.HUYA_MAIN_APP_WEBPACK_JSONP||[]).push([[316],{1225:function(e,t,n){var o=n(1226);"string"==typeof o&&(o=[[e.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(287)(o,a);o.locals&&(e.exports=o.locals)},1226:function(e,t,n){(t=n(286)(!1)).push([e.i,".container-chat--2voggr_9M-KbNJF9kyxJRF.default--7Obu1egCbLyrVM9FlTOoG{position:absolute;z-index:199;top:0;right:0;height:100%;width:0}.container-chat--2voggr_9M-KbNJF9kyxJRF.active--1gcaPf0IvEx8HRq0ZS20Va{position:absolute;z-index:199;top:0;right:0;width:100%;height:100%;overflow:hidden}.container-chat--2voggr_9M-KbNJF9kyxJRF.open--3fQSSKMUxm6TqWSLHNO-Hb{position:absolute;z-index:199;top:0;right:0;width:100%;height:100%;overflow:hidden}.container-player--2LjxGOECiWldb6tdylGMjg.default--7Obu1egCbLyrVM9FlTOoG{position:absolute;top:0;right:0;height:100%;width:0}.container-player--2LjxGOECiWldb6tdylGMjg.active--1gcaPf0IvEx8HRq0ZS20Va{position:absolute;top:0;right:0;width:100%;height:100%;overflow:hidden}.container-player--2LjxGOECiWldb6tdylGMjg.open--3fQSSKMUxm6TqWSLHNO-Hb{position:absolute;top:10px;right:0px;height:calc(100% - 64px);width:338px;overflow:hidden}.community-content--1oUllGRIWgho1cqAC0W_gg{position:absolute;top:0;right:0;width:100%;height:100%}\n",""]),t.locals={"container-chat":"container-chat--2voggr_9M-KbNJF9kyxJRF",default:"default--7Obu1egCbLyrVM9FlTOoG",active:"active--1gcaPf0IvEx8HRq0ZS20Va",open:"open--3fQSSKMUxm6TqWSLHNO-Hb","container-player":"container-player--2LjxGOECiWldb6tdylGMjg","community-content":"community-content--1oUllGRIWgho1cqAC0W_gg"},e.exports=t},126:function(e,t,n){"use strict";n.r(t);var o=n(3),a=n(4),r=n(28),c=n.n(r),i=n(42),l=n.n(i),u=n(1433),s=n(285),d=n.n(s),f=n(290),m=n(32),p=n(24),b=n(312),h=n(308),y=n(313),g=n(315),v=n(1168),O=n(295),E=n(366),j=n(303),S=n(434),x=n(435),C=n(304),w=n(15),I=n(1169),P=n(1434),_=n(1225),A=n.n(_);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,a,r=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(o=n.next()).done)&&(r.push(o.value),!t||r.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e){var t,n=e.type,o=e.userInfo,a=e.sectionInfo,r=e.container,i=(t={},J(t,j.b,O.b),J(t,j.a,O.a),t)[n],l=$(r);l.addClass(A.a.default);var u={onDrag:function(){l.removeClass(A.a.default),l.addClass(A.a.active)},onDrop:function(){l.addClass(A.a.default),l.removeClass(A.a.active)},onOpen:function(){l.removeClass(A.a.default),l.addClass(A.a.open)},onClose:function(){l.addClass(A.a.default),l.removeClass(A.a.open)}};return c.a.createElement(j.c.Provider,{value:n},c.a.createElement(S.a.Provider,{value:a},c.a.createElement(x.a.Provider,{value:o},c.a.createElement(O.c.Provider,{value:i},c.a.createElement(D,u)))))}function D(e){var t=e.onOpen,o=e.onClose,a=e.onDrag,i=e.onDrop,l=k(Object(E.a)(),3),s=l[0],m=(l[1],l[2]),p=k(Object(r.useState)({x:"100%",y:"calc(100% - 200px)"}),2),g=p[0],v=p[1],O=k(Object(y.a)(),3),S=O[0],x=(O[1],O[2]),w=Object(C.a)(),_=Object(r.useContext)(j.c),N=Object(r.useCallback)((function(){t(),m(),w({eid:"usr/click/ball/community",eid_desc:"点击/赛事社区/悬浮球"})}),[t,w]),T=Object(r.useCallback)((function(e){t(),m(),e?x(h.a.DETAIL,{mid:e}):x(h.a.LIST),w({eid:"usr/click/ball-notice/community",eid_desc:"点击/赛事社区/悬浮球通知"})}),[t,w]),J=Object(r.useCallback)((function(){TT.sudo((function(e){var t=e.uid,o="USER_".concat(t,"_PASSED_ANSWER");if(localStorage.getItem(o))x(h.a.EDIT);else{var a=Object(b.a)(t);a.then((function(e){1===e.status?(localStorage.setItem(o,"1"),x(h.a.EDIT)):Promise.all([n.e(92),n.e(127),n.e(233)]).then(n.bind(null,96)).then((function(e){(0,e.default)({sNativeUrl:"https://hd.huya.com/h5/communityanswers/",iPos:5,iHeight:515,iWidth:375})}))})).catch((function(e){})),a.catch((function(e){f.default.error({text:"查询答题认证状态失败：".concat(e.message),container:document.getElementById("J_MatchCommunity_notice_".concat(_))})}))}})),w({eid:"usr/click/post-listpostbtn/community",eid_desc:"点击/赛事社区/发帖按钮"})}),[w,_]),W=Object(r.useCallback)((function(e,t){v({x:"100%",y:"".concat(t,"px")}),i()}),[i]),D={opacity:0,transform:"scale(0)",transformOrigin:"".concat(g.x," ").concat(g.y),transition:"all ".concat(200,"ms")},L={entering:{opacity:1,transform:"scale(1)"},entered:{opacity:1,transform:"scale(1)"},exiting:{opacity:0,transform:"scale(0)"},exited:{opacity:0,transform:"scale(0)"}};return c.a.createElement("div",{className:d()(A.a.community,{fullScreen:_==j.a})},c.a.createElement(u.a,{in:s,timeout:200,mountOnEnter:!1,unmountOnExit:!1,onExited:o},(function(e){return c.a.createElement("div",{className:A.a["community-content"],style:M(M({},D),L[e])},c.a.createElement(P.a,null))})),c.a.createElement(I.a.View,{onClick:N,onDrag:a,onDrop:W,onJump:T,visible:!s}),s&&_==j.b&&(S===h.a.LIST||S===h.a.MINE)&&c.a.createElement(I.a.Edit,{onClick:J}))}Object(b.g)().then((function(e){var t=Object(a.once)((function(e){return function(e,t){var n=document.getElementById("J_communityContainer"),a=document.getElementById("player-community-contaier");n&&($(n).addClass(A.a["container-chat"]),l.a.render(c.a.createElement(W,{type:j.b,userInfo:t,sectionInfo:e,container:n}),n));a&&($(a).addClass(A.a["container-player"]),l.a.render(c.a.createElement(W,{type:j.a,userInfo:t,sectionInfo:e,container:a}),a));function r(t){switch(t){case v.b:Object(w.reportEvent)({eid:"usr/pageshow/ball/community/publicscreen",eid_desc:"曝光/赛事社区/悬浮球/半屏",prop:JSON.stringify({room:o.default.lp,block:e.sectionId,position:"verticalscreen"})});break;case v.a:Object(w.reportEvent)({eid:"usr/pageshow/ball/community/fullscreen",eid_desc:"曝光/赛事社区/悬浮球/全屏",prop:JSON.stringify({room:o.default.lp,block:e.sectionId,position:"horizontalscreen"})})}}r(v.c.type),v.c.on("change",r),b.b.on("SafeAuthError",(function(e){var t=p.default.dialog.iframe({title:"安全验证",src:e,width:380,height:340});m.default.on("udbSafeAuth",(function e(){m.default.off("udbSafeAuth",e),t.close()}))}))}(g.a,e)}));1!=+e&&g.a.getSections().then((function(){g.a.sectionId&&(TT.getUserInfo(t),setTimeout((function(){t({uid:0,userName:"",userNick:"",userLogo:""})}),24e3))})).catch((function(e){console.error("获取赛事社区板块绑定信息失败：".concat(e.message))}))})).catch((function(e){console.error("查询赛事社区开关状态失败：".concat(e.message))}))}}]);