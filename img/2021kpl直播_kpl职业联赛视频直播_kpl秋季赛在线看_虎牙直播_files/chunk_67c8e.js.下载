(window.HUYA_MAIN_APP_WEBPACK_JSONP=window.HUYA_MAIN_APP_WEBPACK_JSONP||[]).push([[460],{1065:function(n,e,a){"use strict";a(1066);var t=a(8),s=a(1067);var i={};e.a=function(n){var e=$.extend({pid:0,container:null},n),a=$.extend(this,new t.a),c=0,r=$('<div class="fansBadgeAnchor-box fansBadgeAnchor-loading"></div>');a.on("destroy",(function(){r.remove()})),$(e.container).append(r);var d=function(n){var e=i[n];e||((e=i[n]=new $.Deferred((function(e){!function(n,e){TTP.isH5?TTP.ready((function(a){var t=new a.taf.HUYA.PresenterActivityReq;t.tId=a.userId,t.lUid=n,a.sendWup2("huyauserui","getPresenterActivity",t,e)})):(TTP.one("PresenterActivityRsp",(function(n){e(n.param)})),TTP.ready((function(e){e.callAs("PresenterActivityReq",{lBadgeId:n})})))}(n,e.resolve)}))).done((function(){setTimeout((function(){delete i[n]}),6e5)})),e.fail((function(){delete i[n]})));return e}(e.pid);a.on("destroy",d.reject),d.done((function(n){r.removeClass("fansBadgeAnchor-loading").html(s(n))})),$.extend(a,{id:e.pid,destroy:function(){-1!=c&&(c=-1,a.emit("destroy"),a.off())}})}},1066:function(n,e,a){},1067:function(module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){rethrow=rethrow||function(n,e,a,t,s){var i=e.split("\n"),c=Math.max(t-3,0),r=Math.min(i.length,t+3),d=s(a),_=i.slice(c,r).map((function(n,e){var a=e+c+1;return(a==t?" >> ":"    ")+a+"| "+n})).join("\n");throw n.path=d,n.message=(d||"ejs")+":"+t+"\n"+_+"\n\n"+n.message,n},escapeFn=escapeFn||function(n){return null==n?"":String(n).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(n){return _ENCODE_HTML_RULES[n]||n}var __line=1,__lines='<div class="fansBadgeAnchor">\n    <div class="fansBadgeAnchor-hd">徽章主播</div>\n    <div class="fansBadgeAnchor-bd">\n        <%\n            if (window.IS_UNION) {\n                var href = TT.app.main + \'union/\'+ TT.createRoomHost(tAct.tLive.sPrivateHost, tAct.iRoomId, tAct.tLive.lYYId) + \'?promoter=\' + TT.promoter\n                var target = \'_self\'\n            } else {\n                var href = TT.app.main + TT.createRoomHost(tAct.tLive.sPrivateHost, tAct.iRoomId, tAct.tLive.lYYId)\n                var target = \'_blank\'\n            }\n        %>\n        <a class="fansBadgeAnchor-avatar" target="<%=target%>" href="<%=href%>">\n            <img src="<%=TT.trimUrl(tAct.sAvatar)%>" alt="主播头像">\n            <% if (tAct.bLive) { %>\n            <i>在播</i>\n            <% } %>\n        </a>\n        <div class="fansBadgeAnchor-cont">\n            <div class="fansBadgeAnchor-nick">\n                <a target="<%=target%>" href="<%=href%>" class="fansBadgeAnchor-name" title="<%= HUYA_UTIL.unescape(tAct.sNick) %>"><%= HUYA_UTIL.unescape(tAct.sNick) %></a>\n            </div>\n            <div class="fansBadgeAnchor-tag">\n                <% if (tAct.tLive.sGameName) { %>\n                <span><%= HUYA_UTIL.unescape(tAct.tLive.sGameName) %></span>\n                <% } %>\n            </div>\n        </div>\n    </div>\n    <div class="fansBadgeAnchor-ft">\n        <p class="fansBadgeAnchor-fansNum">徽章人数: <em><%=tAct.iFansNum < 1e4 ? tAct.iFansNum : ((tAct.iFansNum/1e4).toFixed(1)+\'万\')%></em></p>\n        <p class="fansBadgeAnchor-fansDm"><%-tAct.sDiamondUrl ? \'<img src="\'+ TT.trimUrl(tAct.sDiamondUrl).replace(\'.png\', \'_3.png\') +\'" />\' : \'<i></i>\'%><span>钻粉: <em><%=tAct.iDiamondFansNum%>/<%=tAct.iDiamondFansQuota%></em></span></p>\n    </div>\n</div>',__filename="widget/fansBadgeAnchor/tpl.tmpl";try{var __output="";function __append(n){null!=n&&(__output+=n)}with(locals||{}){if(__append('<div class="fansBadgeAnchor">\n    <div class="fansBadgeAnchor-hd">徽章主播</div>\n    <div class="fansBadgeAnchor-bd">\n        '),__line=4,window.IS_UNION)var href=TT.app.main+"union/"+TT.createRoomHost(tAct.tLive.sPrivateHost,tAct.iRoomId,tAct.tLive.lYYId)+"?promoter="+TT.promoter,target="_self";else var href=TT.app.main+TT.createRoomHost(tAct.tLive.sPrivateHost,tAct.iRoomId,tAct.tLive.lYYId),target="_blank";__line=12,__append('\n        <a class="fansBadgeAnchor-avatar" target="'),__line=13,__append(escapeFn(target)),__append('" href="'),__append(escapeFn(href)),__append('">\n            <img src="'),__line=14,__append(escapeFn(TT.trimUrl(tAct.sAvatar))),__append('" alt="主播头像">\n            '),__line=15,tAct.bLive&&(__append("\n            <i>在播</i>\n            "),__line=17),__append('\n        </a>\n        <div class="fansBadgeAnchor-cont">\n            <div class="fansBadgeAnchor-nick">\n                <a target="'),__line=21,__append(escapeFn(target)),__append('" href="'),__append(escapeFn(href)),__append('" class="fansBadgeAnchor-name" title="'),__append(escapeFn(HUYA_UTIL.unescape(tAct.sNick))),__append('">'),__append(escapeFn(HUYA_UTIL.unescape(tAct.sNick))),__append('</a>\n            </div>\n            <div class="fansBadgeAnchor-tag">\n                '),__line=24,tAct.tLive.sGameName&&(__append("\n                <span>"),__line=25,__append(escapeFn(HUYA_UTIL.unescape(tAct.tLive.sGameName))),__append("</span>\n                "),__line=26),__append('\n            </div>\n        </div>\n    </div>\n    <div class="fansBadgeAnchor-ft">\n        <p class="fansBadgeAnchor-fansNum">徽章人数: <em>'),__line=31,__append(escapeFn(tAct.iFansNum<1e4?tAct.iFansNum:(tAct.iFansNum/1e4).toFixed(1)+"万")),__append('</em></p>\n        <p class="fansBadgeAnchor-fansDm">'),__line=32,__append(tAct.sDiamondUrl?'<img src="'+TT.trimUrl(tAct.sDiamondUrl).replace(".png","_3.png")+'" />':"<i></i>"),__append("<span>钻粉: <em>"),__append(escapeFn(tAct.iDiamondFansNum)),__append("/"),__append(escapeFn(tAct.iDiamondFansQuota)),__append("</em></span></p>\n    </div>\n</div>"),__line=34}return __output}catch(e){rethrow(e,__lines,__filename,__line,escapeFn)}}}}]);