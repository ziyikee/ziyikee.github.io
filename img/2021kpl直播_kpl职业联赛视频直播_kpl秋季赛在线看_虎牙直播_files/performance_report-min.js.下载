(function(){if(!(window.performanceInfo&&document.addEventListener&&window.performance&&typeof(window.performance.timing)=="object")){return false}if(window.performance.timing.fetchStart<=0||(new Date(window.performance.timing.fetchStart)).getFullYear()!=(new Date()).getFullYear()){return false}if(window.performanceInfo.firstLoad){return false}window.performanceInfo.firstLoad=true;var detector=(function(){var detector={};var NA_VERSION="-1";var win=this;var external;var re_msie=/\b(?:msie |ie |trident\/[0-9].*rv[ :])([0-9.]+)/;var re_blackberry_10=/\bbb10\b.+?\bversion\/([\d.]+)/;var re_blackberry_6_7=/\bblackberry\b.+\bversion\/([\d.]+)/;var re_blackberry_4_5=/\bblackberry\d+\/([\d.]+)/;function toString(object){return Object.prototype.toString.call(object)}function isObject(object){return toString(object)==="[object Object]"}function isFunction(object){return toString(object)==="[object Function]"}function each(object,factory){for(var i=0,l=object.length;i<l;i++){if(factory.call(object,object[i],i)===false){break}}}var DEVICES=[["nokia",function(ua){if(ua.indexOf("nokia ")!==-1){return/\bnokia ([0-9]+)?/}else{return/\bnokia([a-z0-9]+)?/}}],["samsung",function(ua){if(ua.indexOf("samsung")!==-1){return/\bsamsung(?:[ \-](?:sgh|gt|sm))?-([a-z0-9]+)/}else{return/\b(?:sgh|sch|gt|sm)-([a-z0-9]+)/}}],["wp",function(ua){return ua.indexOf("windows phone ")!==-1||ua.indexOf("xblwp")!==-1||ua.indexOf("zunewp")!==-1||ua.indexOf("windows ce")!==-1}],["pc","windows"],["ipad","ipad"],["ipod","ipod"],["iphone",/\biphone\b|\biph(\d)/],["mac","macintosh"],["mi",/\bmi[ \-]?([a-z0-9 ]+(?= build|\)))/],["aliyun",/\baliyunos\b(?:[\-](\d+))?/],["meizu",function(ua){return ua.indexOf("meizu")>=0?/\bmeizu[\/ ]([a-z0-9]+)\b/:/\bm([0-9x]{1,3})\b/}],["nexus",/\bnexus ([0-9s.]+)/],["huawei",function(ua){var re_mediapad=/\bmediapad (.+?)(?= build\/huaweimediapad\b)/;if(ua.indexOf("huawei-huawei")!==-1){return/\bhuawei\-huawei\-([a-z0-9\-]+)/}else{if(re_mediapad.test(ua)){return re_mediapad}else{return/\bhuawei[ _\-]?([a-z0-9]+)/}}}],["hongmi",/\bhm[ \-]?([a-z0-9]+)/],["lenovo",function(ua){if(ua.indexOf("lenovo-lenovo")!==-1){return/\blenovo\-lenovo[ \-]([a-z0-9]+)/}else{return/\blenovo[ \-]?([a-z0-9]+)/}}],["zte",function(ua){if(/\bzte\-[tu]/.test(ua)){return/\bzte-[tu][ _\-]?([a-su-z0-9\+]+)/}else{return/\bzte[ _\-]?([a-su-z0-9\+]+)/}}],["vivo",/\bvivo(?: ([a-z0-9]+))?/],["htc",function(ua){if(/\bhtc[a-z0-9 _\-]+(?= build\b)/.test(ua)){return/\bhtc[ _\-]?([a-z0-9 ]+(?= build))/}else{return/\bhtc[ _\-]?([a-z0-9 ]+)/}}],["oppo",/\boppo[_]([a-z0-9]+)/],["konka",/\bkonka[_\-]([a-z0-9]+)/],["sonyericsson",/\bmt([a-z0-9]+)/],["coolpad",/\bcoolpad[_ ]?([a-z0-9]+)/],["lg",/\blg[\-]([a-z0-9]+)/],["android",/\bandroid\b|\badr\b/],["blackberry",function(ua){if(ua.indexOf("blackberry")>=0){return/\bblackberry\s?(\d+)/}return"bb10"}]];var OS=[["wp",function(ua){if(ua.indexOf("windows phone ")!==-1){return/\bwindows phone (?:os )?([0-9.]+)/}else{if(ua.indexOf("xblwp")!==-1){return/\bxblwp([0-9.]+)/}else{if(ua.indexOf("zunewp")!==-1){return/\bzunewp([0-9.]+)/}}}return"windows phone"}],["windows",/\bwindows nt ([0-9.]+)/],["macosx",/\bmac os x ([0-9._]+)/],["ios",function(ua){if(/\bcpu(?: iphone)? os /.test(ua)){return/\bcpu(?: iphone)? os ([0-9._]+)/}else{if(ua.indexOf("iph os ")!==-1){return/\biph os ([0-9_]+)/}else{return/\bios\b/}}}],["android",function(ua){if(ua.indexOf("android")>=0){return/\bandroid[ \/-]?([0-9.x]+)?/}else{if(ua.indexOf("adr")>=0){if(ua.indexOf("mqqbrowser")>=0){return/\badr[ ]\(linux; u; ([0-9.]+)?/}else{return/\badr(?:[ ]([0-9.]+))?/}}}return"android"}],["chromeos",/\bcros i686 ([0-9.]+)/],["linux","linux"],["windowsce",/\bwindows ce(?: ([0-9.]+))?/],["symbian",/\bsymbian(?:os)?\/([0-9.]+)/],["blackberry",function(ua){var m=ua.match(re_blackberry_10)||ua.match(re_blackberry_6_7)||ua.match(re_blackberry_4_5);return m?{version:m[1]}:"blackberry"}]];function IEMode(ua){if(!re_msie.test(ua)){return null}var m,engineMode,engineVersion,browserMode,browserVersion;if(ua.indexOf("trident/")!==-1){m=/\btrident\/([0-9.]+)/.exec(ua);if(m&&m.length>=2){engineVersion=m[1];var v_version=m[1].split(".");v_version[0]=parseInt(v_version[0],10)+4;browserVersion=v_version.join(".")}}m=re_msie.exec(ua);browserMode=m[1];var v_mode=m[1].split(".");if(typeof browserVersion==="undefined"){browserVersion=browserMode}v_mode[0]=parseInt(v_mode[0],10)-4;engineMode=v_mode.join(".");if(typeof engineVersion==="undefined"){engineVersion=engineMode}return{browserVersion:browserVersion,browserMode:browserMode,engineVersion:engineVersion,engineMode:engineMode,compatible:engineVersion!==engineMode}}function checkTW360External(key){if(!external){return}try{var runpath=external.twGetRunPath.toLowerCase();var security=external.twGetSecurityID(win);var version=external.twGetVersion(security);if(runpath&&runpath.indexOf(key)===-1){return false}if(version){return{version:version}}}catch(ex){}}var MAX_360_CHROME_VERSION=86;var chrome_weight={"result":"Chrome","details":{"Chrome":5,"Chromium":0,"_360SE":0,"_360EE":0},"sorted":["Chrome","360SE","360EE","Chromium"],"exec":function exec(results){var details={"Chrome":5,"Chromium":0,"_360SE":0,"_360EE":0};
var _ua=window.navigator.userAgent;if(/Chrome\/([\d.])+\sSafari\/([\d.])+$/.test(_ua)){if(window.navigator.platform=="Win32"){if(!window.clientInformation.languages){details._360SE+=8}if(/zh/i.test(navigator.language)){details._360SE+=3;details._360EE+=3}if(window.clientInformation.languages){var lang_len=window.clientInformation.languages.length;if(lang_len>=3){details.Chrome+=10;details.Chromium+=6}else{if(lang_len==2){details.Chrome+=3;details.Chromium+=6;details._360EE+=6}else{if(lang_len==1){details.Chrome+=4;details.Chromium+=4}}}}for(var i in window.navigator.plugins){if(window.navigator.plugins[i].filename=="np-mswmp.dll"){details._360SE+=20;details._360EE+=20}}if(!window.chrome.webstore){details._360SE+=20;details._360EE+=20}else{if(Object.keys(window.chrome.webstore).length<=1){details._360SE+=7}else{if(Object.keys(window.chrome.webstore).length==2){details._360SE+=4;details.Chromium+=3}}}if(window.navigator.plugins.length>=30){details._360EE+=7;details._360SE+=7;details.Chrome+=7}else{if(window.navigator.plugins.length<30&&window.navigator.plugins.length>10){details._360EE+=3;details._360SE+=3;details.Chrome+=3}else{if(window.navigator.plugins.length<=10){details.Chromium+=6}}}}else{details._360SE-=50;details._360EE-=50;if(/Linux/i.test(window.navigator.userAgent)){details.Chromium+=5}}var found=0;var respdf=undefined;for(var i in window.navigator.plugins){if(!!(respdf=/^(.+) PDF Viewer$/.exec(window.navigator.plugins[i].name))){if(respdf[1]=="Chrome"){details.Chrome+=6;details._360SE+=6;found=1;break}if(respdf[1]=="Chromium"){details.Chromium+=10;details._360EE+=6;found=1;break}}}if(!found){details.Chromium+=9}}var chrome_result=new Object();chrome_result["Chrome"]=details.Chrome;chrome_result["Chromium"]=details.Chromium;chrome_result["360SE"]=details._360SE;chrome_result["360EE"]=details._360EE;var sortable=[];for(var value in chrome_result){sortable.push([value,chrome_result[value]])}sortable.sort(function(a,b){return b[1]-a[1]});this.sorted=sortable;this.details=details;this.result=sortable[0][0]}};var checkChromeWeight=function checkChromeWeight(){var _ua=window.navigator.userAgent;try{chrome_weight.exec();if(/Chrome\/([\d.])+\sSafari\/([\d.])+$/.test(_ua)){return chrome_weight.result}else{}}catch(e){console.warn(e);return}};var ENGINE=[["edgehtml",/edge\/([0-9.]+)/],["trident",re_msie],["blink",function(){return"chrome" in win&&"CSS" in win&&/\bapplewebkit[\/]?([0-9.+]+)/}],["webkit",/\bapplewebkit[\/]?([0-9.+]+)/],["gecko",function(ua){var match;if((match=ua.match(/\brv:([\d\w.]+).*\bgecko\/(\d+)/))){return{version:match[1]+"."+match[2]}}}],["presto",/\bpresto\/([0-9.]+)/],["androidwebkit",/\bandroidwebkit\/([0-9.]+)/],["coolpadwebkit",/\bcoolpadwebkit\/([0-9.]+)/]];var BROWSER=[["headlesschrome",/headlesschrome\/([0-9.]+)/],["baiduspider-render",/baiduspider-render\/([0-9.]+)/],["huaweibrowser",/huaweibrowser\/([0-9.]+)/],["samsungbrowser",/samsungbrowser\/([0-9.]+)/],["oppobrowser",/oppobrowser\/([0-9.]+)/],["vivoBrowser",/vivobrowser\/([0-9.]+)/],["samsungbrowser",/samsungbrowser\/([0-9.]+)/],["googlebot",/googlebot\/([0-9.]+)/],["baiduboxapp",/baiduboxapp\/([0-9.]+)/],["heytapbrowser",/heytapbrowser\/([0-9.]+)/],["dingtalk",/dingtalk\/([0-9.]+)/],["quark",/quark\/([0-9.]+)/],["mobilelenovobrowser",/mobilelenovobrowser\/([0-9.]+)/],["edge",/edge?\/([0-9.]+)/],["sogou",function(ua){if(ua.indexOf("sogoumobilebrowser")>=0){return/sogoumobilebrowser\/([0-9.]+)/}else{if(ua.indexOf("sogoumse")>=0){return true}}return/ se ([0-9.x]+)/}],["theworld",function(){var x=checkTW360External("theworld");if(typeof x!=="undefined"){return x}return"theworld"}],["360",function(ua){var x=checkTW360External("360se");if(typeof x!=="undefined"){return x}if(ua.indexOf("360 aphone browser")!==-1){return/\b360 aphone browser \(([^\)]+)\)/}return/\b360(?:se|ee|chrome|browser)\b/}],["maxthon",function(){try{if(external&&(external.mxVersion||external.max_version)){return{version:external.mxVersion||external.max_version}}}catch(ex){}return/\b(?:maxthon|mxbrowser)(?:[ \/]([0-9.]+))?/}],["qq",/\bm?qqbrowser\/([0-9.]+)/],["green","greenbrowser"],["tt",/\btencenttraveler ([0-9.]+)/],["liebao",function(ua){if(ua.indexOf("liebaofast")>=0){return/\bliebaofast\/([0-9.]+)/}if(ua.indexOf("lbbrowser")===-1){return false}var version;try{if(external&&external.LiebaoGetVersion){version=external.LiebaoGetVersion()}}catch(ex){}return{version:version||NA_VERSION}}],["tao",/\btaobrowser\/([0-9.]+)/],["coolnovo",/\bcoolnovo\/([0-9.]+)/],["saayaa","saayaa"],["baidu",/\b(?:ba?idubrowser|baiduhd)[ \/]([0-9.x]+)/],["ie",re_msie],["mi",/\bmiuibrowser\/([0-9.]+)/],["opera",function(ua){var re_opera_old=/\bopera.+version\/([0-9.ab]+)/;var re_opera_new=/\bopr\/([0-9.]+)/;return re_opera_old.test(ua)?re_opera_old:re_opera_new}],["oupeng",/\boupeng\/([0-9.]+)/],["yandex",/yabrowser\/([0-9.]+)/],["uc",function(ua){if(ua.indexOf("ucbrowser/")>=0){return/\bucbrowser\/([0-9.]+)/}else{if(ua.indexOf("ubrowser/")>=0){return/\bubrowser\/([0-9.]+)/}else{if(/\buc\/[0-9]/.test(ua)){return/\buc\/([0-9.]+)/
}else{if(ua.indexOf("ucweb")>=0){return/\bucweb([0-9.]+)?/}else{return/\b(?:ucbrowser|uc)\b/}}}}}],["micromessenger",/\bmicromessenger\/([\d.]+)/],["chrome",/ (?:chrome|crios|crmo)\/([0-9.]+)/],["android",function(ua){if(ua.indexOf("android")===-1){return}return/\bversion\/([0-9.]+(?: beta)?)/}],["blackberry",function(ua){var m=ua.match(re_blackberry_10)||ua.match(re_blackberry_6_7)||ua.match(re_blackberry_4_5);return m?{version:m[1]}:"blackberry"}],["safari",/\bversion\/([0-9.]+(?: beta)?)(?: mobile(?:\/[a-z0-9]+)?)? safari\//],["webview",/\bcpu(?: iphone)? os (?:[0-9._]+).+\bapplewebkit\b/],["firefox",/\bfirefox\/([0-9.ab]+)/],["nokia",/\bnokiabrowser\/([0-9.]+)/]];function detect(name,expression,ua){var expr=isFunction(expression)?expression.call(null,ua):expression;if(!expr){return null}var info={name:name,version:NA_VERSION,codename:""};var t=toString(expr);if(expr===true){return info}else{if(t==="[object String]"){if(ua.indexOf(expr)!==-1){return info}}else{if(isObject(expr)){if(expr.hasOwnProperty("version")){info.version=expr.version}return info}else{if(expr.exec){var m=expr.exec(ua);if(m){if(m.length>=2&&m[1]){info.version=m[1].replace(/_/g,".")}else{info.version=NA_VERSION}return info}}}}}}var na={name:"na",version:NA_VERSION};function init(ua,patterns,factory,detector){var detected=na;each(patterns,function(pattern){var d=detect(pattern[0],pattern[1],ua);if(d){detected=d;return false}});factory.call(detector,detected.name,detected.version)}var parse=function(ua){ua=(ua||"").toLowerCase();var d={};init(ua,DEVICES,function(name,version){var v=parseFloat(version);d.device={name:name,version:v,fullVersion:version};d.device[name]=v},d);init(ua,OS,function(name,version){var v=parseFloat(version);d.os={name:name,version:v,fullVersion:version};d.os[name]=v},d);var ieCore=IEMode(ua);init(ua,ENGINE,function(name,version){var mode=version;if(ieCore){version=ieCore.engineVersion||ieCore.engineMode;mode=ieCore.engineMode}var v=parseFloat(version);d.engine={name:name,version:v,fullVersion:version,mode:parseFloat(mode),fullMode:mode,compatible:ieCore?ieCore.compatible:false};d.engine[name]=v},d);init(ua,BROWSER,function(name,version){var mode=version;if(ieCore){if(name==="ie"){version=ieCore.browserVersion}mode=ieCore.browserMode}var v=parseFloat(version);if(name==="chrome"&&v<=MAX_360_CHROME_VERSION){name=checkChromeWeight()||name}d.browser={name:name,version:v,fullVersion:version,mode:parseFloat(mode),fullMode:mode,compatible:ieCore?ieCore.compatible:false};d.browser[name]=v},d);return d};var userAgent=navigator.userAgent||"";var appVersion=navigator.appVersion||"";var vendor=navigator.vendor||"";external=win.external;detector=parse(userAgent+" "+appVersion+" "+vendor);detector.parse=parse;return detector})();var schema=window.location.protocol==="https:"?"https":"http";var pageTimeOut=window.performanceInfo.pageTimeOut||5000;var apiTimeOut=window.performanceInfo.apiTimeOut||2000;var network=0;var resourceStatus=!!(window.performance.getEntriesByType&&window.performance.getEntriesByType("resource") instanceof Array);var sendQueue=[];var recordErrorTimes={};var consoleStatus="";var sdkVersion="v1.7.6";try{consoleStatus=window.localStorage.getItem("performance_report")}catch(e){}function setPageview(){var pathname="";var pageview="";if(window.location.host.indexOf("huya.com")==-1){return""}pathname=window.location.pathname.substring(window.location.pathname.length-1)=="/"?(window.location.pathname+"index"):window.location.pathname;pageview=(window.location.host+pathname).replace(".html","");return pageview}function generateUUID(){var d=new Date().getTime();var uuid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=(d+Math.random()*16)%16|0;d=Math.floor(d/16);return(c=="x"?r:(r&7|8)).toString(16)});return uuid}function getCookieVal(cookieName){var arrstr=document.cookie.split("; ");for(var i=0;i<arrstr.length;i=i+1){var kv=arrstr[i].split("=");if(kv[0]==cookieName){return decodeURIComponent(kv[1])}}return""}function findResource(fileName){var item="";if(resourceStatus){var resource=window.performance.getEntriesByType("resource");for(var i=0;i<resource.length;i++){if(resource[i].name&&resource[i].name.indexOf(fileName)>-1){item=resource[i];break}}}return item}function sdkLoadStatus(){var time=+new Date()-window.performanceInfo.whiteScreenTime;var item=findResource("performance_report-min.js");if(item){time="sdkAnalysis="+(time-item.duration).toFixed(2)+"||sdkDuration="+item.duration.toFixed(2)+"||sdkVersion="+sdkVersion}window.console&&console.log(time);return time}function getPlatform(){var u=navigator.userAgent;var device="web";if(u.indexOf("Android")>-1||u.indexOf("Adr")>-1){device="android";return device}if(!!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)){device="ios";return device}return device}function getPerformanceDate(){var timing=performance.timing;var timeObj={dns:timing.domainLookupEnd-timing.domainLookupStart,tcp:timing.connectEnd-timing.connectStart,ttfb:timing.responseStart-timing.requestStart,trans:timing.responseEnd-timing.responseStart,dom:timing.domInteractive-timing.responseEnd,res:timing.loadEventStart-timing.domContentLoadedEventEnd,firstbyte:timing.responseStart-timing.domainLookupStart,fpt:timing.responseEnd-timing.fetchStart,tti:timing.domInteractive-timing.fetchStart,whiteScreenTime:performanceInfo.whiteScreenTime-timing.fetchStart,firstScreenTime:performanceInfo.firstScreenTime-timing.fetchStart,readyTime:timing.domContentLoadedEventEnd-timing.fetchStart,loadTime:performanceInfo.loadTime-timing.fetchStart};
if(schema==="https"&&timing.secureConnectionStart>0){timeObj.ssl=timing.connectEnd-timing.secureConnectionStart}return timeObj}var sdkLoadTime=sdkLoadStatus();var yyuid=getCookieVal("yyuid")||0;var gid=generateUUID();var platform=getPlatform();var pageUrl=setPageview();window.performanceInfo.pageview=window.performanceInfo.pageview||setPageview();window.performanceInfo.pageGid=gid||0;var server="//metric.huya.com/?";function toXCodeArray(str){var x=[];for(var i=0;i<str.length;i++){var c=str.charCodeAt(i);if(c<128){x.push(c)}else{if(c<2048){x.push(192|(c>>6),128|(c&63))}else{if(c<55296||c>=57344){x.push(224|(c>>12),128|((c>>6)&63),128|(c&63))}else{i++;c=65536+(((c&1023)<<10)|(str.charCodeAt(i)&1023));x.push(240|(c>>18),128|((c>>12)&63),128|((c>>6)&63),128|(c&63))}}}}return x}function xEncode(data,key){var r="";var t="";var o="";var i=0;var m=0;var mm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var c1,c2,c3,e1,e2,e3,e4;dArray=toXCodeArray(data);for(i=dArray.length-1,j=0;i>=0;i--){t=dArray[i]^key.charCodeAt(j)^m;r=r+String.fromCharCode(t);j=(++j)%key.length;m=t}i=0;while(i<r.length){c1=r.charCodeAt(i++);c2=r.charCodeAt(i++);c3=r.charCodeAt(i++);e1=c1>>2;e2=((c1&3)<<4)|(c2>>4);e3=((c2&15)<<2)|(c3>>6);e4=c3&63;if(isNaN(c2)){e3=e4=64}else{if(isNaN(c3)){e4=64}}o=o+mm.charAt(e1)+mm.charAt(e2)+mm.charAt(e3)+mm.charAt(e4)}return o}var feedback=(function(){var customModule=null;var CACHE=[];return function(oReport){if(!window.HUYA_FEEDBACKER){CACHE.push(oReport);return false}if(!customModule){customModule=window.HUYA_FEEDBACKER.setFbModule("performance",200)}if(CACHE.length>0){for(var i=0;i<CACHE.length;i++){customModule["$$feedbackLimitModule"].push(oReport)}CACHE.length=0}customModule["$$feedbackLimitModule"].push(oReport)}})();var sendReportData=function(m,timestamp,pageview){if(window.performanceInfo.lockReport==true){return false}var oAjax=null;var pageview=pageview||window.performanceInfo.pageview;var oReport={"ua":platform+"&"+pageview,"uid":yyuid||0,"sguid":gid,"m":m.splice(m,m.length)};if(window.XDomainRequest){oAjax=new XDomainRequest()}else{oAjax=window.XMLHttpRequest?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP")}consoleStatus&&window.console&&console.log(oReport);window.HUYASdk&&HUYASdk.log(pageview+":"+JSON.stringify(oReport));var dataPost=JSON.stringify(oReport);var postData=xEncode(dataPost,timestamp+"");var url=server+"ts="+timestamp;feedback(dataPost);oAjax.open("POST",url,true);oAjax.send(postData);return oAjax};var throttle=function(fn,delay,mustRunDelay){var timer=null;var t_start;return function(){var context=this,args=arguments,t_curr=+new Date();clearTimeout(timer);if(!t_start){t_start=t_curr}if(t_curr-t_start>=mustRunDelay){fn.apply(context,args);t_start=t_curr}else{timer=setTimeout(function(){fn.apply(context,args);t_start=+new Date()},delay)}}};var throttleSendReportData=throttle(sendReportData,500,1000);var reportCustom=function(m,timestamp,immediately,pageview){if(immediately){return sendReportData(m,timestamp,pageview)}else{sendQueue.push(m[0]);throttleSendReportData(sendQueue,timestamp,pageview)}};(function(){function reportPv(){var timestamp=+new Date();var m=[{"name":"fed.page.pv","its":timestamp,"dim":{"schema":schema,"subpageview":window.performanceInfo.subPageview||"","pageurl":pageUrl,"sdkVersion":sdkVersion,"device":detector.device.name,"deviceversion":detector.device.version+"","os":detector.os.name,"osversion":detector.os.version+"","browser":detector.browser.name,"browserversion":detector.browser.version+"","engine":detector.engine.name,"engineversion":detector.engine.version+"","screen":window.screen.width+"x"+window.screen.height,"extdesc":navigator.userAgent+"||sendTime="+(timestamp-window.performanceInfo.whiteScreenTime)},"field":{},"exlog":{"extdesc":navigator.userAgent+"||sendTime="+(timestamp-window.performanceInfo.whiteScreenTime)}}];var xhr=reportCustom(m,timestamp,true);if(xhr){var startTime=Date.now();xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status==200){network=(Date.now()-startTime)}else{network=-1}}}}}reportPv();function reportLoadStatus(){var timestamp=+new Date();var suc="1";if(!window.performanceInfo.firstScreenTime){suc="0"}var m=[{"name":"fed.page.loadStatus","its":timestamp,"dim":{"schema":schema,"sdkVersion":sdkVersion,"subpageview":window.performanceInfo.subPageview||"","pageurl":pageUrl,"success":suc,"device":detector.device.name,"deviceversion":detector.device.version+"","os":detector.os.name,"osversion":detector.os.version+"","browser":detector.browser.name,"browserversion":detector.browser.version+"","engine":detector.engine.name,"engineversion":detector.engine.version+"","screen":window.screen.width+"x"+window.screen.height,"extdesc":navigator.userAgent+"||sendTime="+(timestamp-window.performanceInfo.whiteScreenTime)},"field":{},"exlog":{"extdesc":navigator.userAgent+"||sendTime="+(timestamp-window.performanceInfo.whiteScreenTime)}}];if(!window.performanceInfo.firstScreenTime){m[0].exlog.extdesc+="||PerformanceDate="+JSON.stringify(getPerformanceDate())+"||network="+network;
m[0].dim.extdesc+="||PerformanceDate="+JSON.stringify(getPerformanceDate())+"||network="+network}reportCustom(m,timestamp)}if(window.performanceInfo.firstScreenTime){reportLoadStatus()}else{setTimeout(function(){reportLoadStatus()},pageTimeOut)}})();(function(){function timerParam(obj,timestamp){var p=[{"name":"fed.page.performance","its":timestamp,"dim":{"schema":schema,"sdkVersion":sdkVersion,"device":detector.device.name,"subpageview":window.performanceInfo.subPageview||"","pageurl":pageUrl,"deviceversion":detector.device.version+"","os":detector.os.name,"osversion":detector.os.version+"","browser":detector.browser.name,"browserversion":detector.browser.version+"","engine":detector.engine.name,"engineversion":detector.engine.version+"","screen":window.screen.width+"x"+window.screen.height,"extdesc":""},"field":{},"exlog":{"extdesc":""}}];function recordRequest(p,key,value){var entries=[];if((key=="firstScreenTime"||key=="loadTime")&&value>pageTimeOut&&resourceStatus&&p[0]["exlog"]["extdesc"]==""){var getResourceLowValues=function(arr,num){var newArr=[];arr=arr.sort(function(a,b){return b.duration-a.duration});for(var i=0,len=arr.length;i<len;i++){var item=arr[i];newArr.push({conEnd:item.connectEnd.toFixed(2),conStart:item.connectStart.toFixed(2),deSize:item.decodedBodySize,doEnd:item.domainLookupEnd.toFixed(2),doStart:item.domainLookupStart.toFixed(2),dur:item.duration.toFixed(2),enSize:item.encodedBodySize,fetStart:item.fetchStart.toFixed(2),reqStart:item.requestStart.toFixed(2),respEnd:item.responseEnd.toFixed(2),respStart:item.responseStart.toFixed(2),transSize:item.transferSize,name:item.name.slice(0,115)});if(newArr.length>=num){break}}return newArr};entries=getResourceLowValues(window.performance.getEntriesByType("resource"),3);p[0]["exlog"]["extdesc"]=JSON.stringify(entries);p[0]["dim"]["extdesc"]=JSON.stringify(entries)}}for(var k in obj){p[0]["field"][k]=obj[k];recordRequest(p,k,obj[k])}return p}function send(data){var timestamp=+new Date();var m=timerParam(data,timestamp);reportCustom(m,timestamp)}var timeNum=0;function performanceReport(){if(timeNum>=50){return false}if(!window.performanceInfo.firstScreenTime){timeNum++;setTimeout(function(){performanceReport()},200);return false}var reportObj=getPerformanceDate();var sendStatus=true;for(var key in reportObj){if(reportObj[key]<0){sendStatus=false;break}}sendStatus&&send(reportObj)}var onLoad=function(){window.removeEventListener("load",onLoad);window.performanceInfo.loadTime=+new Date();performanceReport()};if(performance.timing.loadEventEnd!=0){onLoad()}else{window.addEventListener("load",onLoad)}})();(function(){var apiTimeObj={};var report=function(apiName,times,msg,beforeTime,traceObj){var apiNameItem=apiTimeObj[apiName]||apiTimeObj[(apiName+beforeTime)];if(apiNameItem){apiNameItem.outTimer&&clearTimeout(apiNameItem.outTimer);var timer=times-apiNameItem.startTime;var timestamp=+new Date();var m=[{"name":"fed.page.index","its":timestamp,"dim":{"schema":schema,"path":apiName,"subpageview":window.performanceInfo.subPageview||"","pageurl":pageUrl,"sdkVersion":sdkVersion,"device":detector.device.name,"deviceversion":detector.device.version+"","os":detector.os.name,"osversion":detector.os.version+"","browser":detector.browser.name,"browserversion":detector.browser.version+"","engine":detector.engine.name,"engineversion":detector.engine.version+"","screen":window.screen.width+"x"+window.screen.height,"success":timer>=apiTimeOut?"0":"1","extdesc":(apiNameItem.msg||msg)&&(apiNameItem.msg+"||"+msg+"||")},"field":{"value":timer},"exlog":{"extdesc":(apiNameItem.msg||msg)&&(apiNameItem.msg+"||"+msg+"||")}}];m[0].exlog.extdesc+="network="+network+"||"+sdkLoadTime+"||href="+window.location.href+"||sendTime="+(timestamp-window.performanceInfo.whiteScreenTime);m[0].dim.extdesc+="network="+network+"||"+sdkLoadTime+"||href="+window.location.href+"||sendTime="+(timestamp-window.performanceInfo.whiteScreenTime);if(traceObj){var traceM=[{"name":"hymtp.hyns.monitor.client","its":timestamp,"dim":{},"field":{"start_time":apiNameItem.startTime,"response_time":timer,"value":timer},"exlog":{"extdesc":""}}];for(var key in apiNameItem.traceObj){traceM[0]["dim"][key]=apiNameItem.traceObj[key]}for(var key in traceObj){traceM[0]["dim"][key]=traceObj[key]}}if(network<700){if(timer>=apiTimeOut){recordErrorTimes[apiName]=recordErrorTimes[apiName]?(recordErrorTimes[apiName]+1):1}if(!recordErrorTimes[apiName]||recordErrorTimes[apiName]<3){reportCustom(m,timestamp);traceObj&&reportCustom(traceM,timestamp)}}apiTimeObj[apiName]&&delete apiTimeObj[apiName];apiTimeObj[apiName+beforeTime]&&delete apiTimeObj[apiName+beforeTime]}};var reportApiTime=function(apiName,status,times,msg,beforeTime,traceObj){if(status=="start"){var onlyKey=!beforeTime?apiName:(apiName+beforeTime);if(apiTimeObj[onlyKey]){apiTimeObj[onlyKey].outTimer&&clearTimeout(apiTimeObj[onlyKey].outTimer);delete apiTimeObj[onlyKey]}apiTimeObj[onlyKey]={startTime:times,outTimer:null,traceObj:traceObj,msg:msg||""};apiTimeObj[onlyKey].outTimer=setTimeout(function(){report(apiName,+new Date(),"timeout",beforeTime,{retcode:"-1",success:"1"})
},apiTimeOut)}if(status=="end"){report(apiName,times,msg,beforeTime,traceObj)}};var reportApiMess=function(apiName,msg,code,immediately){var timestamp=+new Date();var m=[{"name":"fed.page.indexMess","its":timestamp,"dim":{"schema":schema,"path":apiName,"subpageview":window.performanceInfo.subPageview||"","pageurl":pageUrl,"sdkVersion":sdkVersion,"device":detector.device.name,"deviceversion":detector.device.version+"","os":detector.os.name,"osversion":detector.os.version+"","browser":detector.browser.name,"browserversion":detector.browser.version+"","engine":detector.engine.name,"engineversion":detector.engine.version+"","screen":window.screen.width+"x"+window.screen.height,"retcode":code?(""+code):"1","extdesc":msg},"field":{},"exlog":{"extdesc":msg}}];reportCustom(m,timestamp,immediately)};var reportCustomData=function(oParms){var timestamp=+new Date();var m=[];for(var i=0;i<oParms.m.length;i++){var reportItem={"name":"fed.page.index","its":timestamp,"dim":{"schema":oParms.schema||schema,"path":oParms.m[i].path,"subpageview":window.performanceInfo.subPageview||"","pageurl":pageUrl,"sdkVersion":sdkVersion,"device":detector.device.name,"deviceversion":detector.device.version+"","os":detector.os.name,"osversion":detector.os.version+"","browser":detector.browser.name,"browserversion":detector.browser.version+"","engine":detector.engine.name,"engineversion":detector.engine.version+"","screen":window.screen.width+"x"+window.screen.height,"extdesc":"sendTime="+(timestamp-window.performanceInfo.whiteScreenTime),"success":"1"},"field":{"value":oParms.m[i].value},"exlog":{"extdesc":"sendTime="+(timestamp-window.performanceInfo.whiteScreenTime)}};if(oParms.line){reportItem.dim.line=oParms.line}if(oParms.effectiveType){reportItem.dim.effectiveType=oParms.effectiveType}m.push(reportItem)}reportCustom(m,timestamp,true,oParms.pageview)};function reportFirstScreenTime(){if(!window.performanceInfo.firstScreenTime){window.performanceInfo.firstScreenTime=+new Date()}}var reportApiPerformance=function(apiName){var item=findResource(apiName);if(!item){return false}var timestamp=+new Date();var m=[{"name":"fed.page.indexPerformance","its":timestamp,"dim":{"schema":schema,"sdkVersion":sdkVersion,"subpageview":window.performanceInfo.subPageview||"","pageurl":pageUrl,"path":apiName,"extdesc":"sendTime="+(timestamp-window.performanceInfo.whiteScreenTime)+"||network="+network+"||"+sdkLoadTime+"||href="+window.location.href},"field":{"redirect":item.redirectEnd-item.redirectStart,"appcache":Math.max(item.domainLookupStart-item.fetchStart,0),"dns":item.domainLookupEnd-item.domainLookupStart,"conn":item.connectEnd-item.connectStart,"request":item.responseStart-item.requestStart,"response":item.responseEnd-item.responseStart,"duration":item.duration},"exlog":{"extdesc":"sendTime="+(timestamp-window.performanceInfo.whiteScreenTime)+"||network="+network+"||"+sdkLoadTime+"||href="+window.location.href}}];if(schema==="https"&&item.secureConnectionStart>0){m[0].field.ssl=item.connectEnd-item.secureConnectionStart}m[0].exlog.extdesc+="||field="+JSON.stringify(m[0].field);m[0].dim.extdesc+="||field="+JSON.stringify(m[0].field);reportCustom(m,timestamp)};var reporCustomIndex=function(obj){var timestamp=+new Date();var reportObj={"name":obj.name,"its":timestamp,"dim":{"schema":schema,"subpageview":window.performanceInfo.subPageview||"","pageurl":pageUrl,"sdkVersion":sdkVersion,"device":detector.device.name,"deviceversion":detector.device.version+"","os":detector.os.name,"osversion":detector.os.version+"","browser":detector.browser.name,"browserversion":detector.browser.version+"","engine":detector.engine.name,"engineversion":detector.engine.version+"","screen":window.screen.width+"x"+window.screen.height,"extdesc":"sendTime="+(timestamp-window.performanceInfo.whiteScreenTime),},"field":{"value":0},"exlog":{"extdesc":obj.extdesc}};if(obj.field){reportObj.field=obj.field}if(obj.dim){for(var key in obj.dim){reportObj.dim[key]=obj.dim[key]}}var m=[reportObj];reportCustom(m,timestamp)};var resourceError=function(obj){var timestamp=+new Date();var reportObj={"name":"fed.page.resourceerror","its":timestamp,"dim":{"schema":schema,"sdkVersion":sdkVersion,"subpageview":window.performanceInfo.subPageview||"","pageurl":pageUrl,"device":detector.device.name,"deviceversion":detector.device.version+"","os":detector.os.name,"osversion":detector.os.version+"","browser":detector.browser.name,"browserversion":detector.browser.version+"","engine":detector.engine.name,"engineversion":detector.engine.version+"","screen":window.screen.width+"x"+window.screen.height,"extdesc":window.location.href},"field":{},"exlog":{"extdesc":""}};if(obj.dim&&obj.dim.path){reportObj.dim.path=obj.dim.path}var m=[reportObj];reportCustom(m,timestamp)};var handle={reportApiTime:reportApiTime,reportApiMess:reportApiMess,reportApiPerformance:reportApiPerformance,reportCustomData:reportCustomData,reportFirstScreenTime:reportFirstScreenTime,reporCustomIndex:reporCustomIndex,resourceError:resourceError};
function distribute(arr){var fnName=arr.splice(0,1);handle[fnName]&&handle[fnName].apply(this,arr)}function resetReport(){var _hmt=window.performanceInfo._hmt||[];if(_hmt.length){for(var i=0;i<_hmt.length;i++){distribute(_hmt[i])}}window.performanceInfo._hmt=[];window.performanceInfo._hmt.push=function(arr){distribute(arr)}}resetReport()})();(function(){if(platform=="web"&&detector.browser.name!="ie"){var element=new Image();var lockLoop=false;var loop=setInterval(function(){if(lockLoop==false){lockLoop=true;try{console.debug(element)}catch(e){console.log(element)}}},1000);Object.defineProperty(element,"id",{get:function(){clearInterval(loop);performanceInfo._hmt.push(["reportApiMess","openConsole",navigator.userAgent,1])}});var re=/x/;var i=0;try{console.debug(re)}catch(e){console.log(re)}re.toString=function(){i++;performanceInfo._hmt.push(["reportApiMess","openConsole",navigator.userAgent+"||openNum="+i,1]);return i};if(window.PluginArray){if(!(navigator.plugins instanceof PluginArray)||navigator.plugins.length==0){performanceInfo._hmt.push(["reportApiMess","spider",navigator.userAgent,1])}}}})();window.addEventListener("error",function(err){var ERR_TYPE={"SCRIPT":2,"LINK":3,"IMG":4};if(err.target!==window){var errNode=err.target.nodeName;if(errNode&&ERR_TYPE[errNode.toUpperCase()]){var url=err.target.src||err.target.href;if(errNode.toUpperCase()==="IMG"&&!/.(png|jpg|jpeg|gif|webp)$/g.test(url)){return false}performanceInfo._hmt.push(["resourceError",{"dim":{"path":url}}])}}},true)})();