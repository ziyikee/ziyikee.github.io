(window.HUYA_MAIN_APP_WEBPACK_JSONP=window.HUYA_MAIN_APP_WEBPACK_JSONP||[]).push([[372],{314:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o}));var r={TARGET_POST:"TARGET_POST",TARGET_COMMENT:"TARGET_COMMENT"},o={SHOW_DETAIL:"notice:showDetail",UPDATE_NEW_DETAIL:"update:newDetail",NOTICE_IS_REPLING:"notice:isRepling",NOTICE_REPLY_SUCCESS:"notice:replySuccess",NOTICE_UPLOAD_IMAGE:"notice:uploadImage"}},364:function(t,e,n){"use strict";var r=n(19),o=n.n(r),i=n(315),c=n(314),u=n(312),f=n(343),a=(n(317),n(158));function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h(t);if(e){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(l,t);var e,n,r,o=d(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=o.call(this,t)).type=c.b.TARGET_POST,e.replyTarget={},e}return e=l,(n=[{key:"setReplyTarget",value:function(t,e){this.type=e,this.replyTarget=t}},{key:"send",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(r,o){var l=Object(f.b)(t);if(""==l)o();else{var p={},y=e.replyTarget,b=y.data;p=e.type==c.b.TARGET_COMMENT?{momId:b.momId,parentId:b.comId||b.momId,replyToUid:b.uid,replyToComId:b.comId,content:l,belongPlate:i.a.sectionId,attach:n}:{momId:b.momId,parentId:b.momId,content:l,belongPlate:i.a.sectionId,attach:n},TT.log("sendReply",p),Object(u.j)(s({uid:HUYA_UTIL.getCookieVal("udb_uid")},p)).then((function(t){var o=t.comment;e.type==c.b.TARGET_COMMENT&&(o=s(s({},o),{replyToComId:b.comId,replyToUid:b.uid,replyToNickName:b.nickName})),o.commentAttach=n?[{content:n}]:[],y.replySuccess(o,e.type),e.emit(c.a.NOTICE_REPLY_SUCCESS),r()})).catch((function(t){"SafeAuthError"!==t.name&&Object(a.errorDialog)(t.message)}))}}))}},{key:"addImage",value:function(t){var e=this;Object(u.n)(t).then((function(t){e.emit(c.a.NOTICE_UPLOAD_IMAGE,t)}))}},{key:"reply",value:function(t,e){var n=this;TT.getUserInfo().done((function(r){r.uid?(n.setReplyTarget(t,e),n.emit(c.a.NOTICE_IS_REPLING)):TT.login.login()}))}}])&&b(e.prototype,n),r&&b(e,r),l}(o.a);e.a=new v},457:function(t,e,n){"use strict";var r=n(19),o=n.n(r),i=n(314),c=n(312),u=n(362),f=n(1432),a=n(367);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=m(t);if(e){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(l,t);var e,n,r,o=y(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=o.call(this,t)).data=null,e.likeStore=null,e.commentListStore=null,e.replyTarget=null,e.initialize(t.mid),e}return e=l,(n=[{key:"initialize",value:function(t){var e=this;t&&0!=t&&TT.getUserInfo().done((function(n){Object(c.e)({uid:n.uid,momId:t}).then((function(t){var n=t.moment,r=t.vote;e.data=n,e.vote=a.a.createVote(r),e.likeStore=u.a.createFavor({momId:n.momId,opt:n.opt,likeAmount:n.favorCount,unlikeAmount:n.iStepOnCount}),e.commentListStore=new f.a({momId:n.momId}),e.emit(i.a.UPDATE_NEW_DETAIL)}))}))}},{key:"replySuccess",value:function(t){this.commentListStore.appendNewTarget(t)}}])&&p(e.prototype,n),r&&p(e,r),l}(o.a);function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function T(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=E(t);if(e){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _(this,n)}}function _(t,e){if(e&&("object"===O(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(c,t);var e,n,r,o=T(c);function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=o.call(this,t)).detail=null,e}return e=c,(n=[{key:"update",value:function(t){var e=t.mid;e&&(this.detail=new d({mid:e}),this.emit(i.a.SHOW_DETAIL))}}])&&h(e.prototype,n),r&&h(e,r),c}(o.a);e.a=new w}}]);