(window.HUYA_MAIN_APP_WEBPACK_JSONP=window.HUYA_MAIN_APP_WEBPACK_JSONP||[]).push([[502],{1450:function(e,o,n){"use strict";n.r(o);var t=n(24),i=n(32),a=window.localStorage.getItem("LOGOUT_TO_LOGIN");function d(e){var o=null,n=document.createElement("iframe");function a(){var o=document.getElementById("uploadInformation"),n={code:"uploadInformationInit",data:{isNew:window.localStorage.getItem("HUYA_NEW_USER"),uid:e.uid,nick:e.userNick,img:e.userLogo}};o.contentWindow.postMessage(JSON.stringify(n),"*"),window.localStorage.removeItem("HUYA_NEW_USER")}n.id="uploadInformation",n.style.border="none",n.src="https://hd.huya.com/web/uploadInformation/index.html",n.attachEvent?n.attachEvent("onload",a):n.onload=a,o=new t.default.layer({view:n,width:"520px",height:"368px"}),i.default.off("closeInformationUpload").on("closeInformationUpload",(function(e){o.close(),e.isEdit&&window.location.reload()}))}TT.getUserInfo().done((function(e){var o;(e.isLogined?window.localStorage.removeItem("LOGOUT_TO_LOGIN"):window.localStorage.setItem("LOGOUT_TO_LOGIN","1"),a&&e.isLogined)&&(o=e.uid,new $.Deferred((function(e){$.ajax({url:"//liveapi.huya.com/user/IsNeedSetInitializeNick",type:"GET",dataType:"json",data:{uid:o},cache:!1,xhrFields:{withCredentials:!0},__forceTrace:!0}).done((function(o){200==o.status&&o.data.isNeed?e.resolve():e.reject()})).fail((function(){e.reject()}))})).promise()).done((function(){d(e)}))})),TT.event.on("createUploadInformation",(function(){TT.getUserInfo((function(e){d(e)}))}))}}]);