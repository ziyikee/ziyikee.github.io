/*! @huya-sentry/browser 5.5.25 (df6514a1) | https://git.huya.com/base-front/sentry-javascript-sdk */
var Sentry=function(exports){var extendStatics=function(t,n){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,n)};function __extends(t,n){function r(){this.constructor=t}extendStatics(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var __assign=function(){return(__assign=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)},LogLevel,Severity,Status;function __read(t,n){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var e,i,o=r.call(t),u=[];try{for(;(void 0===n||n-- >0)&&!(e=o.next()).done;)u.push(e.value)}catch(t){i={error:t}}finally{try{e&&!e.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return u}function __spread(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(__read(arguments[n]));return t}!function(t){t[t.None=0]="None",t[t.Error=1]="Error",t[t.Debug=2]="Debug",t[t.Verbose=3]="Verbose"}(LogLevel||(LogLevel={})),Severity=exports.Severity||(exports.Severity={}),Severity.Fatal="fatal",Severity.Error="error",Severity.Warning="warning",Severity.Log="log",Severity.Info="info",Severity.Debug="debug",Severity.Critical="critical",function(t){t.fromString=function(n){switch(n){case"debug":return t.Debug;case"info":return t.Info;case"warn":case"warning":return t.Warning;case"error":return t.Error;case"fatal":return t.Fatal;case"critical":return t.Critical;case"log":default:return t.Log}}}(exports.Severity||(exports.Severity={})),Status=exports.Status||(exports.Status={}),Status.Unknown="unknown",Status.Skipped="skipped",Status.Success="success",Status.RateLimit="rate_limit",Status.Invalid="invalid",Status.Failed="failed",function(t){t.fromHttpCode=function(n){return n>=200&&n<300?t.Success:429===n?t.RateLimit:n>=400&&n<500?t.Invalid:n>=500?t.Failed:t.Unknown}}(exports.Status||(exports.Status={}));var setPrototypeOf=Object.setPrototypeOf||({__proto__:[]}instanceof Array?setProtoOf:mixinProperties);function setProtoOf(t,n){return t.__proto__=n,t}function mixinProperties(t,n){for(var r in n)t.hasOwnProperty(r)||(t[r]=n[r]);return t}var SentryError=function(t){function n(n){var r=this.constructor,e=t.call(this,n)||this;return e.message=n,e.name=r.prototype.constructor.name,setPrototypeOf(e,r.prototype),e}return __extends(n,t),n}(Error);function isError(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return t instanceof Error}}function isErrorEvent(t){return"[object ErrorEvent]"===Object.prototype.toString.call(t)}function isDOMError(t){return"[object DOMError]"===Object.prototype.toString.call(t)}function isDOMException(t){return"[object DOMException]"===Object.prototype.toString.call(t)}function isString(t){return"[object String]"===Object.prototype.toString.call(t)}function isPrimitive(t){return null===t||"object"!=typeof t&&"function"!=typeof t}function isPlainObject(t){return"[object Object]"===Object.prototype.toString.call(t)}function isRegExp(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function isThenable(t){return Boolean(t&&t.then&&"function"==typeof t.then)}function isSyntheticEvent(t){return isPlainObject(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function dynamicRequire(t,n){return t.require(n)}function isNodeEnv(){return"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}var fallbackGlobalObject={};function getGlobalObject(){return isNodeEnv()?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:fallbackGlobalObject}function uuid4(){var t=getGlobalObject(),n=t.crypto||t.msCrypto;if(void 0!==n&&n.getRandomValues){var r=new Uint16Array(8);n.getRandomValues(r),r[3]=4095&r[3]|16384,r[4]=16383&r[4]|32768;var e=function(t){for(var n=t.toString(16);n.length<4;)n="0"+n;return n};return e(r[0])+e(r[1])+e(r[2])+e(r[3])+e(r[4])+e(r[5])+e(r[6])+e(r[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=16*Math.random()|0;return("x"===t?n:3&n|8).toString(16)})}function parseUrl(t){if(!t)return{};var n=t.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!n)return{};var r=n[6]||"",e=n[8]||"";return{host:n[4],path:n[5],protocol:n[2],relative:n[5]+r+e}}function getEventDescription(t){if(t.message)return t.message;if(t.exception&&t.exception.values&&t.exception.values[0]){var n=t.exception.values[0];return n.type&&n.value?n.type+": "+n.value:n.type||n.value||t.event_id||"<unknown>"}return t.event_id||"<unknown>"}function consoleSandbox(t){var n=getGlobalObject();if(!("console"in n))return t();var r=n.console,e={};["debug","info","warn","error","log","assert"].forEach(function(t){t in n.console&&r[t].__sentry__&&(e[t]=r[t].__sentry_wrapped__,r[t]=r[t].__sentry_original__)});var i=t();return Object.keys(e).forEach(function(t){r[t]=e[t]}),i}function addExceptionTypeValue(t,n,r,e){void 0===e&&(e={handled:!0,type:"generic"}),t.exception=t.exception||{},t.exception.values=t.exception.values||[],t.exception.values[0]=t.exception.values[0]||{},t.exception.values[0].value=t.exception.values[0].value||n||"",t.exception.values[0].type=t.exception.values[0].type||r||"Error",t.exception.values[0].mechanism=t.exception.values[0].mechanism||e}var global$1=getGlobalObject(),PREFIX="Sentry Logger ",Logger=function(){function t(){this.t=!1}return t.prototype.disable=function(){this.t=!1},t.prototype.enable=function(){this.t=!0},t.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.t&&consoleSandbox(function(){global$1.console.log(PREFIX+"[Log]: "+t.join(" "))})},t.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.t&&consoleSandbox(function(){global$1.console.warn(PREFIX+"[Warn]: "+t.join(" "))})},t.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.t&&consoleSandbox(function(){global$1.console.error(PREFIX+"[Error]: "+t.join(" "))})},t}();global$1.__SENTRY__=global$1.__SENTRY__||{};var logger=global$1.__SENTRY__.logger||(global$1.__SENTRY__.logger=new Logger),Memo=function(){function t(){this.i="function"==typeof WeakSet,this.o=this.i?new WeakSet:[]}return t.prototype.memoize=function(t){if(this.i)return!!this.o.has(t)||(this.o.add(t),!1);for(var n=0;n<this.o.length;n++){if(this.o[n]===t)return!0}return this.o.push(t),!1},t.prototype.unmemoize=function(t){if(this.i)this.o.delete(t);else for(var n=0;n<this.o.length;n++)if(this.o[n]===t){this.o.splice(n,1);break}},t}();function fill(t,n,r){if(n in t){var e=t[n],i=r(e);if("function"==typeof i)try{i.prototype=i.prototype||{},Object.defineProperties(i,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:e},__sentry_wrapped__:{enumerable:!1,value:i}})}catch(t){}t[n]=i}}function urlEncode(t){return Object.keys(t).map(function(n){return encodeURIComponent(n)+"="+encodeURIComponent(t[n])}).join("&")}function objectifyError(t){var n={message:t.message,name:t.name,stack:t.stack};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function utf8Length(t){return~-encodeURI(t).split(/%..|./).length}function jsonSize(t){return utf8Length(JSON.stringify(t))}function normalizeToSize(t,n,r){void 0===n&&(n=3),void 0===r&&(r=102400);var e=normalize(t,n);return jsonSize(e)>r?normalizeToSize(t,n-1,r):e}function serializeValue(t){var n=Object.prototype.toString.call(t);if("string"==typeof t)return t;if("[object Object]"===n)return"[Object]";if("[object Array]"===n)return"[Array]";var r=normalizeValue(t);return isPrimitive(r)?r:n}function normalizeValue(t,n){return"domain"===n&&"object"==typeof t&&t.u?"[Domain]":"domainEmitter"===n?"[DomainEmitter]":"undefined"!=typeof global&&t===global?"[Global]":"undefined"!=typeof window&&t===window?"[Window]":"undefined"!=typeof document&&t===document?"[Document]":"undefined"!=typeof Event&&t instanceof Event?Object.getPrototypeOf(t)?t.constructor.name:"Event":isSyntheticEvent(t)?"[SyntheticEvent]":Number.isNaN(t)?"[NaN]":void 0===t?"[undefined]":"function"==typeof t?"[Function: "+(t.name||"<unknown-function-name>")+"]":t}function walk(t,n,r,e){if(void 0===r&&(r=1/0),void 0===e&&(e=new Memo),0===r)return serializeValue(n);if(null!=n&&"function"==typeof n.toJSON)return n.toJSON();var i=normalizeValue(n,t);if(isPrimitive(i))return i;var o=isError(n)?objectifyError(n):n,u=Array.isArray(n)?[]:{};if(e.memoize(n))return"[Circular ~]";for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(u[a]=walk(a,o[a],r-1,e));return e.unmemoize(n),u}function normalize(t,n){try{return JSON.parse(JSON.stringify(t,function(t,r){return walk(t,r,n)}))}catch(t){return"**non-serializable**"}}var PromiseBuffer=function(){function t(t){this.s=t,this.l=[]}return t.prototype.isReady=function(){return void 0===this.s||this.length()<this.s},t.prototype.add=function(t){var n=this;return this.isReady()?(-1===this.l.indexOf(t)&&this.l.push(t),t.then(function(){return n.remove(t)}).catch(function(){return n.remove(t).catch(function(){})}),t):Promise.reject(new SentryError("Not adding Promise due to buffer limit reached."))},t.prototype.remove=function(t){return this.l.splice(this.l.indexOf(t),1)[0]},t.prototype.length=function(){return this.l.length},t.prototype.drain=function(t){var n=this;return new Promise(function(r){var e=setTimeout(function(){t&&t>0&&r(!1)},t);Promise.all(n.l).then(function(){clearTimeout(e),r(!0)}).catch(function(){r(!0)})})},t}(),States;function truncate(t,n){return void 0===n&&(n=0),"string"!=typeof t||0===n?t:t.length<=n?t:t.substr(0,n)+"..."}function safeJoin(t,n){if(!Array.isArray(t))return"";for(var r=[],e=0;e<t.length;e++){var i=t[e];try{r.push(String(i))}catch(t){r.push("[value cannot be serialized]")}}return r.join(n)}function keysToEventMessage(t,n){if(void 0===n&&(n=40),!t.length)return"[object has no keys]";if(t[0].length>=n)return truncate(t[0],n);for(var r=t.length;r>0;r--){var e=t.slice(0,r).join(", ");if(!(e.length>n))return r===t.length?e:truncate(e,n)}return""}function isMatchingPattern(t,n){return isRegExp(n)?n.test(t):"string"==typeof n&&t.includes(n)}function supportsFetch(){if(!("fetch"in getGlobalObject()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(t){return!1}}function supportsNativeFetch(){if(!supportsFetch())return!1;var t=function(t){return-1!==t.toString().indexOf("native")},n=getGlobalObject(),r=null,e=n.document;if(e){var i=e.createElement("iframe");i.hidden=!0;try{e.head.appendChild(i),i.contentWindow&&i.contentWindow.fetch&&(r=t(i.contentWindow.fetch)),e.head.removeChild(i)}catch(t){logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}}return null===r&&(r=t(n.fetch)),r}function supportsReferrerPolicy(){if(!supportsFetch())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(t){return!1}}function supportsHistory(){var t=getGlobalObject(),n=t.chrome,r=n&&n.app&&n.app.runtime,e="history"in t&&!!t.history.pushState&&!!t.history.replaceState;return!r&&e}!function(t){t.PENDING="PENDING",t.RESOLVED="RESOLVED",t.REJECTED="REJECTED"}(States||(States={}));var SyncPromise=function(){function t(t){var n=this;this.h=States.PENDING,this.v=[],this.p=function(t){n.g(t,States.RESOLVED)},this.m=function(t){n.g(t,States.REJECTED)},this.g=function(t,r){n.h===States.PENDING&&(isThenable(t)?t.then(n.p,n.m):(n._=t,n.h=r,n.S()))},this.S=function(){n.h!==States.PENDING&&(n.h===States.REJECTED?n.v.forEach(function(t){return t.onFail&&t.onFail(n._)}):n.v.forEach(function(t){return t.onSuccess&&t.onSuccess(n._)}),n.v=[])},this.O=function(t){n.v=n.v.concat(t),n.S()};try{t(this.p,this.m)}catch(t){this.m(t)}}return t.prototype.then=function(n,r){var e=this;return new t(function(t,i){e.O({onFail:function(n){if(r)try{return void t(r(n))}catch(t){return void i(t)}else i(n)},onSuccess:function(r){if(n)try{return void t(n(r))}catch(t){return void i(t)}else t(r)}})})},t.prototype.catch=function(t){return this.then(function(t){return t},t)},t.prototype.toString=function(){return"[object SyncPromise]"},t.resolve=function(n){return new t(function(t){t(n)})},t.reject=function(n){return new t(function(t,r){r(n)})},t}(),TRACEPARENT_REGEXP=/^[ \t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \t]*$/,Span=function(){function t(t,n,r,e){void 0===t&&(t=uuid4()),void 0===n&&(n=uuid4().substring(16)),this.T=t,this.C=n,this.R=r,this.I=e}return t.prototype.setParent=function(t){return this.I=t,this},t.prototype.setSampled=function(t){return this.R=t,this},t.fromTraceparent=function(n){var r=n.match(TRACEPARENT_REGEXP);if(r){var e=void 0;"1"===r[3]?e=!0:"0"===r[3]&&(e=!1);var i=new t(r[1],r[2],e);return new t(r[1],void 0,e,i)}},t.prototype.toTraceparent=function(){var t="";return!0===this.R?t="-1":!1===this.R&&(t="-0"),this.T+"-"+this.C+t},t.prototype.toJSON=function(){return{parent:this.I&&this.I.toJSON()||void 0,sampled:this.R,span_id:this.C,trace_id:this.T}},t}(),Scope=function(){function t(){this.j=!1,this.P=[],this.N=[],this.F=[],this.U={},this.k={},this.H={},this.A={}}return t.prototype.addScopeListener=function(t){this.P.push(t)},t.prototype.addEventProcessor=function(t){return this.N.push(t),this},t.prototype.D=function(){var t=this;this.j||(this.j=!0,setTimeout(function(){t.P.forEach(function(n){n(t)}),t.j=!1}))},t.prototype.M=function(t,n,r,e){var i=this;return void 0===e&&(e=0),new SyncPromise(function(o,u){var a=t[e];if(null===n||"function"!=typeof a)o(n);else{var s=a(__assign({},n),r);isThenable(s)?s.then(function(n){return i.M(t,n,r,e+1).then(o)}).catch(u):i.M(t,s,r,e+1).then(o).catch(u)}})},t.prototype.setUser=function(t){return this.U=normalize(t),this.D(),this},t.prototype.setTags=function(t){return this.k=__assign({},this.k,normalize(t)),this.D(),this},t.prototype.setTag=function(t,n){var r;return this.k=__assign({},this.k,((r={})[t]=normalize(n),r)),this.D(),this},t.prototype.setExtras=function(t){return this.H=__assign({},this.H,normalize(t)),this.D(),this},t.prototype.setExtra=function(t,n){var r;return this.H=__assign({},this.H,((r={})[t]=normalize(n),r)),this.D(),this},t.prototype.setFingerprint=function(t){return this.$=normalize(t),this.D(),this},t.prototype.setLevel=function(t){return this.B=normalize(t),this.D(),this},t.prototype.setTransaction=function(t){return this.G=t,this.D(),this},t.prototype.setContext=function(t,n){return this.A[t]=n?normalize(n):void 0,this.D(),this},t.prototype.setSpan=function(t){return this.L=t,this.D(),this},t.prototype.startSpan=function(t){var n=new Span;return n.setParent(t),this.setSpan(n),n},t.prototype.getSpan=function(){return this.L},t.clone=function(n){var r=new t;return Object.assign(r,n,{P:[]}),n&&(r.F=__spread(n.F),r.k=__assign({},n.k),r.H=__assign({},n.H),r.A=__assign({},n.A),r.U=n.U,r.B=n.B,r.L=n.L,r.G=n.G,r.$=n.$,r.N=__spread(n.N)),r},t.prototype.clear=function(){return this.F=[],this.k={},this.H={},this.U={},this.A={},this.B=void 0,this.G=void 0,this.$=void 0,this.L=void 0,this.D(),this},t.prototype.addBreadcrumb=function(t,n){var r=(new Date).getTime()/1e3,e=__assign({timestamp:r},t);return this.F=void 0!==n&&n>=0?__spread(this.F,[normalize(e)]).slice(-n):__spread(this.F,[normalize(e)]),this.D(),this},t.prototype.clearBreadcrumbs=function(){return this.F=[],this.D(),this},t.prototype.K=function(t){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],this.$&&(t.fingerprint=t.fingerprint.concat(this.$)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint},t.prototype.applyToEvent=function(t,n){return this.H&&Object.keys(this.H).length&&(t.extra=__assign({},this.H,t.extra)),this.k&&Object.keys(this.k).length&&(t.tags=__assign({},this.k,t.tags)),this.U&&Object.keys(this.U).length&&(t.user=__assign({},this.U,t.user)),this.A&&Object.keys(this.A).length&&(t.contexts=__assign({},this.A,t.contexts)),this.B&&(t.level=this.B),this.G&&(t.transaction=this.G),this.L&&(t.contexts=t.contexts||{},t.contexts.trace=this.L),this.K(t),t.breadcrumbs=__spread(t.breadcrumbs||[],this.F),t.breadcrumbs=t.breadcrumbs.length>0?t.breadcrumbs:void 0,this.M(__spread(getGlobalEventProcessors(),this.N),t,n)},t}();function getGlobalEventProcessors(){var t=getGlobalObject();return t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.globalEventProcessors=t.__SENTRY__.globalEventProcessors||[],t.__SENTRY__.globalEventProcessors}function addGlobalEventProcessor(t){getGlobalEventProcessors().push(t)}var API_VERSION=3,DEFAULT_BREADCRUMBS=30,MAX_BREADCRUMBS=100,Hub=function(){function t(t,n,r){void 0===n&&(n=new Scope),void 0===r&&(r=API_VERSION),this.q=r,this.V=[],this.V.push({client:t,scope:n})}return t.prototype.W=function(t){for(var n,r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];var i=this.getStackTop();i&&i.client&&i.client[t]&&(n=i.client)[t].apply(n,__spread(r,[i.scope]))},t.prototype.isOlderThan=function(t){return this.q<t},t.prototype.bindClient=function(t){this.getStackTop().client=t},t.prototype.pushScope=function(){var t=this.getStack(),n=t.length>0?t[t.length-1].scope:void 0,r=Scope.clone(n);return this.getStack().push({client:this.getClient(),scope:r}),r},t.prototype.popScope=function(){return void 0!==this.getStack().pop()},t.prototype.withScope=function(t){var n=this.pushScope();try{t(n)}finally{this.popScope()}},t.prototype.getClient=function(){return this.getStackTop().client},t.prototype.getScope=function(){return this.getStackTop().scope},t.prototype.getStack=function(){return this.V},t.prototype.getStackTop=function(){return this.V[this.V.length-1]},t.prototype.captureException=function(t,n){var r=this.X=uuid4(),e=n;if(!n){var i=void 0;try{throw new Error("Sentry syntheticException")}catch(t){i=t}e={originalException:t,syntheticException:i}}return this.W("captureException",t,__assign({},e,{event_id:r})),r},t.prototype.captureMessage=function(t,n,r){var e=this.X=uuid4(),i=r;if(!r){var o=void 0;try{throw new Error(t)}catch(t){o=t}i={originalException:t,syntheticException:o}}return this.W("captureMessage",t,n,__assign({},i,{event_id:e})),e},t.prototype.captureEvent=function(t,n){var r=this.X=uuid4();return this.W("captureEvent",t,__assign({},n,{event_id:r})),r},t.prototype.lastEventId=function(){return this.X},t.prototype.addBreadcrumb=function(t,n){var r=this.getStackTop();if(r.scope&&r.client){var e=r.client.getOptions&&r.client.getOptions()||{},i=e.beforeBreadcrumb,o=void 0===i?null:i,u=e.maxBreadcrumbs,a=void 0===u?DEFAULT_BREADCRUMBS:u;if(!(a<=0)){var s=(new Date).getTime()/1e3,c=__assign({timestamp:s},t),f=o?consoleSandbox(function(){return o(c,n)}):c;null!==f&&r.scope.addBreadcrumb(f,Math.min(a,MAX_BREADCRUMBS))}}},t.prototype.setUser=function(t){var n=this.getStackTop();n.scope&&n.scope.setUser(t)},t.prototype.setTags=function(t){var n=this.getStackTop();n.scope&&n.scope.setTags(t)},t.prototype.setExtras=function(t){var n=this.getStackTop();n.scope&&n.scope.setExtras(t)},t.prototype.setTag=function(t,n){var r=this.getStackTop();r.scope&&r.scope.setTag(t,n)},t.prototype.setExtra=function(t,n){var r=this.getStackTop();r.scope&&r.scope.setExtra(t,n)},t.prototype.setContext=function(t,n){var r=this.getStackTop();r.scope&&r.scope.setContext(t,n)},t.prototype.configureScope=function(t){var n=this.getStackTop();n.scope&&n.client&&t(n.scope)},t.prototype.run=function(t){var n=makeMain(this);try{t(this)}finally{makeMain(n)}},t.prototype.getIntegration=function(t){var n=this.getClient();if(!n)return null;try{return n.getIntegration(t)}catch(n){return logger.warn("Cannot retrieve integration "+t.id+" from the current Hub"),null}},t.prototype.traceHeaders=function(){var t=this.getStackTop();if(t.scope&&t.client){var n=t.scope.getSpan();if(n)return{"sentry-trace":n.toTraceparent()}}return{}},t}();function getMainCarrier(){var t=getGlobalObject();return t.__SENTRY__=t.__SENTRY__||{hub:void 0},t}function makeMain(t){var n=getMainCarrier(),r=getHubFromCarrier(n);return setHubOnCarrier(n,t),r}function getCurrentHub(){var t=getMainCarrier();hasHubOnCarrier(t)&&!getHubFromCarrier(t).isOlderThan(API_VERSION)||setHubOnCarrier(t,new Hub);try{var n=dynamicRequire(module,"domain").active;if(!n)return getHubFromCarrier(t);if(!hasHubOnCarrier(n)||getHubFromCarrier(n).isOlderThan(API_VERSION)){var r=getHubFromCarrier(t).getStackTop();setHubOnCarrier(n,new Hub(r.client,Scope.clone(r.scope)))}return getHubFromCarrier(n)}catch(n){return getHubFromCarrier(t)}}function hasHubOnCarrier(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function getHubFromCarrier(t){return t&&t.__SENTRY__&&t.__SENTRY__.hub?t.__SENTRY__.hub:(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=new Hub,t.__SENTRY__.hub)}function setHubOnCarrier(t,n){return!!t&&(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=n,!0)}function callOnHub(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var e=getCurrentHub();if(e&&e[t])return e[t].apply(e,__spread(n));throw new Error("No hub defined or "+t+" was not found on the hub, please open a bug report.")}function captureException(t){var n;try{throw new Error("Sentry syntheticException")}catch(t){n=t}return callOnHub("captureException",t,{originalException:t,syntheticException:n})}function captureMessage(t,n){var r;try{throw new Error(t)}catch(t){r=t}return callOnHub("captureMessage",t,n,{originalException:t,syntheticException:r})}function captureEvent(t){return callOnHub("captureEvent",t)}function configureScope(t){callOnHub("configureScope",t)}function addBreadcrumb(t){callOnHub("addBreadcrumb",t)}function setContext(t,n){callOnHub("setContext",t,n)}function setExtras(t){callOnHub("setExtras",t)}function setTags(t){callOnHub("setTags",t)}function setExtra(t,n){callOnHub("setExtra",t,n)}function setTag(t,n){callOnHub("setTag",t,n)}function setUser(t){callOnHub("setUser",t)}function withScope(t){callOnHub("withScope",t)}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(t,n){return t(n={exports:{}},n.exports),n.exports}var punycode=createCommonjsModule(function(t,n){!function(r){var e=n&&!n.nodeType&&n,i=t&&!t.nodeType&&t,o="object"==typeof commonjsGlobal&&commonjsGlobal;o.global!==o&&o.window!==o&&o.self!==o||(r=o);var u,a,s=2147483647,c=36,f=1,l=26,h=38,d=700,v=72,p=128,g="-",b=/^xn--/,m=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=c-f,S=Math.floor,w=String.fromCharCode;function x(t){throw RangeError(_[t])}function O(t,n){for(var r=t.length,e=[];r--;)e[r]=n(t[r]);return e}function T(t,n){var r=t.split("@"),e="";return r.length>1&&(e=r[0]+"@",t=r[1]),e+O((t=t.replace(y,".")).split("."),n).join(".")}function C(t){for(var n,r,e=[],i=0,o=t.length;i<o;)(n=t.charCodeAt(i++))>=55296&&n<=56319&&i<o?56320==(64512&(r=t.charCodeAt(i++)))?e.push(((1023&n)<<10)+(1023&r)+65536):(e.push(n),i--):e.push(n);return e}function R(t){return O(t,function(t){var n="";return t>65535&&(n+=w((t-=65536)>>>10&1023|55296),t=56320|1023&t),n+=w(t)}).join("")}function I(t,n){return t+22+75*(t<26)-((0!=n)<<5)}function j(t,n,r){var e=0;for(t=r?S(t/d):t>>1,t+=S(t/n);t>E*l>>1;e+=c)t=S(t/E);return S(e+(E+1)*t/(t+h))}function P(t){var n,r,e,i,o,u,a,h,d,b,m,y=[],_=t.length,E=0,w=p,O=v;for((r=t.lastIndexOf(g))<0&&(r=0),e=0;e<r;++e)t.charCodeAt(e)>=128&&x("not-basic"),y.push(t.charCodeAt(e));for(i=r>0?r+1:0;i<_;){for(o=E,u=1,a=c;i>=_&&x("invalid-input"),((h=(m=t.charCodeAt(i++))-48<10?m-22:m-65<26?m-65:m-97<26?m-97:c)>=c||h>S((s-E)/u))&&x("overflow"),E+=h*u,!(h<(d=a<=O?f:a>=O+l?l:a-O));a+=c)u>S(s/(b=c-d))&&x("overflow"),u*=b;O=j(E-o,n=y.length+1,0==o),S(E/n)>s-w&&x("overflow"),w+=S(E/n),E%=n,y.splice(E++,0,w)}return R(y)}function N(t){var n,r,e,i,o,u,a,h,d,b,m,y,_,E,O,T=[];for(y=(t=C(t)).length,n=p,r=0,o=v,u=0;u<y;++u)(m=t[u])<128&&T.push(w(m));for(e=i=T.length,i&&T.push(g);e<y;){for(a=s,u=0;u<y;++u)(m=t[u])>=n&&m<a&&(a=m);for(a-n>S((s-r)/(_=e+1))&&x("overflow"),r+=(a-n)*_,n=a,u=0;u<y;++u)if((m=t[u])<n&&++r>s&&x("overflow"),m==n){for(h=r,d=c;!(h<(b=d<=o?f:d>=o+l?l:d-o));d+=c)O=h-b,E=c-b,T.push(w(I(b+O%E,0))),h=S(O/E);T.push(w(I(h,0))),o=j(r,_,e==i),r=0,++e}++r,++n}return T.join("")}if(u={version:"1.3.2",ucs2:{decode:C,encode:R},decode:P,encode:N,toASCII:function(t){return T(t,function(t){return m.test(t)?"xn--"+N(t):t})},toUnicode:function(t){return T(t,function(t){return b.test(t)?P(t.slice(4).toLowerCase()):t})}},e&&i)if(t.exports==e)i.exports=u;else for(a in u)u.hasOwnProperty(a)&&(e[a]=u[a]);else r.punycode=u}(commonjsGlobal)}),util={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}};function hasOwnProperty(t,n){return Object.prototype.hasOwnProperty.call(t,n)}var decode=function(t,n,r,e){n=n||"&",r=r||"=";var i={};if("string"!=typeof t||0===t.length)return i;var o=/\+/g;t=t.split(n);var u=1e3;e&&"number"==typeof e.maxKeys&&(u=e.maxKeys);var a=t.length;u>0&&a>u&&(a=u);for(var s=0;s<a;++s){var c,f,l,h,d=t[s].replace(o,"%20"),v=d.indexOf(r);v>=0?(c=d.substr(0,v),f=d.substr(v+1)):(c=d,f=""),l=decodeURIComponent(c),h=decodeURIComponent(f),hasOwnProperty(i,l)?Array.isArray(i[l])?i[l].push(h):i[l]=[i[l],h]:i[l]=h}return i},stringifyPrimitive=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},encode=function(t,n,r,e){return n=n||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(e){var i=encodeURIComponent(stringifyPrimitive(e))+r;return Array.isArray(t[e])?t[e].map(function(t){return i+encodeURIComponent(stringifyPrimitive(t))}).join(n):i+encodeURIComponent(stringifyPrimitive(t[e]))}).join(n):e?encodeURIComponent(stringifyPrimitive(e))+r+encodeURIComponent(stringifyPrimitive(t)):""},querystring=createCommonjsModule(function(t,n){n.decode=n.parse=decode,n.encode=n.stringify=encode}),querystring_1=querystring.decode,querystring_2=querystring.parse,querystring_3=querystring.encode,querystring_4=querystring.stringify,parse=urlParse;function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r","\n","\t"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function urlParse(t,n,r){if(t&&util.isObject(t)&&t instanceof Url)return t;var e=new Url;return e.parse(t,n,r),e}Url.prototype.parse=function(t,n,r){if(!util.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var e=t.indexOf("?"),i=-1!==e&&e<t.indexOf("#")?"?":"#",o=t.split(i);o[0]=o[0].replace(/\\/g,"/");var u=t=o.join(i);if(u=u.trim(),!r&&1===t.split("#").length){var a=simplePathPattern.exec(u);if(a)return this.path=u,this.href=u,this.pathname=a[1],a[2]?(this.search=a[2],this.query=n?querystring.parse(this.search.substr(1)):this.search.substr(1)):n&&(this.search="",this.query={}),this}var s=protocolPattern.exec(u);if(s){var c=(s=s[0]).toLowerCase();this.protocol=c,u=u.substr(s.length)}if(r||s||u.match(/^\/\/[^@\/]+@[^@\/]+/)){var f="//"===u.substr(0,2);!f||s&&hostlessProtocol[s]||(u=u.substr(2),this.slashes=!0)}if(!hostlessProtocol[s]&&(f||s&&!slashedProtocol[s])){for(var l,h,d=-1,v=0;v<hostEndingChars.length;v++){-1!==(p=u.indexOf(hostEndingChars[v]))&&(-1===d||p<d)&&(d=p)}-1!==(h=-1===d?u.lastIndexOf("@"):u.lastIndexOf("@",d))&&(l=u.slice(0,h),u=u.slice(h+1),this.auth=decodeURIComponent(l)),d=-1;for(v=0;v<nonHostChars.length;v++){var p;-1!==(p=u.indexOf(nonHostChars[v]))&&(-1===d||p<d)&&(d=p)}-1===d&&(d=u.length),this.host=u.slice(0,d),u=u.slice(d),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var b=this.hostname.split(/\./),m=(v=0,b.length);v<m;v++){var y=b[v];if(y&&!y.match(hostnamePartPattern)){for(var _="",E=0,S=y.length;E<S;E++)y.charCodeAt(E)>127?_+="x":_+=y[E];if(!_.match(hostnamePartPattern)){var w=b.slice(0,v),x=b.slice(v+1),O=y.match(hostnamePartStart);O&&(w.push(O[1]),x.unshift(O[2])),x.length&&(u="/"+x.join(".")+u),this.hostname=w.join(".");break}}}this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),g||(this.hostname=punycode.toASCII(this.hostname));var T=this.port?":"+this.port:"",C=this.hostname||"";this.host=C+T,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==u[0]&&(u="/"+u))}if(!unsafeProtocol[c])for(v=0,m=autoEscape.length;v<m;v++){var R=autoEscape[v];if(-1!==u.indexOf(R)){var I=encodeURIComponent(R);I===R&&(I=escape(R)),u=u.split(R).join(I)}}var j=u.indexOf("#");-1!==j&&(this.hash=u.substr(j),u=u.slice(0,j));var P=u.indexOf("?");if(-1!==P?(this.search=u.substr(P),this.query=u.substr(P+1),n&&(this.query=querystring.parse(this.query)),u=u.slice(0,P)):n&&(this.search="",this.query={}),u&&(this.pathname=u),slashedProtocol[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){T=this.pathname||"";var N=this.search||"";this.path=T+N}return this.href=this.format(),this},Url.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var n=this.protocol||"",r=this.pathname||"",e=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&util.isObject(this.query)&&Object.keys(this.query).length&&(o=querystring.stringify(this.query));var u=this.search||o&&"?"+o||"";return n&&":"!==n.substr(-1)&&(n+=":"),this.slashes||(!n||slashedProtocol[n])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),e&&"#"!==e.charAt(0)&&(e="#"+e),u&&"?"!==u.charAt(0)&&(u="?"+u),n+i+(r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(u=u.replace("#","%23"))+e},Url.prototype.resolve=function(t){return this.resolveObject(urlParse(t,!1,!0)).format()},Url.prototype.resolveObject=function(t){if(util.isString(t)){var n=new Url;n.parse(t,!1,!0),t=n}for(var r=new Url,e=Object.keys(this),i=0;i<e.length;i++){var o=e[i];r[o]=this[o]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),a=0;a<u.length;a++){var s=u[a];"protocol"!==s&&(r[s]=t[s])}return slashedProtocol[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!slashedProtocol[t.protocol]){for(var c=Object.keys(t),f=0;f<c.length;f++){var l=c[f];r[l]=t[l]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||hostlessProtocol[t.protocol])r.pathname=t.pathname;else{for(var h=(t.pathname||"").split("/");h.length&&!(t.host=h.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),r.pathname=h.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var d=r.pathname||"",v=r.search||"";r.path=d+v}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var p=r.pathname&&"/"===r.pathname.charAt(0),g=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=g||p||r.host&&t.pathname,m=b,y=r.pathname&&r.pathname.split("/")||[],_=(h=t.pathname&&t.pathname.split("/")||[],r.protocol&&!slashedProtocol[r.protocol]);if(_&&(r.hostname="",r.port=null,r.host&&(""===y[0]?y[0]=r.host:y.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===h[0]?h[0]=t.host:h.unshift(t.host)),t.host=null),b=b&&(""===h[0]||""===y[0])),g)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,y=h;else if(h.length)y||(y=[]),y.pop(),y=y.concat(h),r.search=t.search,r.query=t.query;else if(!util.isNullOrUndefined(t.search)){if(_)r.hostname=r.host=y.shift(),(O=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=O.shift(),r.host=r.hostname=O.shift());return r.search=t.search,r.query=t.query,util.isNull(r.pathname)&&util.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!y.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var E=y.slice(-1)[0],S=(r.host||t.host||y.length>1)&&("."===E||".."===E)||""===E,w=0,x=y.length;x>=0;x--)"."===(E=y[x])?y.splice(x,1):".."===E?(y.splice(x,1),w++):w&&(y.splice(x,1),w--);if(!b&&!m)for(;w--;w)y.unshift("..");!b||""===y[0]||y[0]&&"/"===y[0].charAt(0)||y.unshift(""),S&&"/"!==y.join("/").substr(-1)&&y.push("");var O,T=""===y[0]||y[0]&&"/"===y[0].charAt(0);_&&(r.hostname=r.host=T?"":y.length?y.shift():"",(O=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=O.shift(),r.host=r.hostname=O.shift()));return(b=b||r.host&&y.length)&&!T&&y.unshift(""),y.length?r.pathname=y.join("/"):(r.pathname=null,r.path=null),util.isNull(r.pathname)&&util.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},Url.prototype.parseHost=function(){var t=this.host,n=portPattern.exec(t);n&&(":"!==(n=n[0])&&(this.port=n.substr(1)),t=t.substr(0,t.length-n.length)),t&&(this.hostname=t)};var DSN_REGEX=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w\.-]+)(?::(\d+))?\/(.+)/,ERROR_MESSAGE="Invalid Dsn",Dsn=function(){function t(t){"string"==typeof t?this.J(t):this.Y(t),this.Z()}return t.prototype.toString=function(t){void 0===t&&(t=!1);var n=this,r=n.host,e=n.path,i=n.pass,o=n.port,u=n.projectId;return n.protocol+"://"+n.user+(t&&i?":"+i:"")+"@"+r+(o?":"+o:"")+"/"+(e?e+"/":e)+u},t.prototype.J=function(t){var n=DSN_REGEX.exec(t);if(!n)throw new SentryError(ERROR_MESSAGE);var r=__read(n.slice(1),6),e=r[0],i=r[1],o=r[2],u=void 0===o?"":o,a=r[3],s=r[4],c=void 0===s?"":s,f="",l=r[5],h=l.split("/");h.length>1&&(f=h.slice(0,-1).join("/"),l=h.pop()),Object.assign(this,{host:a,pass:u,path:f,projectId:l,port:c,protocol:e,user:i})},t.prototype.Y=function(t){this.protocol=t.protocol,this.user=t.user,this.pass=t.pass||"",this.host=t.host,this.port=t.port||"",this.path=t.path||"",this.projectId=t.projectId},t.prototype.Z=function(){var t=this;if(["protocol","user","host","projectId"].forEach(function(n){if(!t[n])throw new SentryError(ERROR_MESSAGE)}),"http"!==this.protocol&&"https"!==this.protocol)throw new SentryError(ERROR_MESSAGE);if(this.port&&Number.isNaN(parseInt(this.port,10)))throw new SentryError(ERROR_MESSAGE)},t}(),urlParser=parse,SENTRY_API_VERSION="7",API=function(){function t(t,n){void 0===n&&(n="https://ylog.huya.com/d.gif"),this.dsn=t,this.rpurl=n,this.tt=new Dsn(t)}return t.prototype.getDsn=function(){return this.tt},t.prototype.getStoreEndpoint=function(){return""+this.nt()+this.getStoreEndpointPath()},t.prototype.getStoreEndpointWithUrlEncodedAuth=function(){var t={sentry_key:this.tt.user,sentry_version:SENTRY_API_VERSION};return this.getStoreEndpoint()+"?"+urlEncode(t)},t.prototype.getYlogPathWithUrlEncodeAuth=function(){return"/d.gif?"+urlEncode({sentry_key:this.tt.user,sentry_version:SENTRY_API_VERSION})},t.prototype.nt=function(){return this.rpurl},t.prototype.getRpHostName=function(){return urlParser(this.rpurl).hostname},t.prototype.getStoreEndpointPath=function(){return""},t.prototype.getRequestHeaders=function(t,n){var r=this.tt,e=["Sentry sentry_version="+SENTRY_API_VERSION];return e.push("sentry_timestamp="+(new Date).getTime()),e.push("sentry_client="+t+"/"+n),e.push("sentry_key="+r.user),r.pass&&e.push("sentry_secret="+r.pass),{"Content-Type":"application/json","X-Sentry-Auth":e.join(", ")}},t.prototype.getReportDialogEndpoint=function(t){void 0===t&&(t={});var n=this.tt,r=this.nt()+(n.path?"/"+n.path:"")+"/api/embed/error-page/",e=[];for(var i in e.push("dsn="+n.toString()),t)if("user"===i){if(!t.user)continue;t.user.name&&e.push("name="+encodeURIComponent(t.user.name)),t.user.email&&e.push("email="+encodeURIComponent(t.user.email))}else e.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e.length?r+"?"+e.join("&"):r},t}(),base64=createCommonjsModule(function(module,exports){var global,factory;global="undefined"!=typeof self?self:"undefined"!=typeof window?window:commonjsGlobal,factory=function(global){global=global||{};var _Base64=global.Base64,version="2.5.1",buffer;if(module.exports)try{buffer=eval("require('buffer').Buffer")}catch(t){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(t){for(var n={},r=0,e=t.length;r<e;r++)n[t.charAt(r)]=r;return n}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(t){if(t.length<2)return(n=t.charCodeAt(0))<128?t:n<2048?fromCharCode(192|n>>>6)+fromCharCode(128|63&n):fromCharCode(224|n>>>12&15)+fromCharCode(128|n>>>6&63)+fromCharCode(128|63&n);var n=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return fromCharCode(240|n>>>18&7)+fromCharCode(128|n>>>12&63)+fromCharCode(128|n>>>6&63)+fromCharCode(128|63&n)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(t){return t.replace(re_utob,cb_utob)},cb_encode=function(t){var n=[0,2,1][t.length%3],r=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[b64chars.charAt(r>>>18),b64chars.charAt(r>>>12&63),n>=2?"=":b64chars.charAt(r>>>6&63),n>=1?"=":b64chars.charAt(63&r)].join("")},btoa=global.btoa?function(t){return global.btoa(t)}:function(t){return t.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(t){return(t.constructor===buffer.constructor?t:buffer.from(t)).toString("base64")}:function(t){return(t.constructor===buffer.constructor?t:new buffer(t)).toString("base64")}:function(t){return btoa(utob(t))},encode=function(t,n){return n?_encode(String(t)).replace(/[+\/]/g,function(t){return"+"==t?"-":"_"}).replace(/=/g,""):_encode(String(t))},encodeURI=function(t){return encode(t,!0)},re_btou=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),cb_btou=function(t){switch(t.length){case 4:var n=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return fromCharCode(55296+(n>>>10))+fromCharCode(56320+(1023&n));case 3:return fromCharCode((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return fromCharCode((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},btou=function(t){return t.replace(re_btou,cb_btou)},cb_decode=function(t){var n=t.length,r=n%4,e=(n>0?b64tab[t.charAt(0)]<<18:0)|(n>1?b64tab[t.charAt(1)]<<12:0)|(n>2?b64tab[t.charAt(2)]<<6:0)|(n>3?b64tab[t.charAt(3)]:0),i=[fromCharCode(e>>>16),fromCharCode(e>>>8&255),fromCharCode(255&e)];return i.length-=[0,0,2,1][r],i.join("")},_atob=global.atob?function(t){return global.atob(t)}:function(t){return t.replace(/\S{1,4}/g,cb_decode)},atob=function(t){return _atob(String(t).replace(/[^A-Za-z0-9\+\/]/g,""))},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(t){return(t.constructor===buffer.constructor?t:buffer.from(t,"base64")).toString()}:function(t){return(t.constructor===buffer.constructor?t:new buffer(t,"base64")).toString()}:function(t){return btou(_atob(t))},decode=function(t){return _decode(String(t).replace(/[-_]/g,function(t){return"-"==t?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var t=global.Base64;return global.Base64=_Base64,t};if(global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty){var noEnum=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum(function(){return decode(this)})),Object.defineProperty(String.prototype,"toBase64",noEnum(function(t){return encode(this,t)})),Object.defineProperty(String.prototype,"toBase64URI",noEnum(function(){return encode(this,!0)}))}}return global.Meteor&&(Base64=global.Base64),module.exports&&(module.exports.Base64=global.Base64),{Base64:global.Base64}},module.exports=factory(global)}),base64_1=base64.Base64,installedIntegrations=[];function getIntegrationsToSetup(t){var n=t.defaultIntegrations&&__spread(t.defaultIntegrations)||[],r=t.integrations,e=[];if(Array.isArray(r)){var i=r.map(function(t){return t.name}),o=[];n.forEach(function(t){-1===i.indexOf(t.name)&&-1===o.indexOf(t.name)&&(e.push(t),o.push(t.name))}),r.forEach(function(t){-1===o.indexOf(t.name)&&(e.push(t),o.push(t.name))})}else{if("function"!=typeof r)return __spread(n);e=r(n),e=Array.isArray(e)?e:[e]}return e}function setupIntegration(t){-1===installedIntegrations.indexOf(t.name)&&(t.setupOnce(addGlobalEventProcessor,getCurrentHub),installedIntegrations.push(t.name),logger.log("Integration installed: "+t.name))}function setupIntegrations(t){var n={};return getIntegrationsToSetup(t).forEach(function(t){n[t.name]=t,setupIntegration(t)}),n}var BaseClient=function(){function t(t,n){this.rt=!1,this.et=new t(n),this.it=n,n.dsn&&(this.ot=new Dsn(n.dsn)),this.ut=setupIntegrations(this.it)}return t.prototype.captureException=function(t,n,r){var e=this,i=n&&n.event_id;return this.rt=!0,this.at().eventFromException(t,n).then(function(t){return e.st(t,n,r)}).then(function(t){i=t&&t.event_id,e.rt=!1}).catch(function(t){logger.error(t),e.rt=!1}),i},t.prototype.captureMessage=function(t,n,r,e){var i=this,o=r&&r.event_id;return this.rt=!0,(isPrimitive(t)?this.at().eventFromMessage(""+t,n,r):this.at().eventFromException(t,r)).then(function(t){return i.st(t,r,e)}).then(function(t){o=t&&t.event_id,i.rt=!1}).catch(function(t){logger.error(t),i.rt=!1}),o},t.prototype.captureEvent=function(t,n,r){var e=this,i=n&&n.event_id;return this.rt=!0,this.st(t,n,r).then(function(t){i=t&&t.event_id,e.rt=!1}).catch(function(t){logger.error(t),e.rt=!1}),i},t.prototype.getDsn=function(){return this.ot},t.prototype.getOptions=function(){return this.it},t.prototype.flush=function(t){var n=this;return this.ct(t).then(function(r){return clearInterval(r.interval),n.at().getTransport().close(t).then(function(t){return r.ready&&t})})},t.prototype.close=function(t){var n=this;return this.flush(t).then(function(t){return n.getOptions().enabled=!1,t})},t.prototype.getIntegrations=function(){return this.ut||{}},t.prototype.getIntegration=function(t){try{return this.ut[t.id]||null}catch(n){return logger.warn("Cannot retrieve integration "+t.id+" from the current Client"),null}},t.prototype.ct=function(t){var n=this;return new Promise(function(r){var e=0,i=0;clearInterval(i),i=setInterval(function(){n.rt?(e+=1,t&&e>=t&&r({interval:i,ready:!1})):r({interval:i,ready:!0})},1)})},t.prototype.at=function(){return this.et},t.prototype.ft=function(){return!1!==this.getOptions().enabled&&void 0!==this.ot},t.prototype.lt=function(t,n,r){var e=this.getOptions(),i=e.environment,o=e.release,u=e.dist,a=e.maxValueLength,s=void 0===a?250:a,c=__assign({},t);c.projectId=this.ot&&this.ot.projectId||void 0,c.sentry_key=this.ot&&this.ot.user||void 0,c.sentry_version=SENTRY_API_VERSION,void 0===c.environment&&void 0!==i&&(c.environment=i),void 0===c.release&&void 0!==o&&(c.release=o),void 0===c.dist&&void 0!==u&&(c.dist=u),c.message&&(c.message=truncate(c.message,s));var f=c.exception&&c.exception.values&&c.exception.values[0];f&&f.value&&(f.value=truncate(f.value,s));var l=c.request;l&&l.url&&(l.url=truncate(l.url,s)),void 0===c.event_id&&(c.event_id=uuid4()),this.ht(c.sdk);var h=SyncPromise.resolve(c);return n&&(h=n.applyToEvent(c,r)),h},t.prototype.ht=function(t){var n=Object.keys(this.ut);t&&n.length>0&&(t.integrations=n)},t.prototype.st=function(t,n,r){var e=this,i=this.getOptions(),o=i.beforeSend,u=i.sampleRate;return this.ft()?"number"==typeof u&&Math.random()>u?SyncPromise.reject("This event has been sampled, will not send event."):new SyncPromise(function(i,u){e.lt(t,r,n).then(function(t){if(null!==t){var r={ctime:(new Date).getTime(),rand:parseInt(""+1e4*Math.random()),rid:"sentryreport",sk:base64_1.btoa(encodeURIComponent(JSON.stringify(t)))};try{if(n&&n.data&&!0===n.data.__sentry__||!o)return e.at().sendEvent(r),void i(r);var a=o(t,n);if(void 0===a)logger.error("`beforeSend` method has to return `null` or a valid event.");else if(isThenable(a))e.dt(a,i,u);else{if(null===a)return logger.log("`beforeSend` returned `null`, will not send event."),void i(null);e.at().sendEvent(r),i(r)}}catch(t){e.captureException(t,{data:{__sentry__:!0},originalException:t}),u("`beforeSend` throw an error, will not send event.")}}else u("An event processor returned null, will not send event.")})}):SyncPromise.reject("SDK not enabled, will not send event.")},t.prototype.dt=function(t,n,r){var e=this;t.then(function(t){null!==t?(e.at().sendEvent(t),n(t)):r("`beforeSend` returned `null`, will not send event.")}).catch(function(t){r("beforeSend rejected with "+t)})},t}(),NoopTransport=function(){function t(){}return t.prototype.sendEvent=function(t){return Promise.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:exports.Status.Skipped})},t.prototype.close=function(t){return Promise.resolve(!0)},t}(),BaseBackend=function(){function t(t){this.it=t,this.it.dsn||logger.warn("No DSN provided, backend will not do anything."),this.vt=this.pt()}return t.prototype.pt=function(){return new NoopTransport},t.prototype.eventFromException=function(t,n){throw new SentryError("Backend has to implement `eventFromException` method")},t.prototype.eventFromMessage=function(t,n,r){throw new SentryError("Backend has to implement `eventFromMessage` method")},t.prototype.sendEvent=function(t){Math.random()<.01&&this.vt.sendEvent(t).catch(function(t){logger.error("Error while sending event: "+t)})},t.prototype.getTransport=function(){return this.vt},t}(),originalFunctionToString;function initAndBind(t,n){!0===n.debug&&logger.enable(),getCurrentHub().bindClient(new t(n))}var FunctionToString=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){originalFunctionToString=Function.prototype.toString,Function.prototype.toString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.__sentry__?this.__sentry_original__:this;return originalFunctionToString.apply(r,t)}},t.id="FunctionToString",t}(),DEFAULT_IGNORE_ERRORS=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],InboundFilters=function(){function t(n){void 0===n&&(n={}),this.it=n,this.name=t.id}return t.prototype.setupOnce=function(){addGlobalEventProcessor(function(n){var r=getCurrentHub();if(!r)return n;var e=r.getIntegration(t);if(e){var i=r.getClient(),o=i?i.getOptions():{},u=e.gt(o);if(e.bt(n,u))return null}return n})},t.prototype.bt=function(t,n){return this.yt(t,n)?(logger.warn("Event dropped due to being internal Sentry Error.\nEvent: "+getEventDescription(t)),!0):this._t(t,n)?(logger.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+getEventDescription(t)),!0):this.Et(t,n)?(logger.warn("Event dropped due to being matched by `blacklistUrls` option.\nEvent: "+getEventDescription(t)+".\nUrl: "+this.St(t)),!0):!this.wt(t,n)&&(logger.warn("Event dropped due to not being matched by `whitelistUrls` option.\nEvent: "+getEventDescription(t)+".\nUrl: "+this.St(t)),!0)},t.prototype.yt=function(t,n){if(void 0===n&&(n={}),!n.ignoreInternal)return!1;try{return"SentryError"===t.exception.values[0].type}catch(t){return!1}},t.prototype._t=function(t,n){return void 0===n&&(n={}),!(!n.ignoreErrors||!n.ignoreErrors.length)&&this.xt(t).some(function(t){return n.ignoreErrors.some(function(n){return isMatchingPattern(t,n)})})},t.prototype.Et=function(t,n){if(void 0===n&&(n={}),!n.blacklistUrls||!n.blacklistUrls.length)return!1;var r=this.St(t);return!!r&&n.blacklistUrls.some(function(t){return isMatchingPattern(r,t)})},t.prototype.wt=function(t,n){if(void 0===n&&(n={}),!n.whitelistUrls||!n.whitelistUrls.length)return!0;var r=this.St(t);return!r||n.whitelistUrls.some(function(t){return isMatchingPattern(r,t)})},t.prototype.gt=function(t){return void 0===t&&(t={}),{blacklistUrls:__spread(this.it.blacklistUrls||[],t.blacklistUrls||[]),ignoreErrors:__spread(this.it.ignoreErrors||[],t.ignoreErrors||[],DEFAULT_IGNORE_ERRORS),ignoreInternal:void 0===this.it.ignoreInternal||this.it.ignoreInternal,whitelistUrls:__spread(this.it.whitelistUrls||[],t.whitelistUrls||[])}},t.prototype.xt=function(t){if(t.message)return[t.message];if(t.exception)try{var n=t.exception.values[0],r=n.type,e=n.value;return[""+e,r+": "+e]}catch(n){return logger.error("Cannot extract message for event "+getEventDescription(t)),[]}return[]},t.prototype.St=function(t){try{if(t.stacktrace){var n=t.stacktrace.frames;return n[n.length-1].filename}if(t.exception){var r=t.exception.values[0].stacktrace.frames;return r[r.length-1].filename}return null}catch(n){return logger.error("Cannot extract url for event "+getEventDescription(t)),null}},t.id="InboundFilters",t}(),CoreIntegrations=Object.freeze({FunctionToString:FunctionToString,InboundFilters:InboundFilters}),window$1=getGlobalObject(),TraceKit={Ot:!1,Tt:!1,Ct:!1,Rt:!1},UNKNOWN_FUNCTION="?",ERROR_TYPES_RE=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function _has(t,n){return Object.prototype.hasOwnProperty.call(t,n)}function getLocationHref(){return"undefined"==typeof document||null==document.location?"":document.location.href}TraceKit.Ot=function(){var t,n,r=[],e=null,i=null;function o(t,n,e){var i=null;if(!n||TraceKit.Tt){for(var o in r)if(_has(r,o))try{r[o](t,n,e)}catch(t){i=t}if(i)throw i}}function u(n,r,e,u,a){var c=null;if(a=isErrorEvent(a)?a.error:a,n=isErrorEvent(n)?n.message:n,i)TraceKit.Ct.It(i,r,e,n),s();else if(a&&isError(a))(c=TraceKit.Ct(a)).mechanism="onerror",o(c,!0,a);else{var f,l={url:r,line:e,column:u},h=n;if("[object String]"==={}.toString.call(n)){var d=n.match(ERROR_TYPES_RE);d&&(f=d[1],h=d[2])}l.func=UNKNOWN_FUNCTION,l.context=null,o(c={name:f,message:h,mode:"onerror",mechanism:"onerror",stack:[__assign({},l,{url:l.url||getLocationHref()})]},!0,null)}return!!t&&t.apply(this,arguments)}function a(t){var n=t&&(t.detail?t.detail.reason:t.reason)||t,r=TraceKit.Ct(n);r.mechanism="onunhandledrejection",r.message||(r.message=JSON.stringify(normalize(n))),o(r,!0,n)}function s(){var t=i,n=e;i=null,e=null,o(t,!1,n)}function c(t){if(i){if(e===t)return;s()}var n=TraceKit.Ct(t);throw i=n,e=t,setTimeout(function(){e===t&&s()},n.incomplete?2e3:0),t}return c.jt=function(t){r.push(t)},c.Pt=function(){!0!==n&&(t=window$1.onerror,window$1.onerror=u,n=!0)},c.Nt=function(){window$1.onunhandledrejection=a},c}(),TraceKit.Ct=function(){function t(t){if(!t||!t.stack)return null;for(var n,r,e,i=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|[a-z]:|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,o=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js))(?::(\d+))?(?::(\d+))?\s*$/i,u=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,a=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,s=/\((\S*)(?::(\d+))(?::(\d+))\)/,c=t.stack.split("\n"),f=[],l=/^(.*) is undefined$/.exec(t.message),h=0,d=c.length;h<d;++h){if(r=i.exec(c[h])){var v=r[2]&&0===r[2].indexOf("native");r[2]&&0===r[2].indexOf("eval")&&(n=s.exec(r[2]))&&(r[2]=n[1],r[3]=n[2],r[4]=n[3]),e={url:r[2],func:r[1]||UNKNOWN_FUNCTION,args:v?[r[2]]:[],line:r[3]?+r[3]:null,column:r[4]?+r[4]:null}}else if(r=u.exec(c[h]))e={url:r[2],func:r[1]||UNKNOWN_FUNCTION,args:[],line:+r[3],column:r[4]?+r[4]:null};else{if(!(r=o.exec(c[h])))continue;r[3]&&r[3].indexOf(" > eval")>-1&&(n=a.exec(r[3]))?(r[1]=r[1]||"eval",r[3]=n[1],r[4]=n[2],r[5]=""):0!==h||r[5]||void 0===t.columnNumber||(f[0].column=t.columnNumber+1),e={url:r[3],func:r[1]||UNKNOWN_FUNCTION,args:r[2]?r[2].split(","):[],line:r[4]?+r[4]:null,column:r[5]?+r[5]:null}}!e.func&&e.line&&(e.func=UNKNOWN_FUNCTION),e.context=null,f.push(e)}return f.length?(f[0]&&f[0].line&&!f[0].column&&l&&(f[0].column=null),{mode:"stack",name:t.name,message:t.message,stack:f}):null}function n(t,n,r,e){var i={url:n,line:r};if(i.url&&i.line){if(t.incomplete=!1,i.func||(i.func=UNKNOWN_FUNCTION),i.context||(i.context=null),/ '([^']+)' /.exec(e)&&(i.column=null),t.stack.length>0&&t.stack[0].url===i.url){if(t.stack[0].line===i.line)return!1;if(!t.stack[0].line&&t.stack[0].func===i.func)return t.stack[0].line=i.line,t.stack[0].context=i.context,!1}return t.stack.unshift(i),t.partial=!0,!0}return t.incomplete=!0,!1}function r(t,e){for(var i,o,u=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,a=[],s={},c=!1,f=r.caller;f&&!c;f=f.caller)if(f!==_computeStackTrace&&f!==TraceKit.Ot){if(o={url:null,func:UNKNOWN_FUNCTION,args:[],line:null,column:null},f.name?o.func=f.name:(i=u.exec(f.toString()))&&(o.func=i[1]),void 0===o.func)try{o.func=i.input.substring(0,i.input.indexOf("{"))}catch(t){}s[""+f]?c=!0:s[""+f]=!0,a.push(o)}e&&a.splice(0,e);var l={mode:"callers",name:t.name,message:t.message,stack:a};return n(l,t.sourceURL||t.fileName,t.line||t.lineNumber,t.message||t.description),l}function e(n,e){var i=null;e=null==e?0:+e;try{if(i=function(t){var n=t.stacktrace;if(n){for(var r,e=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,i=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,o=n.split("\n"),u=[],a=0;a<o.length;a+=2){var s=null;(r=e.exec(o[a]))?s={url:r[2],line:+r[1],column:null,func:r[3],args:[]}:(r=i.exec(o[a]))&&(s={url:r[6],line:+r[1],column:+r[2],func:r[3]||r[4],args:r[5]?r[5].split(","):[]}),s&&(!s.func&&s.line&&(s.func=UNKNOWN_FUNCTION),s.line&&(s.context=null),s.context||(s.context=[o[a+1]]),u.push(s))}return u.length?{mode:"stacktrace",name:t.name,message:t.message,stack:u}:null}}(n))return i}catch(t){}try{if(i=t(n))return i}catch(t){}try{if(i=function(t){var n=t.message.split("\n");if(n.length<4)return null;var r,e=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,i=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,o=/^\s*Line (\d+) of function script\s*$/i,u=[],a=window$1&&window$1.document&&window$1.document.getElementsByTagName("script"),s=[];for(var c in a)_has(a,c)&&!a[c].src&&s.push(a[c]);for(var f=2;f<n.length;f+=2){var l=null;(r=e.exec(n[f]))?l={url:r[2],func:r[3],args:[],line:+r[1],column:null}:(r=i.exec(n[f]))?l={url:r[3],func:r[4],args:[],line:+r[1],column:null}:(r=o.exec(n[f]))&&(l={url:getLocationHref().replace(/#.*$/,""),func:"",args:[],line:r[1],column:null}),l&&(l.func||(l.func=UNKNOWN_FUNCTION),l.context=[n[f+1]],u.push(l))}return u.length?{mode:"multiline",name:t.name,message:n[0],stack:u}:null}(n))return i}catch(t){}try{if(i=r(n,e+1))return i}catch(t){}return{original:n,name:n.name,message:n.message,mode:"failed"}}return e.It=n,e.Ft=t,e}(),TraceKit.Tt=!0,TraceKit.Rt=11;var _subscribe=TraceKit.Ot.jt,_installGlobalHandler=TraceKit.Ot.Pt,_installGlobalUnhandledRejectionHandler=TraceKit.Ot.Nt,_computeStackTrace=TraceKit.Ct,STACKTRACE_LIMIT=50;function exceptionFromStacktrace(t){var n=prepareFramesForEvent(t.stack),r={type:t.name,value:t.message};return n&&n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function eventFromPlainObject(t,n){var r=Object.keys(t).sort(),e={extra:{__serialized__:normalizeToSize(t)},message:"Non-Error exception captured with keys: "+keysToEventMessage(r)};if(n){var i=prepareFramesForEvent(_computeStackTrace(n).stack);e.stacktrace={frames:i}}return e}function eventFromStacktrace(t){return{exception:{values:[exceptionFromStacktrace(t)]}}}function prepareFramesForEvent(t){if(!t||!t.length)return[];var n=t,r=n[0].func||"",e=n[n.length-1].func||"";return(r.includes("captureMessage")||r.includes("captureException"))&&(n=n.slice(1)),e.includes("sentryWrapped")&&(n=n.slice(0,-1)),n.map(function(t){return{colno:t.column,filename:t.url||n[0].url,function:t.func||"?",in_app:!0,lineno:t.line}}).slice(0,STACKTRACE_LIMIT).reverse()}var BaseTransport=function(){function t(t){this.options=t,this.l=new PromiseBuffer(30),this.url=new API(this.options.dsn,this.options.rpurl).getStoreEndpointWithUrlEncodedAuth(),this.hscanUrl="https://report-hscan.huya.com/report/report-track"}return t.prototype.sendEvent=function(t){throw new SentryError("Transport Class has to implement `sendEvent` method")},t.prototype.close=function(t){return this.l.drain(t)},t}(),global$2=getGlobalObject(),FetchTransport=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.sendEvent=function(t){var n={body:querystring_4(t),headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",referrerPolicy:supportsReferrerPolicy()?"origin":""};return this.l.add(global$2.fetch(this.url,n).then(function(t){return{status:exports.Status.fromHttpCode(t.status)}}))},n}(BaseTransport),XHRTransport=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.sendEvent=function(t){var n=this;return this.l.add(new Promise(function(r,e){var i=new XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&(200===i.status&&r({status:exports.Status.fromHttpCode(i.status)}),e(i))},i.open("POST",n.url),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(querystring_4(t))}))},n}(BaseTransport),index=Object.freeze({BaseTransport:BaseTransport,FetchTransport:FetchTransport,XHRTransport:XHRTransport}),BrowserBackend=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.pt=function(){if(!this.it.dsn)return t.prototype.pt.call(this);var n=__assign({},this.it.transportOptions,{dsn:this.it.dsn,rpurl:this.it.rpurl});return this.it.transport?new this.it.transport(n):supportsFetch()?new FetchTransport(n):new XHRTransport(n)},n.prototype.eventFromException=function(t,n){var r,e=this;if(isErrorEvent(t)&&t.error)return t=t.error,r=eventFromStacktrace(_computeStackTrace(t)),SyncPromise.resolve(this.Ut(r,n));if(isDOMError(t)||isDOMException(t)){var i=t,o=i.name||(isDOMError(i)?"DOMError":"DOMException"),u=i.message?o+": "+i.message:o;return this.eventFromMessage(u,exports.Severity.Error,n).then(function(t){return addExceptionTypeValue(t,u),SyncPromise.resolve(e.Ut(t,n))})}if(isError(t))return r=eventFromStacktrace(_computeStackTrace(t)),SyncPromise.resolve(this.Ut(r,n));if(isPlainObject(t)&&n&&n.syntheticException)return addExceptionTypeValue(r=eventFromPlainObject(t,n.syntheticException),"Custom Object",void 0,{handled:!0,synthetic:!0,type:"generic"}),r.level=exports.Severity.Error,SyncPromise.resolve(this.Ut(r,n));var a=t;return this.eventFromMessage(a,void 0,n).then(function(t){return addExceptionTypeValue(t,""+a,void 0,{handled:!0,synthetic:!0,type:"generic"}),t.level=exports.Severity.Error,SyncPromise.resolve(e.Ut(t,n))})},n.prototype.Ut=function(t,n){return __assign({},t,{event_id:n&&n.event_id})},n.prototype.eventFromMessage=function(t,n,r){void 0===n&&(n=exports.Severity.Info);var e={event_id:r&&r.event_id,level:n,message:t};if(this.it.attachStacktrace&&r&&r.syntheticException){var i=prepareFramesForEvent(_computeStackTrace(r.syntheticException).stack);e.stacktrace={frames:i}}return SyncPromise.resolve(e)},n}(BaseBackend),SDK_NAME="sentry.javascript.browser",SDK_VERSION="5.5.23",BrowserClient=function(t){function n(n){return void 0===n&&(n={}),t.call(this,BrowserBackend,n)||this}return __extends(n,t),n.prototype.lt=function(n,r,e){return n.platform=n.platform||"javascript",n.sdk=__assign({},n.sdk,{name:SDK_NAME,packages:__spread(n.sdk&&n.sdk.packages||[],[{name:"npm:@huya-sentry/browser",version:SDK_VERSION}]),version:SDK_VERSION}),t.prototype.lt.call(this,n,r,e)},n.prototype.showReportDialog=function(t){void 0===t&&(t={});var n=getGlobalObject().document;if(n)if(this.ft()){var r=t.dsn||this.getDsn();if(t.eventId)if(r){var e=n.createElement("script");e.async=!0,e.src=new API(r).getReportDialogEndpoint(t),t.onLoad&&(e.onload=t.onLoad),(n.head||n.body).appendChild(e)}else logger.error("Missing `Dsn` option in showReportDialog call");else logger.error("Missing `eventId` option in showReportDialog call")}else logger.error("Trying to call showReportDialog with Sentry Client is disabled")},n}(BaseClient),debounceDuration=1e3,keypressTimeout,lastCapturedEvent,ignoreOnError=0;function shouldIgnoreOnError(){return ignoreOnError>0}function ignoreNextOnError(){ignoreOnError+=1,setTimeout(function(){ignoreOnError-=1})}function wrap(t,n,r){if(void 0===n&&(n={}),"function"!=typeof t)return t;try{if(t.__sentry__)return t;if(t.__sentry_wrapped__)return t.__sentry_wrapped__}catch(n){return t}var sentryWrapped=function(){r&&"function"==typeof r&&r.apply(this,arguments);var e=Array.prototype.slice.call(arguments);try{var i=e.map(function(t){return wrap(t,n)});return t.handleEvent?t.handleEvent.apply(this,i):t.apply(this,i)}catch(t){throw ignoreNextOnError(),withScope(function(r){r.addEventProcessor(function(t){var r=__assign({},t);return n.mechanism&&addExceptionTypeValue(r,void 0,void 0,n.mechanism),r.extra=__assign({},r.extra,{arguments:normalize(e,3)}),r}),captureException(t)}),t}};try{for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(sentryWrapped[e]=t[e])}catch(t){}t.prototype=t.prototype||{},sentryWrapped.prototype=t.prototype,Object.defineProperty(t,"__sentry_wrapped__",{enumerable:!1,value:sentryWrapped}),Object.defineProperties(sentryWrapped,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:t}});try{Object.getOwnPropertyDescriptor(sentryWrapped,"name").configurable&&Object.defineProperty(sentryWrapped,"name",{get:function(){return t.name}})}catch(t){}return sentryWrapped}var debounceTimer=0;function breadcrumbEventHandler(t,n){return void 0===n&&(n=!1),function(r){if(keypressTimeout=void 0,r&&lastCapturedEvent!==r){lastCapturedEvent=r;var e=function(){var n;try{n=r.target?_htmlTreeAsString(r.target):_htmlTreeAsString(r)}catch(t){n="<unknown>"}0!==n.length&&getCurrentHub().addBreadcrumb({category:"ui."+t,message:n},{event:r,name:t})};debounceTimer&&clearTimeout(debounceTimer),n?debounceTimer=setTimeout(e):e()}}}function keypressEventHandler(){return function(t){var n;try{n=t.target}catch(t){return}var r=n&&n.tagName;r&&("INPUT"===r||"TEXTAREA"===r||n.isContentEditable)&&(keypressTimeout||breadcrumbEventHandler("input")(t),clearTimeout(keypressTimeout),keypressTimeout=setTimeout(function(){keypressTimeout=void 0},debounceDuration))}}function _htmlTreeAsString(t){for(var n,r=t,e=[],i=0,o=0,u=" > ".length;r&&i++<5&&!("html"===(n=_htmlElementAsString(r))||i>1&&o+e.length*u+n.length>=80);)e.push(n),o+=n.length,r=r.parentNode;return e.reverse().join(" > ")}function _htmlElementAsString(t){var n,r,e,i,o,u=[];if(!t||!t.tagName)return"";if(u.push(t.tagName.toLowerCase()),t.id&&u.push("#"+t.id),(n=t.className)&&isString(n))for(r=n.split(/\s+/),o=0;o<r.length;o++)u.push("."+r[o]);var a=["type","name","title","alt"];for(o=0;o<a.length;o++)e=a[o],(i=t.getAttribute(e))&&u.push("["+e+'="'+i+'"]');return u.join("")}var GlobalHandlers=function(){function t(n){this.name=t.id,this.it=__assign({onerror:!0,onunhandledrejection:!0},n)}return t.prototype.setupOnce=function(){Error.stackTraceLimit=50,_subscribe(function(n,r,e){if(!shouldIgnoreOnError()){var i=getCurrentHub().getIntegration(t);i&&getCurrentHub().captureEvent(i.kt(n),{data:{stack:n},originalException:e})}}),this.it.onerror&&(logger.log("Global Handler attached: onerror"),_installGlobalHandler()),this.it.onunhandledrejection&&(logger.log("Global Handler attached: onunhandledrejection"),_installGlobalUnhandledRejectionHandler())},t.prototype.kt=function(t){if(!isString(t.message)&&"onunhandledrejection"!==t.mechanism){var n=t.message;t.message=n.error&&isString(n.error.message)?n.error.message:"No error message"}var r=eventFromStacktrace(t),e={mode:t.mode};t.message&&(e.message=t.message),t.name&&(e.name=t.name);var i=getCurrentHub().getClient(),o=i&&i.getOptions().maxValueLength||250;return addExceptionTypeValue(r,t.original?truncate(JSON.stringify(normalize(t.original)),o):"","onunhandledrejection"===t.mechanism?"UnhandledRejection":"Error",{data:e,handled:!1,type:t.mechanism}),r},t.id="GlobalHandlers",t}(),TryCatch=function(){function t(){this.Ht=0,this.name=t.id}return t.prototype.At=function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var e=n[0];return n[0]=wrap(e,{mechanism:{data:{function:getFunctionName(t)},handled:!0,type:"instrument"}}),t.apply(this,n)}},t.prototype.Dt=function(t){return function(n){return t(wrap(n,{mechanism:{data:{function:"requestAnimationFrame",handler:getFunctionName(t)},handled:!0,type:"instrument"}}))}},t.prototype.Mt=function(t){var n=getGlobalObject(),r=n[t]&&n[t].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(fill(r,"addEventListener",function(n){return function(r,e,i){try{"function"==typeof e.handleEvent&&(e.handleEvent=wrap(e.handleEvent.bind(e),{mechanism:{data:{function:"handleEvent",handler:getFunctionName(e),target:t},handled:!0,type:"instrument"}}))}catch(t){}return n.call(this,r,wrap(e,{mechanism:{data:{function:"addEventListener",handler:getFunctionName(e),target:t},handled:!0,type:"instrument"}}),i)}}),fill(r,"removeEventListener",function(t){return function(n,r,e){var i=r;try{i=i&&(i.__sentry_wrapped__||i)}catch(t){}return t.call(this,n,i,e)}}))},t.prototype.setupOnce=function(){this.Ht=this.Ht;var t=getGlobalObject();fill(t,"setTimeout",this.At.bind(this)),fill(t,"setInterval",this.At.bind(this)),fill(t,"requestAnimationFrame",this.Dt.bind(this)),["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"].forEach(this.Mt.bind(this))},t.id="TryCatch",t}();function getFunctionName(t){try{return t&&t.name||"<anonymous>"}catch(t){return"<anonymous>"}}var global$3=getGlobalObject(),lastHref,Breadcrumbs=function(){function t(n){this.name=t.id,this.it=__assign({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},n)}return t.prototype.$t=function(){"console"in global$3&&["debug","info","warn","error","log","assert"].forEach(function(n){n in global$3.console&&fill(global$3.console,n,function(r){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o={category:"console",data:{extra:{arguments:normalize(e,3)},logger:"console"},level:exports.Severity.fromString(n),message:safeJoin(e," ")};"assert"===n&&!1===e[0]&&(o.message="Assertion failed: "+(safeJoin(e.slice(1)," ")||"console.assert"),o.data.extra.arguments=normalize(e.slice(1),3)),t.addBreadcrumb(o,{input:e,level:n}),r&&Function.prototype.apply.call(r,global$3.console,e)}})})},t.prototype.Bt=function(){"document"in global$3&&(global$3.document.addEventListener("click",breadcrumbEventHandler("click"),!1),global$3.document.addEventListener("keypress",keypressEventHandler(),!1),["EventTarget","Node"].forEach(function(t){var n=global$3[t]&&global$3[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(fill(n,"addEventListener",function(t){return function(n,r,e){return r&&r.handleEvent?("click"===n&&fill(r,"handleEvent",function(t){return function(n){return breadcrumbEventHandler("click")(n),t.call(this,n)}}),"keypress"===n&&fill(r,"handleEvent",function(t){return function(n){return keypressEventHandler()(n),t.call(this,n)}})):("click"===n&&breadcrumbEventHandler("click",!0)(this),"keypress"===n&&keypressEventHandler()(this)),t.call(this,n,r,e)}}),fill(n,"removeEventListener",function(t){return function(n,r,e){var i=r;try{i=i&&(i.__sentry_wrapped__||i)}catch(t){}return t.call(this,n,i,e)}}))}))},t.prototype.Gt=function(){supportsNativeFetch()&&fill(global$3,"fetch",function(n){return function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var i,o=r[0],u="GET";"string"==typeof o?i=o:"Request"in global$3&&o instanceof Request?(i=o.url,o.method&&(u=o.method)):i=String(o),r[1]&&r[1].method&&(u=r[1].method);var a=getCurrentHub().getClient(),s=a&&a.getDsn(),c=a&&a.getOptions(),f=c&&c.rpurl;if(s){var l=new API(s,f).getStoreEndpoint();if(l&&i.includes(l))return"POST"===u&&r[1]&&r[1].body&&addSentryBreadcrumb(decodeURIComponent(r[1].body)),n.apply(global$3,r)}var h={method:u,url:i};return n.apply(global$3,r).then(function(n){return h.status_code=n.status,t.addBreadcrumb({category:"fetch",data:h,type:"http"},{input:r,response:n}),n}).catch(function(n){throw t.addBreadcrumb({category:"fetch",data:h,level:exports.Severity.Error,type:"http"},{error:n,input:r}),n})}})},t.prototype.Lt=function(){var n=this;if(supportsHistory()){var r=function(n,r){var e=parseUrl(global$3.location.href),i=parseUrl(r),o=parseUrl(n);o.path||(o=e),lastHref=r,e.protocol===i.protocol&&e.host===i.host&&(r=i.relative),e.protocol===o.protocol&&e.host===o.host&&(n=o.relative),t.addBreadcrumb({category:"navigation",data:{from:n,to:r}})},e=global$3.onpopstate;global$3.onpopstate=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var o=global$3.location.href;if(r(lastHref,o),e)return e.apply(n,t)},fill(global$3.history,"pushState",i),fill(global$3.history,"replaceState",i)}function i(t){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var i=n.length>2?n[2]:void 0;return i&&r(lastHref,String(i)),t.apply(this,n)}}},t.prototype.zt=function(){if("XMLHttpRequest"in global$3){var n=XMLHttpRequest.prototype;fill(n,"open",function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var e=n[1];this.__sentry_xhr__={method:n[0],url:n[1]};var i=getCurrentHub().getClient(),o=i&&i.getDsn(),u=i&&i.getOptions(),a=u&&u.rpurl;if(o){var s=new API(o,a).getStoreEndpoint();isString(e)&&s&&e.includes(s)&&(this.__sentry_own_request__=!0)}return t.apply(this,n)}}),fill(n,"send",function(n){return function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var i=this;function o(){if(4===i.readyState){if(i.__sentry_own_request__)return;try{i.__sentry_xhr__&&(i.__sentry_xhr__.status_code=i.status)}catch(t){}t.addBreadcrumb({category:"xhr",data:i.__sentry_xhr__,type:"http"},{xhr:i})}}return i.__sentry_own_request__&&addSentryBreadcrumb(decodeURIComponent(r[0])),["onload","onerror","onprogress"].forEach(function(t){!function(t,n){t in n&&"function"==typeof n[t]&&fill(n,t,function(n){return wrap(n,{mechanism:{data:{function:t,handler:n&&n.name||"<anonymous>"},handled:!0,type:"instrument"}})})}(t,i)}),"onreadystatechange"in i&&"function"==typeof i.onreadystatechange?fill(i,"onreadystatechange",function(t){return wrap(t,{mechanism:{data:{function:"onreadystatechange",handler:t&&t.name||"<anonymous>"},handled:!0,type:"instrument"}},o)}):i.onreadystatechange=o,n.apply(this,r)}})}},t.addBreadcrumb=function(n,r){getCurrentHub().getIntegration(t)&&getCurrentHub().addBreadcrumb(n,r)},t.prototype.setupOnce=function(){this.it.console&&this.$t(),this.it.dom&&this.Bt(),this.it.xhr&&this.zt(),this.it.fetch&&this.Gt(),this.it.history&&this.Lt()},t.id="Breadcrumbs",t}();function addSentryBreadcrumb(t){try{addBreadcrumbs(t)}catch(r){if(-1!==r.toString().indexOf("SyntaxError")){var n=decodeQueryStringData(t);addBreadcrumbs(decodeURIComponent(base64_1.atob(n.sk)))}else logger.error("Error while adding sentry type breadcrumb")}}function addBreadcrumbs(t){var n=JSON.parse(t);Breadcrumbs.addBreadcrumb({category:"sentry",event_id:n.event_id,level:n.level||exports.Severity.fromString("error"),message:getEventDescription(n)},{event:n})}function decodeQueryStringData(t){var n={};return t.split("&").forEach(function(t){var r=t.split("=");n[r[0]]=r[1]}),n}var DEFAULT_KEY="cause",DEFAULT_LIMIT=5,LinkedErrors=function(){function t(n){void 0===n&&(n={}),this.name=t.id,this.Kt=n.key||DEFAULT_KEY,this.s=n.limit||DEFAULT_LIMIT}return t.prototype.setupOnce=function(){addGlobalEventProcessor(function(n,r){var e=getCurrentHub().getIntegration(t);return e?e.qt(n,r):n})},t.prototype.qt=function(t,n){if(!(t.exception&&t.exception.values&&n&&n.originalException instanceof Error))return t;var r=this.Vt(n.originalException,this.Kt);return t.exception.values=__spread(r,t.exception.values),t},t.prototype.Vt=function(t,n,r){if(void 0===r&&(r=[]),!(t[n]instanceof Error)||r.length+1>=this.s)return r;var e=exceptionFromStacktrace(_computeStackTrace(t[n]));return this.Vt(t[n],n,__spread([e],r))},t.id="LinkedErrors",t}(),global$4=getGlobalObject(),UserAgent=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){addGlobalEventProcessor(function(n){if(getCurrentHub().getIntegration(t)){if(!global$4.navigator||!global$4.location)return n;var r=n.request||{};return r.url=r.url||global$4.location.href,r.headers=r.headers||{},r.headers["User-Agent"]=global$4.navigator.userAgent,__assign({},n,{request:r})}return n})},t.id="UserAgent",t}(),BrowserIntegrations=Object.freeze({GlobalHandlers:GlobalHandlers,TryCatch:TryCatch,Breadcrumbs:Breadcrumbs,LinkedErrors:LinkedErrors,UserAgent:UserAgent}),defaultIntegrations=[new InboundFilters,new FunctionToString,new TryCatch,new Breadcrumbs,new GlobalHandlers,new LinkedErrors,new UserAgent];function init(t){if(void 0===t&&(t={}),void 0===t.defaultIntegrations&&(t.defaultIntegrations=defaultIntegrations),void 0===t.release){var n=getGlobalObject();n.SENTRY_RELEASE&&n.SENTRY_RELEASE.id&&(t.release=n.SENTRY_RELEASE.id)}initAndBind(BrowserClient,t)}function showReportDialog(t){void 0===t&&(t={}),t.eventId||(t.eventId=getCurrentHub().lastEventId());var n=getCurrentHub().getClient();n&&n.showReportDialog(t)}function lastEventId(){return getCurrentHub().lastEventId()}function forceLoad(){}function onLoad(t){t()}function flush(t){var n=getCurrentHub().getClient();return n?n.flush(t):Promise.reject(!1)}function close(t){var n=getCurrentHub().getClient();return n?n.close(t):Promise.reject(!1)}function wrap$1(t){wrap(t)()}var windowIntegrations={},_window=getGlobalObject();_window.Sentry&&_window.Sentry.Integrations&&(windowIntegrations=_window.Sentry.Integrations);var INTEGRATIONS=__assign({},windowIntegrations,CoreIntegrations,BrowserIntegrations);return exports.BrowserClient=BrowserClient,exports.Hub=Hub,exports.Integrations=INTEGRATIONS,exports.SDK_NAME=SDK_NAME,exports.SDK_VERSION=SDK_VERSION,exports.Scope=Scope,exports.Span=Span,exports.Transports=index,exports.addBreadcrumb=addBreadcrumb,exports.addGlobalEventProcessor=addGlobalEventProcessor,exports.captureEvent=captureEvent,exports.captureException=captureException,exports.captureMessage=captureMessage,exports.close=close,exports.configureScope=configureScope,exports.defaultIntegrations=defaultIntegrations,exports.flush=flush,exports.forceLoad=forceLoad,exports.getCurrentHub=getCurrentHub,exports.getHubFromCarrier=getHubFromCarrier,exports.init=init,exports.lastEventId=lastEventId,exports.onLoad=onLoad,exports.setContext=setContext,exports.setExtra=setExtra,exports.setExtras=setExtras,exports.setTag=setTag,exports.setTags=setTags,exports.setUser=setUser,exports.showReportDialog=showReportDialog,exports.withScope=withScope,exports.wrap=wrap$1,exports}({});
//# sourceMappingURL=bundle.min.js.map
