(window.HUYA_MAIN_APP_WEBPACK_JSONP=window.HUYA_MAIN_APP_WEBPACK_JSONP||[]).push([[354],{1210:function(e,t,o){"use strict";var n=o(285),r=o.n(n),a=o(28),c=o.n(a),i=o(290),s=o(447),m=o(445),l=o(446),d=o(448),u=o(449),p=o(450),b=o(4),f=o(315),g=o(367),h=o(362),v=o(308),k=o(313),Z=o(295),y=o(303),E=o(304),j=o(1216),x=o.n(j);function T(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||U(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==o)return;var n,r,a=[],c=!0,i=!1;try{for(o=o.call(e);!(c=(n=o.next()).done)&&(a.push(n.value),!t||a.length!==t);c=!0);}catch(e){i=!0,r=e}finally{try{c||null==o.return||o.return()}finally{if(i)throw r}}return a}(e,t)||U(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){if(e){if("string"==typeof e)return z(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?z(e,t):void 0}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var J=f.a.userMomentList;function O(){var e=Object(Z.d)(),t=Object(a.useContext)(y.c),o=C(Object(k.a)(),3),n=(o[0],o[1],o[2]),r=Object(a.useRef)(null),m=C(Object(a.useState)(!1),2),l=m[0],j=m[1],U=C(Object(a.useState)(T(J.moments)),2),z=U[0],O=U[1],w=Object(E.a)();Object(a.useState)((function(){w({eid:"usr/pageshow/mypostlist/community",eid_desc:"赛事社区/我的帖子列表/曝光"})})),Object(a.useEffect)((function(){function e(e){switch(e){case"append":case"insert":case"remove":O(T(J.moments));break;case"reload":O(T(J.moments)),r.current.scrollTop=0}}return J.on("change",e),function(){return J.off("change",e)}}),[]);var S=Object(b.throttle)((function(){if(!l&&-2!=J.seed){var e=r.current;(e.scrollTop+e.clientHeight)/e.scrollHeight>.8&&(j(!0),J.loadRemainingComments().catch((function(e){i.default.error({text:"加载失败：".concat(e.message),container:document.getElementById("J_MatchCommunity_notice_".concat(t))})})).then((function(){return j(!1)})))}}),200),F=Object(a.useCallback)((function(e,t){n(v.a.DETAIL,{mid:e,isFoucs:t}),w({eid:"usr/click/mypostlist/community/".concat(e),eid_desc:"赛事社区/点击/我的帖子列表的帖子/".concat(e)}),w({eid:"usr/pageshow/postdetail/community/".concat(e),eid_desc:"赛事社区/帖子详情/曝光/".concat(e)})}),[w]),B=Object(a.useCallback)((function(e){f.a.removeMoment(e),w({eid:"usr/click/mypostlistdelect/community/".concat(e.momId),eid_desc:"赛事社区/点击/删除我的帖子/".concat(e.momId)})}),[w]),G=Object(a.useCallback)((function(){return n(v.a.EDIT)}),[]),K=Object(a.useMemo)((function(){return z.map((function(e){return c.a.createElement("div",{className:x.a.item,key:"moment-".concat(e.momId)},c.a.createElement(s.a,{moment:e,voteModel:g.a.createVote(e.voteInfo),favorModel:h.a.createFavor(e),onClick:F,onRemove:B}))}))}),[z,F]);return c.a.createElement("div",{className:x.a.list,ref:r,onWheel:function(e){e.stopPropagation(),S()}},K.length>0&&K,K.length>0&&l&&c.a.createElement(u.a,{theme:e}),K.length>0&&-2==J.seed&&c.a.createElement(p.a,{theme:e}),0==K.length&&c.a.createElement("div",{className:x.a.empty},c.a.createElement(d.a,{msg:"你还没有帖子"}),c.a.createElement("span",{className:x.a["post-btn"],onClick:G},"发个帖子")))}t.a=function(){var e=Object(Z.d)(),t=C(Object(k.a)(),3),o=t[0],n=(t[1],t[2],C(Object(a.useState)(""),2)),i=n[0],s=n[1],d=C(Object(a.useState)(null),2),u=d[0],p=d[1];return Object(a.useEffect)((function(){o==v.a.MINE&&""==i&&(0==J.seed?(s("pending"),J.loadRemainingComments().then((function(e){s("resolved")})).catch((function(e){s("rejected"),p(e)}))):s("resolved"))}),[o,i]),c.a.createElement("div",{className:r()(x.a.moments,x.a[e])},"pending"==i&&c.a.createElement("div",{className:r()(x.a["load-pending"],x.a[e])},c.a.createElement(l.a.Cover,null)),u&&c.a.createElement("div",{className:r()(x.a["load-err"],x.a[e])},c.a.createElement(m.a,{msg:u.message})),"resolved"==i&&c.a.createElement(O,null))}},1216:function(e,t,o){var n=o(1217);"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};o(287)(n,r);n.locals&&(e.exports=n.locals)},1217:function(e,t,o){(t=o(286)(!1)).push([e.i,".moments--EZ1FTGKouJpU9kcjZT104{position:relative;height:100%;margin-right:2px;border-radius:6px;color:#444;font-size:12px}.moments--EZ1FTGKouJpU9kcjZT104.dark--BJfMr-zC79X9kZ3C4h9bx{padding-top:5px;box-sizing:border-box;background:transparent}.moments--EZ1FTGKouJpU9kcjZT104.dark--BJfMr-zC79X9kZ3C4h9bx .list--29iCU0BvBXW2gEDzVefoYC::-webkit-scrollbar-thumb{background-color:rgba(100,100,100,0.8)}.moments--EZ1FTGKouJpU9kcjZT104.dark--BJfMr-zC79X9kZ3C4h9bx .list--29iCU0BvBXW2gEDzVefoYC .item--12ZMszxnz9-W3fvI5bhvGw{margin-bottom:5px;padding:10px;border-radius:5px;background:rgba(0,0,0,0.8)}.moments--EZ1FTGKouJpU9kcjZT104.dark--BJfMr-zC79X9kZ3C4h9bx .list--29iCU0BvBXW2gEDzVefoYC .item--12ZMszxnz9-W3fvI5bhvGw:last-child{margin-bottom:0}.moments--EZ1FTGKouJpU9kcjZT104.light--2vtLtC74pSCj0R3QObh-IQ{background:#fff}.moments--EZ1FTGKouJpU9kcjZT104.light--2vtLtC74pSCj0R3QObh-IQ .item--12ZMszxnz9-W3fvI5bhvGw{padding:10px 0;margin-left:10px;border-top:1px solid rgba(151,151,151,0.2)}.moments--EZ1FTGKouJpU9kcjZT104.light--2vtLtC74pSCj0R3QObh-IQ .item--12ZMszxnz9-W3fvI5bhvGw:first-child{border-top:none}.moments--EZ1FTGKouJpU9kcjZT104 .list--29iCU0BvBXW2gEDzVefoYC{padding-right:4px;width:100%;height:100%;overflow-y:auto;overflow-x:hidden;box-sizing:border-box}.moments--EZ1FTGKouJpU9kcjZT104 .list--29iCU0BvBXW2gEDzVefoYC::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.moments--EZ1FTGKouJpU9kcjZT104 .list--29iCU0BvBXW2gEDzVefoYC::-webkit-scrollbar{width:8px;background-color:transparent}.moments--EZ1FTGKouJpU9kcjZT104 .list--29iCU0BvBXW2gEDzVefoYC::-webkit-scrollbar-thumb{border-radius:10px;background-color:#ccc}.moments--EZ1FTGKouJpU9kcjZT104 .load-pending--2M2o7cfNdtPdYgrdy0YPy-{width:100%;height:100%;border-radius:6px}.moments--EZ1FTGKouJpU9kcjZT104 .load-pending--2M2o7cfNdtPdYgrdy0YPy-.dark--BJfMr-zC79X9kZ3C4h9bx{background-color:rgba(0,0,0,0.8)}.moments--EZ1FTGKouJpU9kcjZT104 .load-err--1oWKjNZjH0yf428nvEcSz2{width:100%;height:100%;padding-top:20px;box-sizing:border-box;border-radius:6px}.moments--EZ1FTGKouJpU9kcjZT104 .load-err--1oWKjNZjH0yf428nvEcSz2.dark--BJfMr-zC79X9kZ3C4h9bx{background-color:rgba(0,0,0,0.8)}.moments--EZ1FTGKouJpU9kcjZT104.dark--BJfMr-zC79X9kZ3C4h9bx .empty--261AeUOY9-v20yVWxq-Q7g{background-color:rgba(0,0,0,0.8)}.moments--EZ1FTGKouJpU9kcjZT104 .empty--261AeUOY9-v20yVWxq-Q7g{width:100%;height:100%;padding-top:20px;text-align:center;box-sizing:border-box;border-radius:6px}.moments--EZ1FTGKouJpU9kcjZT104 .empty--261AeUOY9-v20yVWxq-Q7g .post-btn--2u87TSLaXmXSmkFhpeqP4Z{margin-top:20px}.moments--EZ1FTGKouJpU9kcjZT104 .post-btn--2u87TSLaXmXSmkFhpeqP4Z{display:inline-block;width:120px;line-height:32px;font-size:14px;color:#fff;background:#ff9600;border-radius:16px;cursor:pointer}.moments--EZ1FTGKouJpU9kcjZT104 .post-btn--2u87TSLaXmXSmkFhpeqP4Z:hover{opacity:0.8}\n",""]),t.locals={moments:"moments--EZ1FTGKouJpU9kcjZT104",dark:"dark--BJfMr-zC79X9kZ3C4h9bx",list:"list--29iCU0BvBXW2gEDzVefoYC",item:"item--12ZMszxnz9-W3fvI5bhvGw",light:"light--2vtLtC74pSCj0R3QObh-IQ","load-pending":"load-pending--2M2o7cfNdtPdYgrdy0YPy-","load-err":"load-err--1oWKjNZjH0yf428nvEcSz2",empty:"empty--261AeUOY9-v20yVWxq-Q7g","post-btn":"post-btn--2u87TSLaXmXSmkFhpeqP4Z"},e.exports=t}}]);