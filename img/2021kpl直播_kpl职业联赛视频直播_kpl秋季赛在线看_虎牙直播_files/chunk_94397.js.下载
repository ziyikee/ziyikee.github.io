(window.HUYA_MAIN_APP_WEBPACK_JSONP=window.HUYA_MAIN_APP_WEBPACK_JSONP||[]).push([[85],{415:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Editor=e.ElementType=void 0;var i,o=n(12),r=(0,o.__importDefault)(n(19)),s=n(4),c=(0,o.__importDefault)(n(961));!function(t){t.Text="text",t.Emoticon="emoticon"}(i=e.ElementType||(e.ElementType={}));var u=function(t){function e(e){var n=void 0===e?{}:e,i=n.parser,o=void 0===i?[]:i,r=n.inputElement,u=void 0===r?new c.default:r,a=n.text,l=void 0===a?"":a,p=t.call(this)||this;return p.content="",p.elements=[],p.range=[],p.parserList=[].concat(o),p.inputElement=u,p.throttleInput=(0,s.throttle)(p.input.bind(p),60),p.handle(l),p}return(0,o.__extends)(e,t),e.parse=function(t,e){var n=""+t,o=""===n?[]:[n];o.length>0&&[].concat(e).reverse().forEach((function(t){var e=[];o.forEach((function(n){"string"==typeof n?e.push.apply(e,function(t,e){var n=e.type,i=e.matcher,o=t.split(i),r=[];return o.forEach((function(t,e){1&e?r.push({type:n,content:t}):t&&r.push(t)})),r}(n,t)):e.push(n)})),o=e}));var r=0,s="",c=[];return[o.map((function(t){var e;if("string"==typeof t)e={type:i.Text,content:t,range:[r,r+t.length]};else{var n=t.type,o=t.content;e={type:n,content:o,range:[r,r+o.length]}}return s+=e.content,r=s.length,c.push(r),e})),s,c]},e.prototype.setInputElement=function(t){t&&(this.inputElement=t)},e.prototype.input=function(t){this.throttleInput.cancel();var e=""+t;this.handle(e),this.emit("input"),this.emit("change")},e.prototype.insert=function(t){var e=""+t,n=this.content,i=this.inputElement.getSelectionRange(),o=i[0],r=i[1],s=Math.max(0,Math.min(n.length,o)),c=Math.max(0,Math.min(n.length,r)),u=n.slice(0,s),a=n.slice(c),l=s+e.length;this.handle(""+u+e+a),this.emit("insert",e),this.emit("change"),this.emit("selectionchange",[l,l])},e.prototype.elementOf=function(t){if("number"==typeof t&&!isNaN(t)&&t!==1/0)return this.elements.find((function(e){var n=e.range,i=n[0],o=n[1];return i<t&&t<o}))},e.prototype.elementFilter=function(t){return this.elements.filter((function(e){return e.type===t}))},e.prototype.handle=function(t){var n=e.parse(t,this.parserList),i=n[0],o=n[1],r=n[2];this.elements=i,this.content=o,this.range=r},e}(r.default);e.Editor=u},961:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.selectionStart=0,this.selectionEnd=0}return t.prototype.getSelectionRange=function(){return[this.selectionStart,this.selectionEnd]},t.prototype.setSelectionRange=function(t,e){this.selectionStart=t,this.selectionEnd=e},t}();e.default=i}}]);