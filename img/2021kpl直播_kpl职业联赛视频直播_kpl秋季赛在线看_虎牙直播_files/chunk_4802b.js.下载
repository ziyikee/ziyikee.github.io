(window.HUYA_MAIN_APP_WEBPACK_JSONP=window.HUYA_MAIN_APP_WEBPACK_JSONP||[]).push([[361],{1248:function(e,t,a){"use strict";var n=a(28),l=a.n(n),c=a(285),o=a.n(c),r=a(294);function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a=function(e){var t,a=Object(n.useCallback)((function(){r.default.open({uid:e.uid,muteText:"上电视: ".concat(e.msg)})}),[e.uid]);return l.a.createElement("div",{className:o()("msg-onTVLottery",(t={},s(t,"box-noble box-noble-level-".concat(e.nobleLevel),e.nobleLevel>0),s(t,"legendary",e.nobleLevel>0&&e.isLegendary),t))},l.a.createElement("span",{className:"fansBadgeLogo",dangerouslySetInnerHTML:{__html:e.fansLabel}}),l.a.createElement("span",{className:"name",title:"点击查看个人信息",onClick:a},e.nickName),l.a.createElement("span",{className:"colon"},":"),l.a.createElement("div",{className:"msg-onTVLottery-text",style:{color:e.color,borderColor:e.color}},l.a.createElement("span",{className:"msg"},!!e.msgIcon&&l.a.createElement("i",{className:"msg-icon_diy"},l.a.createElement("img",{className:"msg-icon_diy-img",src:TT.trimUrl(e.msgIcon),width:"18",height:"18"})),!e.msgIcon&&l.a.createElement("i",{className:"tvIcon-tvFace msg-icon"}),e.msg)))}},1429:function(e,t,a){"use strict";var n=a(292),l=a(285),c=a.n(l);var o=Object(n.d)((function(e,t){return{isDiy:e.panelInfo.isDiy,diyInfo:e.panelInfo.diyInfo}}))((function(e){return e.isDiy?React.createElement("style",{dangerouslySetInnerHTML:{__html:(t=e.diyInfo.specialUI,a="",t.web_bg&&(a+=".onTVLottery-panel.special.send {\n                background: url(".concat(TT.trimUrl(t.web_bg),") no-repeat center center;\n                border: 0;\n                padding: 2px;\n            }")),t.web_title&&(a+=".onTVLottery-panel.special.send .onTVLottery-title, .onTVLottery-panel.special.result .onTVLottery-title{\n                background: url(".concat(TT.trimUrl(t.web_title),") no-repeat center center;\n            }")),t.web_close_button&&(a+=".onTVLottery-panel.special.send .onTVLottery-close, .onTVLottery-panel.special.result .onTVLottery-close {\n                background: url(".concat(TT.trimUrl(t.web_close_button),") no-repeat left top;\n            }")),t.web_theme_bg&&(a+=".onTVLottery-panel.special.send .onTVLottery-send .send-theme{\n                background: url(".concat(TT.trimUrl(t.web_theme_bg),") no-repeat;\n            }\n            \n            .onTVLottery-panel.special.send .onTVLottery-send .theme-result{\n                bottom: 7px;\n            }")),t.noprize_font_color&&(a+=".onTVLottery-panel.special.send .onTVLottery-send .detail-msg{\n                color: ".concat(t.noprize_font_color,";\n            }\n            \n            .onTVLottery-panel.special.send .onTVLottery-send .theme-result{\n                color: ").concat(t.noprize_font_color,";\n            }\n            \n            .onTVLottery-panel.special.send .onTVLottery-send .send-mid{\n                color: ").concat(t.noprize_font_color,";\n            }\n            \n            .onTVLottery-panel.special.send .onTVLottery-rule{\n                color: ").concat(t.noprize_font_color,";\n            }")),t.prize_font_color?a+=".onTVLottery-panel.special.send .onTVLottery-send .detail-msg .tips-gift{\n                color: ".concat(t.prize_font_color,";\n            }\n            \n            .onTVLottery-panel.special.send .onTVLottery-send .detail-msg .theme-gift{\n                color: ").concat(t.prize_font_color,";\n            }"):a+=".onTVLottery-panel.special.send .onTVLottery-send .detail-msg .tips-gift{\n                color: #ff8427;\n            }\n            \n            .onTVLottery-panel.special.send .onTVLottery-send .detail-msg .theme-gift{\n                color: #7A0B04;\n            }",a)}}):"";var t,a})),r=a(291),s=a(307),i=a(160),m=a.n(i);var f=Object(n.d)((function(e,t){return{panelInfo:e.panelInfo,playerInfo:e.playerInfo}}))((function(e){return React.createElement("div",{className:"send-theme"},React.createElement("div",{className:"theme-detail"},React.createElement("div",{className:"anchor-img"},React.createElement("img",{className:"img-head",src:TT.trimUrl(e.panelInfo.info.anchorLogo),onError:function(e){event.target.onError=null,event.target.src=m.a}})),function(){if(e.panelInfo.info.mode==r.b.MODE_Stalk)return React.createElement("div",{className:"detail-msg"},React.createElement("p",{className:"msg-theme"},"主播将送出 ",React.createElement("span",{className:"theme-gift"},HUYA_UTIL.unescape(e.panelInfo.info.award.name)," x",e.panelInfo.info.award.amount)),React.createElement("p",{className:"msg-tips"},React.createElement("span",{className:"tips-meme"},"梗上电视"),"发弹幕参与上电视"));if(e.panelInfo.info.mode==r.b.MODE_GIFT){var t="tips-fans_all",a="所有人可参与";return e.panelInfo.info.partic==r.c.PARTIC_FANS?(t="tips-fans_fans",a="仅粉丝可参与"):e.panelInfo.info.partic==r.c.PARTIC_SUB&&(t="tips-fans_follow",a="订阅者可参与"),React.createElement("div",{className:"detail-msg"},React.createElement("p",{className:"msg-theme"},"主播将送出 ",React.createElement("span",{className:"theme-gift"},HUYA_UTIL.unescape(e.panelInfo.info.award.name)," x",e.panelInfo.info.award.amount)),React.createElement("p",{className:"msg-tips"},e.panelInfo.info.partic!=r.c.PARTIC_SFANS?React.createElement("span",{className:"tips-fans "+t},a):React.createElement("span",{className:"tips-superFans"}),"发弹幕参与上电视"))}return React.createElement("div",{className:"detail-msg"},React.createElement("p",{className:"msg-theme"},e.panelInfo.info.partic==r.c.PARTIC_FANS?React.createElement("span",{className:"tips-fans tips-fans_fans"},"仅粉丝可参与"):e.panelInfo.info.partic==r.c.PARTIC_SFANS?React.createElement("span",{className:"tips-superFans"}):void 0,HUYA_UTIL.unescape(e.panelInfo.info.title||" ")),React.createElement("p",{className:"msg-tips"},(e.panelInfo.info.mode,r.b.MODE_MANUAL,"主播"),"将选中",e.panelInfo.info.award.amount,"条优质弹幕送出",React.createElement("span",{className:"tips-gift"},HUYA_UTIL.unescape(e.panelInfo.info.award.name))))}()),e.panelInfo.info.mode==r.b.MODE_MANUAL?React.createElement("p",{className:"theme-result"},"主播已收到 ",React.createElement("span",{className:"result-total"},e.panelInfo.info.receivedAmount)," 条弹幕，",React.createElement("span",{className:"result-send"},e.playerInfo.sentAmount>0?"我已发出 "+e.playerInfo.sentAmount+" 条":"快来参与吧~")):React.createElement("p",{className:"theme-result"},"还剩 ",Object(s.c)(e.panelInfo.info.leftTime)," 秒"))})),p=a(321),u=a(74),d=a(309);var g=Object(n.d)((function(e,t){return{anchorInfo:e.anchorInfo,panelInfo:e.panelInfo,playerInfo:e.playerInfo}}),(function(e,t){return{showDialog:function(t){e(Object(d.c)(t))}}}))((function(e){function t(){var t=e.anchorInfo,a=e.playerInfo,n=u.CustomFansBadge.getCustomBadgeAssets(a.iCustomBadgeFlag,{lBadgeId:t.badge.id,iBadgeLevel:a.fansLevel,tSuperFansInfo:{iSFFlag:a.isSuperFans}});return n?p.a.createCustom(a.fansLevel,t.badge.name,t.badge.id,a.isSuperFans,n):p.a.create(a.fansLevel,t.badge.name,t.badge.id,t.badge.type,a.isSuperFans)}return React.createElement("div",{className:"send-mid"},"选择套餐",React.createElement("div",{className:"player-package"},e.panelInfo.info.mode===r.b.MODE_Stalk?null:e.panelInfo.info.partic===r.c.PARTIC_SUB?!e.playerInfo.follow&&React.createElement("span",{className:"package-fans",onClick:function(){Object(s.a)(!0)}},"订阅主播"):e.panelInfo.info.partic===r.c.PARTIC_SFANS?e.playerInfo.fansLevel?React.createElement("div",{dangerouslySetInnerHTML:{__html:"我的等级："+t()}}):React.createElement("span",{className:"package-fans",onClick:s.f},"成为超粉"):e.playerInfo.fansLevel?React.createElement("div",{dangerouslySetInnerHTML:{__html:"我的等级："+t()}}):React.createElement("span",{className:"package-fans",onClick:function(){var t;t="becomeFans",e.showDialog(t)}},"成为粉丝",e.panelInfo.info.mode!=r.b.MODE_GIFT?"，免费参与":"")))})),E=a(2),I=a(3),y=!0;var R=Object(n.d)((function(e,t){return{anchorInfo:e.anchorInfo,panelInfo:e.panelInfo,playerInfo:e.playerInfo}}),(function(e,t){return{inputChange:function(t){e(Object(d.l)(t))},sendMsg:function(t){return e(Object(d.o)(t))},showDialog:function(t){e(Object(d.c)(t))}}}))((function(e){function t(t){e.inputChange(t.target.value)}function a(e){13==e.keyCode&&n()}function n(){try{ya.reportProductEvent({eid:"click/onTVLottery/msg",eid_desc:"点击/上电视/弹幕",gameid:E.default.gid,ayyuid:I.default.lp})}catch(e){}TT.getUserInfo((function(t){if(!t.isLogined)return TTP.call("quitFullScreen"),void TT.login.login();var a=e.playerInfo,n=e.panelInfo,l=(n.info.mode,r.b.MODE_MANUAL,"主播");if(t.uid!=I.default.lp)if(n.state==r.d.STATE_START)if(a.sentAmount>=10&&n.info.mode==r.b.MODE_MANUAL)Object(s.h)(React.createElement(React.Fragment,null,"最多发10条弹幕～"));else if(n.info.mode!=r.b.MODE_GIFT){if(n.info.partic==r.c.PARTIC_SFANS&&a.tvColor>=6&&a.isSuperFans<r.a.YEAR)return e.showDialog("superFansYear");if(n.info.partic==r.c.PARTIC_FANS&&a.isSuperFans<r.a.TRUE){if(a.tvColor>=1&&a.tvColor<6&&a.fansLevel<4)return e.showDialog("fansLevel4");if(a.tvColor>=6&&a.fansLevel<10)return e.showDialog("fansLevel10")}var c=a.msg;if(""==c&&(c=a.placeholder),y){y=!1,setTimeout((function(){y=!0}),1e3),c=Object(s.i)(c);var o={gameId:n.info.onTVId,userUid:t.uid,msg:c,tvColor:a.tvColor,tvType:a.tvType,price:Object(s.d)(e.panelInfo,e.playerInfo)};e.sendMsg(o).then((function(t){if(0==t.iRet){Object(s.h)(React.createElement(React.Fragment,null,"弹幕已收到~ ",React.createElement("br",null)," 稍候将会选出幸运观众！"));try{ya.reportProductEvent({eid:"click/onTVLottery/msgSuccess",eid_desc:"点击/上电视/弹幕发送成功",gameid:E.default.gid,ayyuid:I.default.lp})}catch(e){}}else 907==t.iRet?Object(s.h)(React.createElement(React.Fragment,null,"最多发10条弹幕～")):912==t.iRet?e.showDialog("recharge"):914==t.iRet?Object(s.h)(React.createElement(React.Fragment,null,l,"已经开始上电视",React.createElement("br",null),"下次早点哦～")):909==t.iRet&&Object(s.h)(React.createElement(React.Fragment,null,"发言太快了，请休息一下再发"))}))}else Object(s.h)("发言太快了~")}else Object(s.h)(React.createElement(React.Fragment,null,"本次为礼物上电视",React.createElement("br",null),"送出对应礼物才会参与上电视哦~"));else Object(s.h)(React.createElement(React.Fragment,null,l,"已经开始上电视",React.createElement("br",null),"下次早点哦～"));else e.showDialog("isAnchor")}))}return React.createElement("div",{className:"input-placeholder"},e.panelInfo.info.partic!=r.c.PARTIC_SFANS||e.playerInfo.isSuperFans?e.panelInfo.info.partic==r.c.PARTIC_FANS&&e.playerInfo.fansLevel<1?React.createElement("div",{className:"send-onTVMsg",onClick:function(){e.showDialog("becomeFans")}},"成为粉丝，免费上电视"):React.createElement("div",{className:"send-input",style:{borderColor:r.h[e.playerInfo.tvColor]}},e.panelInfo.isDiy&&e.panelInfo.diyInfo.msgIcon?React.createElement("span",{className:"input-tv input-tv_diy",style:{color:r.h[e.playerInfo.tvColor]}},React.createElement("i",{className:"tv-wire tvIcon-tvWire"}),React.createElement("img",{src:TT.trimUrl(e.panelInfo.diyInfo.msgIcon),width:"26",height:"26"})):React.createElement("span",{className:"input-tv",style:{color:r.h[e.playerInfo.tvColor]}},React.createElement("i",{className:"tv-wire tvIcon-tvWire"}),React.createElement("i",{className:"tv-face tvIcon-tvFace"})),React.createElement("input",{className:"input-box"+(e.playerInfo.price?"":" input-box_free"),type:"text",name:"",maxLength:"10",placeholder:e.playerInfo.placeholder,value:e.playerInfo.msg,style:{color:r.h[e.playerInfo.tvColor]},onChange:t,onKeyDown:a}),function(){var t=Object(s.d)(e.panelInfo,e.playerInfo);if(e.panelInfo.info.partic!==r.c.PARTIC_FANS&&e.panelInfo.info.partic!==r.c.PARTIC_SFANS&&t)return React.createElement("span",{className:"input-cost"},Object(s.b)(t),React.createElement("i",{className:"cost-bean"}),"/条")}(),React.createElement("span",{className:"input-send"+(e.panelInfo.state==r.d.STATE_RESULT?" off":""),onClick:n},"发送")):React.createElement("div",{className:"send-onTVMsg",onClick:s.f},"成为超粉，免费上电视"))}));function v(e){return React.createElement("li",{className:"tvIcon-tv tv-item tv-item_"+e.order+(e.tvIndex==e.tvColor?" on":""),onClick:function(){e.choiceTV(e.tvIndex,e.type)}},React.createElement("span",{className:"item-choice"}),e.type==r.e.TYPE_LARGE_COLOR?React.createElement("span",{className:"item-big"},"大"):"")}var T=Object(n.d)((function(e,t){return{panelInfo:e.panelInfo,playerInfo:e.playerInfo}}),(function(e,t){return{choiceTV:function(t,a){e(Object(d.p)({choice:t,type:a}))}}}))((function(e){return React.createElement(React.Fragment,null,React.createElement("div",{className:"send-tvList"},function(){if(e.panelInfo.isDiy&&e.panelInfo.diyInfo.ad)return e.panelInfo.diyInfo.adLink?React.createElement("a",{className:"tvAd",href:TT.trimUrl(e.panelInfo.diyInfo.adLink),target:"_blank"},React.createElement("img",{src:TT.trimUrl(e.panelInfo.diyInfo.ad),height:"50"})):React.createElement("img",{className:"tvAd",src:TT.trimUrl(e.panelInfo.diyInfo.ad),height:"50"})}(),function(){var t=e.playerInfo.tvColor,a=0;function n(n,l){for(var c=[],o=1;o<=l;o++)c.push(React.createElement(v,{order:o,key:a,tvIndex:a,tvColor:t,type:n,choiceTV:e.choiceTV})),a++;return c}return e.panelInfo.info.partic!=r.c.PARTIC_SFANS?e.panelInfo.info.tvQueue.map((function(e,t){return React.createElement("div",{className:"tvList-row tvList-row_"+(t+1),key:"tvList-row_"+(t+1)},React.createElement("div",{className:"tv-type"},React.createElement("span",{className:"type-name "+(e.forFree?"":"type-name_noFree")},e.typeName),e.forFree&&React.createElement("span",{className:"type-limit"},"超粉/",e.forFree+"级","免费")),React.createElement("ul",{className:"tv-list"},n(e.type,e.amount)))})):e.panelInfo.info.tvQueue_superFans.map((function(e,t){return React.createElement("div",{className:"tvList-row_superFans tvList-row_"+(t+1),key:"tvList-row_"+(t+1)},React.createElement("div",{className:"tv-type"},React.createElement("span",{className:"type-name type-name"+e.type}),React.createElement("span",{className:"type-limit"},e.type==r.a.TRUE?"超粉免费":"V年免费")),React.createElement("ul",{className:"tv-list"},n(e.type,e.amount)))}))}()),React.createElement(R,null))}));var N=Object(n.d)((function(e,t){return{panelInfo:e.panelInfo,playerInfo:e.playerInfo}}),(function(e,t){return{showDialog:function(t){e(Object(d.c)(t))}}}))((function(e){function t(){var t=e.panelInfo,a=e.playerInfo,n=t.info.pack[a.giftTVChoice],l=n.iItemId,c=n.iItemNum;Object(s.g)(l,c)}return React.createElement(React.Fragment,null,e.panelInfo.info.partic===r.c.PARTIC_SUB?e.playerInfo.follow?React.createElement("span",{className:"send-onTVMsg",onClick:t},"一键参与"):React.createElement("span",{className:"send-onTVMsg",onClick:function(){e.showDialog("follow")}},"订阅并参与"):e.panelInfo.info.partic===r.c.PARTIC_SFANS?e.playerInfo.isSuperFans?React.createElement("span",{className:"send-onTVMsg was",onClick:t},"一键参与"):React.createElement("span",{className:"send-onTVMsg not",onClick:s.f},"成为超粉"):e.panelInfo.info.partic===r.c.PARTIC_FANS&&e.playerInfo.fansLevel<1?React.createElement("span",{className:"send-onTVMsg",onClick:function(){e.showDialog("notFans")}},"一键参与"):React.createElement("span",{className:"send-onTVMsg",onClick:t},"一键参与"))})),b=a(34);function h(e){var t=b.giftShelfMap[e.info.iItemId]&&b.giftShelfMap[e.info.iItemId].vPropsIdentity.value[0],a=t?t.sPropsPic24.replace("&","?"):"";return React.createElement("li",{className:"tvList-item"+(e.giftTVChoice==e.order?" on":""),onClick:function(){e.choiceTV(e.order)}},React.createElement("span",{className:"item-choice"}),React.createElement("p",{className:"item-gift"},React.createElement("img",{className:"gift-icon",src:TT.trimUrl(a),width:"30",height:"30",onError:function(e){e.target.onError=null,e.target.src=m.a}})," x ",e.info.iItemNum),React.createElement("p",{className:"item-msg"},React.createElement("span",{className:"msg-cnt",style:{color:r.h[e.info.iTVColor],borderColor:r.h[e.info.iTVColor]}},e.isDiy&&e.diyInfo.msgIcon?React.createElement("img",{className:"msg-cnt_icon msg-cnt_icon-diy",src:TT.trimUrl(e.diyInfo.msgIcon),width:"14",height:"14"}):React.createElement("i",{className:"tvIcon-tvFace msg-cnt_icon"}),HUYA_UTIL.unescape(e.info.sContent))))}var _=Object(n.d)((function(e,t){return{panelInfo:e.panelInfo,playerInfo:e.playerInfo}}),(function(e,t){return{choiceTV:function(t){e(Object(d.k)(t))}}}))((function(e){var t=e.panelInfo.info.pack;return React.createElement(React.Fragment,null,React.createElement("div",{className:"send-tvList_gift"},React.createElement("div",{className:"tvList-box"},React.createElement("ul",{className:"tvList-list"},t.map((function(t,a){return React.createElement(h,{key:"tvItem_"+a,order:a,giftTVChoice:e.playerInfo.giftTVChoice,choiceTV:e.choiceTV,info:t,isDiy:e.panelInfo.isDiy,diyInfo:e.panelInfo.diyInfo})}))))),React.createElement(N,null))})),L=a(1437);var C=Object(n.d)((function(e,t){return{panelInfo:e.panelInfo}}))((function(e){var t=null;switch(e.panelInfo.info.mode){case r.b.MODE_Stalk:t=React.createElement(L.a,null);break;case r.b.MODE_GIFT:t=React.createElement(_,null);break;default:t=React.createElement(T,null)}return React.createElement("div",{className:"onTVLottery-send"},React.createElement(f,null),React.createElement(g,null),t)})),V=a(28),A=a.n(V),F=a(75),k=a.n(F);function S(e){var t=e.id,a=k.a.findEmoticon(t)||{id:t,name:"表情-[".concat(t,"]"),flexiUrl:"",price:0},n=a.name,l=a.flexiUrl;return l?A.a.createElement("img",{src:l.replace(".png","_3.png"),alt:n,style:{maxHeight:"30px"}}):A.a.createElement("span",null,n)}var O=Object(n.d)((function(e,t){return{panelInfo:e.panelInfo,result:e.result}}))((function(e){function t(e){e.target.onError=null,e.target.src=m.a}return A.a.createElement("div",{className:"onTVLottery-result"},(e.result.info.length?function(){return A.a.createElement(A.a.Fragment,null,A.a.createElement("p",{className:"result-title"},"电视弹幕何其多，主播偏爱这几个~"),A.a.createElement("p",{className:"result-tips"},"以下幸运用户们，打开虎牙app私信查看消息～"),A.a.createElement("div",{className:"result-box"},A.a.createElement("ul",{className:"result-list"},e.result.info.map((function(a,n){return A.a.createElement("li",{className:"item-player",key:"item-player_"+n},A.a.createElement("div",{className:"player-img"},A.a.createElement("img",{className:"img-head",src:TT.trimUrl(a.sLogo),onError:t}),A.a.createElement("span",{className:"img-bg"})),A.a.createElement("div",{className:"player-detail"},A.a.createElement("p",{className:"player-name"},HUYA_UTIL.unescape(a.sNickName)),e.panelInfo.info.mode===r.b.MODE_Stalk?A.a.createElement("div",{className:"player-meme"},A.a.createElement(S,{id:a.tBarrage.sContent})):A.a.createElement("p",{className:"player-msg",style:{color:r.h[a.tBarrage.iTVColor],borderColor:r.h[a.tBarrage.iTVColor]}},e.panelInfo.isDiy&&e.panelInfo.diyInfo.msgIcon?A.a.createElement(A.a.Fragment,null,A.a.createElement("img",{className:"msg-tv_diy",src:TT.trimUrl(e.panelInfo.diyInfo.msgIcon),width:"16",height:"16"}),HUYA_UTIL.unescape(a.tBarrage.sContent)):A.a.createElement(A.a.Fragment,null,A.a.createElement("span",{className:"msg-tv",style:{color:r.h[a.tBarrage.iTVColor]}},A.a.createElement("i",{className:"tv-wire tvIcon-tvWire"}),A.a.createElement("i",{className:"tv-face tvIcon-tvFace"})),HUYA_UTIL.unescape(a.tBarrage.sContent)))),A.a.createElement("span",{className:"player-gift"},HUYA_UTIL.unescape(a.sAwardName)))})))))}:function(){return A.a.createElement(A.a.Fragment,null,A.a.createElement("span",{className:"result-null_icon"}),A.a.createElement("p",{className:"result-null_tips"},"主播一个弹幕都没看上",A.a.createElement("br",null)))})())})),w=a(0);var U=Object(n.d)((function(e,t){return{anchorInfo:e.anchorInfo,playerInfo:e.playerInfo,panelUI:e.panelUI,panelInfo:e.panelInfo}}),(function(e,t){return{closeDialog:function(){e(Object(d.c)(""))},following:function(){e(Object(d.e)(!0))}}}))((function(e){function t(){w.default.call("quitFullScreen"),Promise.all([a.e(10),a.e(77),a.e(100)]).then(a.bind(null,80)).then((function(e){(t=e.default)({panelType:"yd"})}))}function n(){Object(s.a)(!0).then((function(t){if(t){var a=e.panelInfo.info.pack[e.playerInfo.giftTVChoice],n=a.iItemId,l=a.iItemNum;Object(s.g)(n,l),e.closeDialog()}else e.following()}))}function l(){var t=e.anchorInfo.defaultGift,a=t.type,n=t.amount;Object(s.g)(a,n),e.closeDialog();try{ya.reportProductEvent({eid:"click/onTVLottery/becomeFans",eid_desc:"点击/上电视/成为粉丝",gameid:TTR.gid,ayyuid:TTA.lp})}catch(e){}}function c(t,a){var n=e.anchorInfo,l=e.playerInfo,c=u.CustomFansBadge.getCustomBadgeAssets(l.iCustomBadgeFlag,{lBadgeId:n.badge.id,iBadgeLevel:t,tSuperFansInfo:{iSFFlag:a||l.isSuperFans}});return c?p.a.createCustom(t,n.badge.name,n.badge.id,a||l.isSuperFans,c):p.a.create(t,n.badge.name,n.badge.id,n.badge.type,a||l.isSuperFans)}return React.createElement(React.Fragment,null,""!=(o=e.panelUI.showDialog)&&React.createElement("div",{className:"onTVLottery-dialog onTVLottery-dialog_"+o},React.createElement("span",{className:"dialog-close",onClick:e.closeDialog}),function(t){switch(t){case"recharge":return React.createElement("p",{className:"dialog-msg"},"银豆余额不足，请去充值！");case"isAnchor":return React.createElement("p",{className:"dialog-msg"},"哦，你是主播耶！不能参与哦！");case"becomeFans":return React.createElement("p",{className:"dialog-msg"},"确认要送出 ",React.createElement("span",{className:"msg-gift"},e.anchorInfo.defaultGift.name," * ",e.anchorInfo.defaultGift.amount),React.createElement("br",null),"成为本直播间粉丝么？");case"notFans":return React.createElement("p",{className:"dialog-msg"},"仅主播粉丝可参与",React.createElement("br",null),"是否立刻送",React.createElement("span",{className:"msg-gift"},e.anchorInfo.defaultGift.name," * ",e.anchorInfo.defaultGift.amount)," 成为主播粉丝？",React.createElement("br",null));case"follow":return React.createElement("p",{className:"dialog-msg"},"仅订阅主播可参与",React.createElement("br",null),"是否立刻订阅主播？",React.createElement("br",null));case"superFansYear":return React.createElement("p",{className:"dialog-msg"},"需要成为年费超粉",React.createElement("span",{dangerouslySetInnerHTML:{__html:c(e.playerInfo.fansLevel,2)}}),React.createElement("br",null),"才能使用哦",React.createElement("br",null));case"fansLevel4":return React.createElement("p",{className:"dialog-msg"},"需要",React.createElement("span",{dangerouslySetInnerHTML:{__html:c(4)}}),"才能发送该种弹幕哦",React.createElement("br",null));case"fansLevel10":return React.createElement("p",{className:"dialog-msg"},"需要",React.createElement("span",{dangerouslySetInnerHTML:{__html:c(10)}}),"才能发送该种弹幕哦",React.createElement("br",null));default:return""}}(o),function(a){switch(a){case"recharge":return React.createElement("div",{className:"dialog-btn"},React.createElement("span",{className:"btn-item btn-ok btn-null",onClick:e.closeDialog},"知道了"),React.createElement("span",{className:"btn-item btn-recharge btn-full",onClick:t},"去充值"));case"isAnchor":return React.createElement("div",{className:"dialog-btn"},React.createElement("span",{className:"btn-item btn-ok btn-full",onClick:e.closeDialog},"知道了"));case"notFans":return React.createElement("div",{className:"dialog-btn"},React.createElement("span",{className:"btn-item btn-ok btn-null",onClick:e.closeDialog},"取消"),React.createElement("span",{className:"btn-item btn-sendGift btn-full",onClick:l},"确定"));case"becomeFans":return React.createElement("div",{className:"dialog-btn"},React.createElement("span",{className:"btn-item btn-sendGift btn-full",onClick:l},"成为粉丝"));case"follow":return React.createElement("div",{className:"dialog-btn"},React.createElement("span",{className:"btn-item btn-sendGift btn-full",onClick:n},"订阅并参与"));case"superFansYear":return React.createElement("div",{className:"dialog-btn"},React.createElement("span",{className:"btn-item btn-ok btn-null",onClick:e.closeDialog},"知道了"),React.createElement("span",{className:"btn-item btn-sendGift btn-full",onClick:function(){Object(s.f)()}},"去升级"));case"fansLevel4":case"fansLevel10":return React.createElement("div",{className:"dialog-btn"},React.createElement("span",{className:"btn-item btn-ok btn-null",onClick:e.closeDialog},"知道了"),React.createElement("span",{className:"btn-item btn-sendGift btn-full",onClick:e.closeDialog},"去升级"));default:return""}}(o)));var o})),D=(a(42),a(305)),P=a(299),j=a.n(P);a(451);function M(e){var t=e.panelInfo,a=e.anchorInfo,n=e.onClose,l=e.dialog,c=t.info.pack[0]||{iItemId:0,iItemNum:0,iTVType:0,iTVColor:0,sContent:"我要上电视"},o=r.h[c.iTVColor]||r.h[0],i=Object(V.useCallback)((function(){Object(s.g)(c.iItemId,c.iItemNum)}),[c]),m=b.giftShelfMap[c.iItemId],f=m?m.sPropsName:"礼物",p=Object(V.useMemo)((function(){var e="";if(m)try{var t=m.vPropsIdentity.value[0].sPropsWeb,a=t.indexOf("&");e=TT.trimUrl(-1==a?t:t.substring(0,a))}catch(e){}return e}),[m]);return A.a.createElement("div",{className:"onTVLottery-lovelyPanel",id:"onTVLottery-panel"},A.a.createElement("i",{className:"onTVLottery-lovelyPanel-close",onClick:n}),A.a.createElement("h3",{className:"onTVLottery-lovelyPanel-title"},"宠粉上电视"),A.a.createElement("div",{className:"onTVLottery-lovelyPanel-bd"},A.a.createElement("p",{className:"onTVLottery-lovelyPanel-cd"},"距离结束仅剩",A.a.createElement("em",null,Object(s.c)(t.info.leftTime))),A.a.createElement("div",{className:"onTVLottery-lovelyPanel-avatar"},A.a.createElement(D.default,{url:I.default.avatar})),a.badge&&A.a.createElement("div",{className:"onTVLottery-lovelyPanel-freeGift"},"参与即送 ",A.a.createElement(j.a.Normal,{id:a.badge.id,name:a.badge.name,level:1,type:a.badge.type,SFFlag:0,className:"onTVLottery-lovelyPanel-fansBadge"})," 徽章"),A.a.createElement("p",{className:"onTVLottery-lovelyPanel-prize"},"还有机会获得 ",t.info.award.name," (",t.info.award.amount,"人次)"),A.a.createElement("p",{className:"onTVLottery-lovelyPanel-danm"},A.a.createElement("span",{className:"danm-msg",style:{color:o}},A.a.createElement("i",{className:"tvIcon-tvFace danm-msg-icon"}),A.a.createElement("span",{className:"danm-msg-text"},c.sContent)))),A.a.createElement("div",{className:"onTVLottery-lovelyPanel-ft"},A.a.createElement("span",{className:"onTVLottery-lovelyPanel-btn",onClick:i},"送出 ",A.a.createElement("img",{src:p,alt:f})," X ",c.iItemNum,"，立即参与")),l)}var B=Object(n.d)((function(e,t){return{onClose:t.onClose,dialog:t.dialog,panelInfo:e.panelInfo,anchorInfo:e.anchorInfo}}))(M);t.a=Object(n.d)((function(e,t){return{clickCloseBtn:t.clickCloseBtn,state:e.panelInfo.state,mode:e.panelInfo.info.mode,isDiy:e.panelInfo.isDiy}}))((function(e){var t=e.state===r.d.STATE_START||e.state===r.d.STATE_SETTLE||e.state===r.d.STATE_NONE;return t&&e.mode==r.b.MODE_BEFANS?React.createElement(B,{onClose:e.clickCloseBtn,dialog:React.createElement(U,null)}):React.createElement(React.Fragment,null,React.createElement(o,null),React.createElement("div",{id:"onTVLottery-panel",className:c()("onTVLottery-panel",{special:e.isDiy},{send:e.isDiy&&e.state===r.d.STATE_START},{result:e.isDiy&&e.state!==r.d.STATE_START})},React.createElement("span",{className:"onTVLottery-close",onClick:e.clickCloseBtn}),React.createElement("h2",{className:"onTVLottery-title"}),React.createElement("a",{className:"onTVLottery-rule",href:"https://blog.huya.com/product/133",target:"_blank"},"规则>"),React.createElement("div",{className:"onTVLottery-cnt"},t?React.createElement(C,null):React.createElement(O,null)),React.createElement(U,null)))}))}}]);