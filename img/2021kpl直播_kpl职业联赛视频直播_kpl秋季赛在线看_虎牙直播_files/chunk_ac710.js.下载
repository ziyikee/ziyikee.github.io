(window.HUYA_MAIN_APP_WEBPACK_JSONP=window.HUYA_MAIN_APP_WEBPACK_JSONP||[]).push([[352],{1218:function(t,e,n){"use strict";n.d(e,"a",(function(){return j}));var o=n(285),r=n.n(o),a=n(28),i=n.n(a),c=n(290),s=n(447),u=n(448),l=n(449),m=n(450),d=n(4),p=n(315),f=n(367),h=n(362),b=n(308),g=n(313),O=n(295),k=n(303),_=n(304),E=n(1219),v=n.n(E);function A(t){return function(t){if(Array.isArray(t))return x(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||K(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,c=!1;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(a.push(o.value),!e||a.length!==e);i=!0);}catch(t){c=!0,r=t}finally{try{i||null==n.return||n.return()}finally{if(c)throw r}}return a}(t,e)||K(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(t,e){if(t){if("string"==typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(t,e):void 0}}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function j(t){var e=t.sectionMomentList,n=Object(O.d)(),o=Object(a.useContext)(k.c),E=y(Object(g.a)(),3),K=(E[0],E[1],E[2]),x=Object(a.useRef)(null),j=y(Object(a.useState)(!1),2),w=j[0],X=j[1],S=y(Object(a.useState)(A(e.moments)),2),U=S[0],C=S[1],q=Object(_.a)();Object(a.useState)((function(){q({eid:"usr/pageshow/post-list/community/",eid_desc:"曝光/赛事社区/帖子列表页/"})})),Object(a.useEffect)((function(){function t(t){switch(t){case"append":case"insert":case"remove":C(A(e.moments));break;case"reload":C(A(e.moments)),x.current.scrollTop=0}}return e.on("change",t),function(){return e.off("change",t)}}),[]);var Q=Object(d.throttle)((function(){if(!w&&-2!=e.seed){var t=x.current;(t.scrollTop+t.clientHeight)/t.scrollHeight>.8&&(X(!0),e.loadRemainingComments().catch((function(t){c.default.error({text:"加载失败：".concat(t.message),container:document.getElementById("J_MatchCommunity_notice_".concat(o))})})).then((function(){return X(!1)})))}}),200),R=Object(a.useCallback)((function(t,e){K(b.a.DETAIL,{mid:t,isFoucs:e}),q({eid:"usr/pageshow/postdetail/community/".concat(t),eid_desc:"赛事社区/帖子详情/曝光/".concat(t)})}),[q]),I=Object(a.useCallback)((function(t){p.a.removeMoment(t)}),[]),B=Object(a.useMemo)((function(){return U.map((function(t){return i.a.createElement("div",{className:v.a.item,key:"moment-".concat(t.momId)},i.a.createElement(s.a,{moment:t,voteModel:f.a.createVote(t.voteInfo),favorModel:h.a.createFavor(t),onClick:R,onRemove:I}))}))}),[U,R]),P=y(Object(a.useState)(""),2),Z=P[0],G=P[1];Object(a.useEffect)((function(){var t=function(){G("有新的帖子，点击查看")},n=function(){G("")};return e.on("update",t),e.on("reload",n),function(){e.off("update",t),e.off("reload",n)}}),[]);var Y=Object(a.useCallback)((function(){e.reload(),G("")}),[]);return i.a.createElement("div",{className:r()(v.a.moments,v.a[n])},i.a.createElement("div",{className:v.a.list,ref:x,onWheel:function(t){t.stopPropagation(),Q()}},B.length>0&&B,B.length>0&&w&&i.a.createElement(l.a,{theme:n}),B.length>0&&-2==e.seed&&i.a.createElement(m.a,{theme:n}),0==B.length&&i.a.createElement("div",{className:v.a.empty},i.a.createElement(u.a,null))),""!=Z&&i.a.createElement("div",{className:v.a["update-tips"]},i.a.createElement("span",{className:v.a.tips,onClick:Y},Z)))}},1219:function(t,e,n){var o=n(1220);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(287)(o,r);o.locals&&(t.exports=o.locals)},1220:function(t,e,n){(e=n(286)(!1)).push([t.i,".moments--176aO9uoqUKGZpKkAnX_hO{position:relative;height:100%;margin-right:2px;border-radius:6px;color:#444;font-size:12px}.moments--176aO9uoqUKGZpKkAnX_hO.dark--3Ef9fYhejrER_QRrAS9gyI{padding-top:5px;box-sizing:border-box;background:transparent}.moments--176aO9uoqUKGZpKkAnX_hO.dark--3Ef9fYhejrER_QRrAS9gyI .list--Ygk8Q-On3dV85vs_mCjXS::-webkit-scrollbar-thumb{background-color:rgba(100,100,100,0.8)}.moments--176aO9uoqUKGZpKkAnX_hO.dark--3Ef9fYhejrER_QRrAS9gyI .list--Ygk8Q-On3dV85vs_mCjXS .item--P88fEQVieJ_WBp1ifBwEA{margin-bottom:5px;padding:10px;border-radius:5px;background:rgba(0,0,0,0.8)}.moments--176aO9uoqUKGZpKkAnX_hO.dark--3Ef9fYhejrER_QRrAS9gyI .list--Ygk8Q-On3dV85vs_mCjXS .item--P88fEQVieJ_WBp1ifBwEA:last-child{margin-bottom:0}.moments--176aO9uoqUKGZpKkAnX_hO.light--1CK3DH-vEtu-Pu5nReNK5n{background:#fff}.moments--176aO9uoqUKGZpKkAnX_hO.light--1CK3DH-vEtu-Pu5nReNK5n .item--P88fEQVieJ_WBp1ifBwEA{padding:10px 0;margin-left:10px;border-top:1px solid rgba(151,151,151,0.2)}.moments--176aO9uoqUKGZpKkAnX_hO.light--1CK3DH-vEtu-Pu5nReNK5n .item--P88fEQVieJ_WBp1ifBwEA:first-child{border-top:none}.moments--176aO9uoqUKGZpKkAnX_hO .list--Ygk8Q-On3dV85vs_mCjXS{padding-right:4px;width:100%;height:100%;overflow-y:auto;overflow-x:hidden;box-sizing:border-box}.moments--176aO9uoqUKGZpKkAnX_hO .list--Ygk8Q-On3dV85vs_mCjXS::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.moments--176aO9uoqUKGZpKkAnX_hO .list--Ygk8Q-On3dV85vs_mCjXS::-webkit-scrollbar{width:8px;background-color:transparent}.moments--176aO9uoqUKGZpKkAnX_hO .list--Ygk8Q-On3dV85vs_mCjXS::-webkit-scrollbar-thumb{border-radius:10px;background-color:#ccc}.moments--176aO9uoqUKGZpKkAnX_hO .empty--2diE4bcFJ48EoaUJhrpQaI{height:100%;width:100%;padding-top:20px;box-sizing:border-box;border-radius:6px}.moments--176aO9uoqUKGZpKkAnX_hO.dark--3Ef9fYhejrER_QRrAS9gyI .empty--2diE4bcFJ48EoaUJhrpQaI{background:rgba(0,0,0,0.8)}.moments--176aO9uoqUKGZpKkAnX_hO .update-tips--2haX9zW_dZuqrDciBNzBRY{position:absolute;top:15px;left:0;width:100%;text-align:center}.moments--176aO9uoqUKGZpKkAnX_hO .update-tips--2haX9zW_dZuqrDciBNzBRY .tips--2qfG54UJ8Pbsxl6hXxxdwo{display:inline-block;line-height:36px;font-size:14px;padding:0 1em;border-radius:18px;background-color:#E6F8FF;color:#188CFB;cursor:pointer}\n",""]),e.locals={moments:"moments--176aO9uoqUKGZpKkAnX_hO",dark:"dark--3Ef9fYhejrER_QRrAS9gyI",list:"list--Ygk8Q-On3dV85vs_mCjXS",item:"item--P88fEQVieJ_WBp1ifBwEA",light:"light--1CK3DH-vEtu-Pu5nReNK5n",empty:"empty--2diE4bcFJ48EoaUJhrpQaI","update-tips":"update-tips--2haX9zW_dZuqrDciBNzBRY",tips:"tips--2qfG54UJ8Pbsxl6hXxxdwo"},t.exports=e}}]);