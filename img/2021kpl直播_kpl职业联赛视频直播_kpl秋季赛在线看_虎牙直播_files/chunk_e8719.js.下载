(window.HUYA_MAIN_APP_WEBPACK_JSONP=window.HUYA_MAIN_APP_WEBPACK_JSONP||[]).push([[26],{66:function(e,t,i){"use strict";i.r(t);var n=i(535),a=i(15),r=i(4),o=i(344),c=$(".mod-sidebar"),s=$(".sidebar-recom"),d=c.find("#sidebar-scroll"),l=(c.find(".sidebar-hide"),c.find(".sidebar-show")),u=a.reportEvent;function h(){this.initialize.apply(this,arguments)}function f(e){var t=this;t.obj=e;var i=1;0!==$(".on-match").length&&(i=0);var a=new n.a({gid:e.gid,firstState:i});t.sidebar=function(){return a},a.on("update:cfg:state",(function(){if(1==a.cfg().state){DUYA_SUB.publish("sidebarShow");var e=$("#sidebarBanner").data("thirdview");e&&banner.viewReport(e)}else DUYA_SUB.publish("sidebarHide");DUYA_SUB.publish("resizeWide")})),a.on("update:cfg:matchState",(function(){var e=a.cfg().matchState,i=$(".nav-bar-match");e?i.find(".nav-child").slideDown("slow",(function(){i.addClass("show"),t.sidebarScrollFn()})):i.find(".nav-child").slideUp("slow",(function(){i.removeClass("show"),t.sidebarScrollFn()}))})),t.initialize.apply(t,arguments)}h.prototype={initialize:function(e){var t=this;t.view=function(){return e},t.ad=e.sidebar().ad(),t.ad.on("update",(function(){var e=t.ad.cfg().data;e&&t.createImage(e)})),t.ad.emit("update")},createImage:function(e){var t=this;$(".sidebar-banner").show();var i=document.getElementById("sidebarBanner");$(i).attr({href:e.link,title:_.escape(e.title),target:"_blank"}).data("thirdstat",e.clickCheckCode).data("thirdview",e.viewCheckCode).data("rsc",e.id).html('<img src="'+TT.trimUrl(e.picUrl)+'" alt="'+_.escape(e.title)+'" width="200" height="80">');var n=document.createElement("i");n.className="sidebar-banner-x",n.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),$(".sidebar-banner").hide(),t.view().sidebarScrollFn();try{ya.reportProductEvent({eid:"click/push/leftnaviad/close",eid_desc:"点击/推荐/左侧导航推荐图/关闭"})}catch(e){}}),!1),i.appendChild(n),$("#sidebarBanner").on("click",(function(){var e=$(this).data();if(e)try{ya.reportProductEvent({eid:"click/position",position:e.pos,resourceid:e.rsc})}catch(e){}})),TT_RSC_EXPS({pos:"sidebar/banner",rsc:e.id}),setTimeout((function(){t.viewReport(e.viewCheckCode)}),2e3),t.view().sidebarScrollFn()},viewReport:function(e){var t,i=this;"none"!=$(".mod-sidebar .sidebar-show").css("display")&&(!function(){var t=e;if(t){var i=i||new Image;i.src=t}}(),function e(){"undefined"!=typeof ya?(clearTimeout(t),ya.reportProductEvent({eid:"pageview/push/leftnaviad",eid_desc:"曝光/推荐/左侧导航栏广告位",ref:YA.cookie.get("ya_eid")}),ya.reportProductEvent({eid:"pageview/position",position:"push/leftnaviad",resourceid:$("#sidebarBanner").data("rsc")}),i.viewReport=function(){return 0}):t=setTimeout((function(){e()}),1e3)}())}};var b=f.prototype;b.initialize=function(){var e,t,n=this;new h(n);t=(e=n).sidebar(),c.on("click",".j_sidebar-m-title",(function(){var e=$(this).data("order");a.reportEventPosition.click({cref:"左侧导航/热门分类/位置-".concat(e)}),Object(a.reportEvent)({eid:"click/zuoce/topClassification/".concat(e),eid_desc:"点击/左侧导航/热门分类/位置".concat(e)})})).on("click",".j_sidebar-recomend-item",(function(){var e=$(this),t=e.data("order").split("-"),i=parseInt(t[0]),n=parseInt(t[1])+1;a.reportEventPosition.click({cref:"左侧导航/热门分类/位置-".concat(i,"-").concat(n)}),Object(a.reportEvent)({eid:"click/zuoce/topClassification/".concat(i,"/").concat(n),eid_desc:"点击/左侧导航/热门分类/分类位置".concat(i,"/分类下品类位置").concat(n),gid:e.data("gid")})})).on("click",".clickstat",(function(){u({eid:"click/zuoce/"+c.data("source"),eid_desc:"点击/左导航/"+c.data("source")})})).on("click",".nav-bar",(function(i){var n=$(this),a=n.find(".nav-child"),r=!1,o=$(i.target);if($.each(o,(function(e,t){var i=$(t);r=i.parents(".nav-bar-match").length>0&&!i.hasClass("nav-arrow")})),a.length&&!r){var s=n.hasClass("show");n.hasClass("nav-bar-match")?(t.setMatchState(s?t.STATE_CTRL.STATE_HIDE:t.STATE_CTRL.STATE_SHOW),u({eid:"click/zuoce/"+c.data("source"),eid_desc:"点击/左导航/"+c.data("source")}),u({eid:"click/zuoce/game/"+(s?"close":"open")+"/"+n.data("source"),eid_desc:"点击/左导航/赛事/"+(s?"收起":"展开")+"/"+n.data("source")})):a.slideToggle("slow",(function(){s?n.removeClass("show"):n.addClass("show"),e.sidebarScrollFn()}))}})).on("click",".sidebar-icon-item",(function(){t.setSidebarState(t.STATE_CTRL.STATE_SHOW)})).on("click","#sidebar-show-btn, #sidebar-hide-btn",(function(){t.set.cfg({matchStatus:1}),t.setSidebarState(t.cfg().state==t.STATE_CTRL.STATE_HIDE?t.STATE_CTRL.STATE_SHOW:t.STATE_CTRL.STATE_HIDE)})),TT.login.check((function(e){e?c.find(".subscribe-text").remove():c.find(".js-sub").on("click",(function(){return TT.login.login(),!1}))})),$("#J_sidebarFeedback").on("click",(function(e){e.preventDefault(),i.e(451).then(i.t.bind(null,1373,7)).then((function(e){var t=e.default,n=new t({debug:!1});n.open("https://kefu.zbase.huya.com/s/dist/tpl/feedback.html?product=HYPC&typeId=1"),n.onSend((function(e){var t=JSON.parse(e),n=t.tel,a=t.content,r=t.type,o=t.shortCut;Promise.all([i.e(15),i.e(177),i.e(176),i.e(175),i.e(178),i.e(128)]).then(i.t.bind(null,88,7)).then((function(e){(0,e.createFeedbackerSingleInstance)().report({errorText:r,content:"问题：".concat(a,",电话：").concat(n,",截图：").concat(o)}).then((function(e){})).catch((function(e){console.error(e)}))}))}))}))})),function(){var e=document.querySelector(".sidebar-tool"),t=document.getElementById("J_sidebarDownload");if(e&&t){Object(r.isMac)()&&(t.href=o.HuyaMacClientUrl);var i=Object(r.once)((function(){var t=document.createElement("div");return t.innerHTML="<span></span><p>下载手机虎牙</p><p>蓝光8M更稳定</p>",t.className="sidebar-app-download",e.appendChild(t),t}));t.addEventListener("click",(function(e){e.preventDefault()}),!1),t.addEventListener("mouseenter",(function(e){i().style.display="block"}),!1),t.addEventListener("mouseleave",(function(e){i().style.display="none"}),!1)}}(),DUYA_SUB.subscribe("sidebarShow",(function(){$("body").removeClass("sidebar-min"),n.sidebarScrollFn()})),DUYA_SUB.subscribe("sidebarHide",(function(){$("body").addClass("sidebar-min")})),n.sidebar().emit("update:cfg:state"),n.sidebar().emit("update:cfg:matchState"),n.highlight(),$.when(n.sidebarScrollFn()).done((function(){n.scrollMove()})),n.resizeFn(),n.autoReport()},b.scrollMove=function(){var e=$(".sidebar-show-line.m-on"),t=$(".recomend-item.on"),i=0;if(e.length)i=e[0];else{if(!t.length)return;i=t.eq(0).parents(".sidebar-show-line")[0]}$(".mod-sidebar").find("#sidebar-scroll").data("jsp").scrollToY(i.offsetTop)},b.autoReport=function(){var e=this.sidebar().cfg().state==this.sidebar().STATE_CTRL.STATE_SHOW?{eid:"open",eid_desc:"展开"}:{eid:"close",eid_desc:"关闭"};u({eid:"status/zuoce/"+e.eid,eid_desc:"状态/左导航/"+e.eid_desc})},b.highlight=function(){var e=s.find(".on").parents(".m");e.length>0&&e.addClass("m-on-bg");var t=window.location.host+window.location.pathname;c.find(".sidebar-show-nav").find(".nav-bar").each((function(e,i){var n=$(this);n.attr("href")&&n.attr("href").split("//")[1]==t&&n.addClass("on")})),c.find(".sidebar-icon-link").each((function(e,i){var n=$(this);n.attr("href")&&n.attr("href").split("//")[1]==t&&n.parents(".sidebar-icon-item").addClass("on")})),c.find(".sidebar-show-nav").find(".nav-child-item").each((function(e,i){var n=$(this);if(n.attr("href")&&n.attr("href").split("//")[1]==t){n.addClass("on");var a=n.parents(".nav-bar"),r=a.data("nav");a.addClass("on"),c.find(".sidebar-item-"+r).addClass("on")}}))},b.sidebarScrollFn=function(){var e=new $.Deferred,t=d.data("jsp");return d.height(l.height()-130),t?(t.reinitialise(),void e.resolve()):($.isFunction($.fn.jScrollPane)?(d.jScrollPane({scrollbarWidth:6,mouseWheelSpeed:20,verticalGutter:0}),e.resolve()):i.e(27).then(i.t.bind(null,302,7)).then((function(){$.isFunction($.fn.jScrollPane)&&(d.jScrollPane({scrollbarWidth:6,mouseWheelSpeed:20,verticalGutter:0}),e.resolve())})),e.promise())},b.resizeFn=function(){var e=c.find(".sidebar-icon-author"),t=this,i=$(window);i.on("resize.sidebar",(function(){t.sidebarScrollFn(),i.height()<620?e.hide():e.show()}))},b.constructor=f,t.default=f}}]);