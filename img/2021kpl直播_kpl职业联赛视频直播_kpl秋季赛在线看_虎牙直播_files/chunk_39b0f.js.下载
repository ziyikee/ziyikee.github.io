(window.HUYA_MAIN_APP_WEBPACK_JSONP=window.HUYA_MAIN_APP_WEBPACK_JSONP||[]).push([[204],{97:function(t,e,n){"use strict";n.r(e);n(8);var a=n(4),i=n.n(a);e.default=new function(t){var e=[],n={},a="TT_LIVE_STREAM_ORIGIN";function o(t){if(t){var i=[].concat(t);if(i.length){var o=Math.floor((new Date).getTime()/1e3+7200);i.forEach((function(t,a){if(t&&t.uid&&t.domain_list&&t.domain_list.length){var i={expire:o,data:t},r=i.data.uid;if(n[r]){var c=e.indexOf(n[r]);-1!=c&&e.splice(c,1)}e.unshift(i),n[r]=i}})),e.splice(100,e.length-100).forEach((function(t,e){delete n[t.data.uid]})),function(){try{localStorage.setItem(a,JSON.stringify(e))}catch(t){}}()}}}function r(t){try{var i=JSON.parse(t||localStorage.getItem(a))||[];e=[],n={},i.forEach((function(t,a){e[a]=t,n[t.data.uid]=t}))}catch(t){}}function c(e,a){e&&(!t.find(e)&&!function(t){var e=t?n[t]:null;if(e&&e.expire>(new Date).getTime()/1e3)return e.data.domain_list}(e)||a)&&(t.add(e),u.push(e),d())}r(),window.addEventListener&&window.addEventListener("storage",(function(t){t.key===a&&r(t.newValue)}));var u=[],d=i.a.throttle((function(){u.length&&function(t){0;var e={client_uid:HUYA_UTIL.getCookieVal("udb_uid")||"0",gid:HUYA_UTIL.getCookieVal("guid"),huya_ua:"web",anchor_uid:t.join(",")};return new $.Deferred((function(t){$.ajax({url:"https://cdnweb.huya.com/getUidsDomainList",type:"get",dataType:"jsonp",jsonpCallback:"getLiveStreamDomainCallback_"+i.a.DJBHash(e.anchor_uid),data:e,cache:!0}).done((function(e){e&&e.result&&e.result.length?t.resolve(e.result):t.resolve([])})).fail((function(){t.resolve([])}))}))}(u.splice(0,10)).done(o).always((function(){u.length&&d()}))}),10);$.extend(this,{add:function(t){t&&[].concat(t).forEach((function(t){return c(t)}))},addForce:function(t){t&&[].concat(t).forEach((function(t){return c(t,!0)}))}})}(new function(){var t=[],e={},n="TT_LIVE_STREAM_FH";function a(a){try{var i=JSON.parse(a||localStorage.getItem(n))||[];t=[],e={},i.forEach((function(n,a){t[a]=n,e[n.data]=n}))}catch(t){}}a(),window.addEventListener&&window.addEventListener("storage",(function(t){t.key===n&&a(t.newValue)})),this.add=function(a){if(a){var i={expire:Math.floor((new Date).getTime()/1e3+1800),data:a};if(e[a]){var o=t.indexOf(e[a]);-1!=o&&t.splice(o,1)}t.unshift(i),e[a]=i,t.splice(400,t.length-400).forEach((function(t,n){delete e[t.data]})),function(){try{localStorage.setItem(n,JSON.stringify(t))}catch(t){}}()}},this.find=function(t){var n=t?e[t]:null;if(n&&n.expire>(new Date).getTime()/1e3)return n}})}}]);