(window.HUYA_MAIN_APP_WEBPACK_JSONP=window.HUYA_MAIN_APP_WEBPACK_JSONP||[]).push([[302],{1038:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(12),i=(0,n.__importDefault)(r(3)),o=r(422);(0,n.__exportStar)(r(422),t),t.default=new o.Ornament(i.default.lp)},1039:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMsgBarDeco=t.setDecoWearState=t.getUserDecoList=void 0;var n=(0,r(12).__importDefault)(r(0));t.getUserDecoList=function(e){return new Promise((function(t,r){var i=setTimeout((function(){r(new Error("TIMEOUT"))}),8e3);n.default.isH5?n.default.ready((function(r){var n=Object.assign(new r.taf.HUYA.GetUserDecoListReq,{tId:r.userId,lPid:e});r.sendWup2("wupui","getUserDecoList",n,(function(e){clearTimeout(i),t(e.vDeco.value)}))})):r(new Error("NOT SUPPORTING FLASH"))}))},t.setDecoWearState=function(e,t,r){return new Promise((function(i,o){var s=setTimeout((function(){o(new Error("TIMEOUT"))}),8e3);n.default.isH5?n.default.ready((function(n){var u=Object.assign(new n.taf.HUYA.SetDecoWearStateReq,{tId:n.userId,lPid:e,lDecoId:t,iWear:r});n.sendWup2("wupui","setDecoWearState",u,(function(e){clearTimeout(s);var t=e.iCode,r=e.sMsg;0===t?i(e):o(new Error(r))}))})):o(new Error("NOT SUPPORTING FLASH"))}))},t.getMsgBarDeco=function(e){return new Promise((function(t,r){var i=setTimeout((function(){r(new Error("TIMEOUT"))}),8e3);n.default.isH5?n.default.ready((function(r){var n=Object.assign(new r.taf.HUYA.GetMsgBarDecoReq,{tId:r.userId,lPid:e});r.sendWup2("wupui","getMsgBarDeco",n,(function(e){clearTimeout(i),t(e.tDecoInfo)}))})):r(new Error("NOT SUPPORTING FLASH"))}))}},1040:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},422:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Ornament=void 0;var n=r(12),i=(0,n.__importDefault)(r(19)),o=(0,n.__importDefault)(r(0)),s=r(1039);(0,n.__exportStar)(r(1040),t);var u=function(e){function t(t){var r=e.call(this)||this;return r.reqUserDecoList=null,r.reqMsgBarDeco=null,r.lp=t,r.using=0,r.list=[],o.default.isH5&&o.default.ready((function(e){e.addTafListener("6590",(function(e){r.emit("ObtainDecoNotify",e)}))})),r}return(0,n.__extends)(t,e),t.prototype.find=function(e){if(e)return this.list.find((function(t){var r=t.tBaseInfo.lId;return e==r}))},t.prototype.getUserDecoList=function(e){var t=this;(void 0===e&&(e=!1),null===this.reqUserDecoList||!0===e)&&(this.reqUserDecoList=(0,s.getUserDecoList)(this.lp)).then((function(e){t.list=e;var r=e.find((function(e){return 1===e.iWear}));t.using=r?r.tBaseInfo.lId:0,t.emit("update")})).catch((function(e){console.error(e)}));return this.reqUserDecoList},t.prototype.setDecoWearState=function(e,t){var r=this,n=(0,s.setDecoWearState)(this.lp,e,t);return n.then((function(){r.list.forEach((function(r){r.iWear=1===t&&r.tBaseInfo.lId===e?1:0})),r.using=t?e:0,r.emit("wear")})).catch((function(e){console.error(e),r.emit("WEAR_ERROR",e)})),n},t.prototype.getMsgBarDeco=function(e){var t=this;(void 0===e&&(e=!1),null===this.reqMsgBarDeco||!0===e)&&(this.reqMsgBarDeco=(0,s.getMsgBarDeco)(this.lp)).then((function(e){var r=e.iWear,n=e.tBaseInfo.lId;if(r){if(n){var i=t.find(n);i?Object.assign(i,e):t.list.push(e),t.using=n,t.emit("change")}}else 0!=t.using&&(t.using=0,t.emit("change"))})).catch((function(e){console.error(e)}));return this.reqMsgBarDeco},t.prototype.getDecoUrl=function(e){var t=(this.find(e)||{tBaseInfo:{sGifUrl:"",sUrl:""}}).tBaseInfo,r=t.sGifUrl,n=t.sUrl,i=r&&TT.isSupportWebp()?r:n;if(i){var o=i.lastIndexOf(".");i=TT.trimUrl(i.slice(0,o))+"_3"+i.slice(o)}return i},t}(i.default);t.Ornament=u}}]);