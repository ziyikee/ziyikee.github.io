(window.HUYA_MAIN_APP_WEBPACK_JSONP=window.HUYA_MAIN_APP_WEBPACK_JSONP||[]).push([[489],{1254:function(n,a,e){},1255:function(module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){rethrow=rethrow||function(n,a,e,s,t){var i=a.split("\n"),r=Math.max(s-3,0),l=Math.min(i.length,s+3),p=t(e),c=i.slice(r,l).map((function(n,a){var e=a+r+1;return(e==s?" >> ":"    ")+e+"| "+n})).join("\n");throw n.path=p,n.message=(p||"ejs")+":"+s+"\n"+c+"\n\n"+n.message,n},escapeFn=escapeFn||function(n){return null==n?"":String(n).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(n){return _ENCODE_HTML_RULES[n]||n}var __line=1,__lines='<div class="treasure-box">\n    <i class="btn-close" title="关闭"></i>\n    <div class="wrap">\n        <div class="hd">\n            <h2 class="title">恭喜你获得 <span class="prize-name"><%= data.prizeName %></span></h2>\n            <p class="tip">你还可以前往个人中心-中奖查询，可再次查看和填写</p>\n        </div>\n        <div class="bd">\n            <% if(data.type == \'1\'){ %>\n            <div class="form-box">\n                <form id="treasure-form">\n                    <ul class="form-list">  \n                        <li class="form-item">\n                            <span class="item-name">姓名：</span><input type="text" name="name" maxlength="20">\n                        </li>\n                        <li class="form-item">\n                            <span class="item-name">QQ&nbsp;：</span><input type="text" name="qq" maxlength="20">\n                        </li>\n                        <li class="form-item">\n                            <span class="item-name">电话：</span><input type="text" name="phone" maxlength="20">\n                        </li>\n                        <li class="form-item">\n                            <span class="item-name">地址：</span><input type="text" name="address" maxlength="50">\n                        </li>\n                        <input type="hidden" name="matchId" value="<%= data.matchId %>"> \n                    </ul>\n                    <div class="operation">\n                        <a class="btn-operation btn-submit"></a>\n                        <a class="help" href="<%= data.url %>" target="_blank"><i class="icon"></i>兑换说明</a>\n                    </div>\n                </form>\n            </div>\n            <% }else{ %>\n            <div class="card-box">\n                <div class="card-inner">\n                    <div class="card-wrap">\n                        <div class="card-info">\n                            <p><span class="mark">卡号：</span><%= data.code %></p>\n                            <% if(typeof data.pass != \'undefined\' && data.pass !=\'\'){%>\n                                <p><span class="mark">卡密：</span><%= data.pass %></p>\n                            <% } %>\n                        </div>\n                        <p class="card-tip">请妥善保管你的卡号<% if(typeof data.pass != \'undefined\' && data.pass !=\'\'){ %>和卡密<% } %>，谨防泄露</p>\n                    </div>\n                </div>\n                <div class="operation">\n                    <a class="btn-operation btn-ok"></a>\n                    <a class="help" href="<%= data.url %>" target="_blank"><i class="icon"></i>兑换说明</a>\n                </div>\n            </div>\n            <% } %>\n        </div>\n    </div>\n</div>\n',__filename="widget/roomGetPrize/tpl.tmpl";try{var __output="";function __append(n){null!=n&&(__output+=n)}with(locals||{})__append('<div class="treasure-box">\n    <i class="btn-close" title="关闭"></i>\n    <div class="wrap">\n        <div class="hd">\n            <h2 class="title">恭喜你获得 <span class="prize-name">'),__line=5,__append(escapeFn(data.prizeName)),__append('</span></h2>\n            <p class="tip">你还可以前往个人中心-中奖查询，可再次查看和填写</p>\n        </div>\n        <div class="bd">\n            '),__line=9,"1"==data.type?(__append('\n            <div class="form-box">\n                <form id="treasure-form">\n                    <ul class="form-list">  \n                        <li class="form-item">\n                            <span class="item-name">姓名：</span><input type="text" name="name" maxlength="20">\n                        </li>\n                        <li class="form-item">\n                            <span class="item-name">QQ&nbsp;：</span><input type="text" name="qq" maxlength="20">\n                        </li>\n                        <li class="form-item">\n                            <span class="item-name">电话：</span><input type="text" name="phone" maxlength="20">\n                        </li>\n                        <li class="form-item">\n                            <span class="item-name">地址：</span><input type="text" name="address" maxlength="50">\n                        </li>\n                        <input type="hidden" name="matchId" value="'),__line=25,__append(escapeFn(data.matchId)),__append('"> \n                    </ul>\n                    <div class="operation">\n                        <a class="btn-operation btn-submit"></a>\n                        <a class="help" href="'),__line=29,__append(escapeFn(data.url)),__append('" target="_blank"><i class="icon"></i>兑换说明</a>\n                    </div>\n                </form>\n            </div>\n            '),__line=33):(__append('\n            <div class="card-box">\n                <div class="card-inner">\n                    <div class="card-wrap">\n                        <div class="card-info">\n                            <p><span class="mark">卡号：</span>'),__line=38,__append(escapeFn(data.code)),__append("</p>\n                            "),__line=39,void 0!==data.pass&&""!=data.pass&&(__append('\n                                <p><span class="mark">卡密：</span>'),__line=40,__append(escapeFn(data.pass)),__append("</p>\n                            "),__line=41),__append('\n                        </div>\n                        <p class="card-tip">请妥善保管你的卡号'),__line=43,void 0!==data.pass&&""!=data.pass&&__append("和卡密"),__append('，谨防泄露</p>\n                    </div>\n                </div>\n                <div class="operation">\n                    <a class="btn-operation btn-ok"></a>\n                    <a class="help" href="'),__line=48,__append(escapeFn(data.url)),__append('" target="_blank"><i class="icon"></i>兑换说明</a>\n                </div>\n            </div>\n            '),__line=51),__append("\n        </div>\n    </div>\n</div>\n"),__line=55;return __output}catch(e){rethrow(e,__lines,__filename,__line,escapeFn)}}},1256:function(module,exports){module.exports=function anonymous(locals,escapeFn,include,rethrow){rethrow=rethrow||function(n,a,e,s,t){var i=a.split("\n"),r=Math.max(s-3,0),l=Math.min(i.length,s+3),p=t(e),c=i.slice(r,l).map((function(n,a){var e=a+r+1;return(e==s?" >> ":"    ")+e+"| "+n})).join("\n");throw n.path=p,n.message=(p||"ejs")+":"+s+"\n"+c+"\n\n"+n.message,n},escapeFn=escapeFn||function(n){return null==n?"":String(n).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(n){return _ENCODE_HTML_RULES[n]||n}var __line=1,__lines='<div class="treasure-box5">\n    <i class="box5-close J_close" title="关闭"></i>\n    <div class="wrap">\n        <div class="hd">\n            <h2 class="title">恭喜你获得 <span class="prize-name"><%= data.prizeName %></span></h2>\n            <p class="tip">你还可以前往：个人中心-我的财产，再次查看</p>\n        </div>\n        <div class="bd">\n            <div class="card-box">\n                <div class="card-inner">\n                    <div class="prize-em"><%= data.prizeName %></div>\n                </div>\n                <div class="operation">\n                    <a class="btn-sure J_close"></a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>',__filename="widget/roomGetPrize/tpl_type5.tmpl";try{var __output="";function __append(n){null!=n&&(__output+=n)}with(locals||{})__append('<div class="treasure-box5">\n    <i class="box5-close J_close" title="关闭"></i>\n    <div class="wrap">\n        <div class="hd">\n            <h2 class="title">恭喜你获得 <span class="prize-name">'),__line=5,__append(escapeFn(data.prizeName)),__append('</span></h2>\n            <p class="tip">你还可以前往：个人中心-我的财产，再次查看</p>\n        </div>\n        <div class="bd">\n            <div class="card-box">\n                <div class="card-inner">\n                    <div class="prize-em">'),__line=11,__append(escapeFn(data.prizeName)),__append('</div>\n                </div>\n                <div class="operation">\n                    <a class="btn-sure J_close"></a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'),__line=19;return __output}catch(e){rethrow(e,__lines,__filename,__line,escapeFn)}}},128:function(n,a,e){"use strict";e.r(a);e(1254);var s=e(24),t=e(1255),i=null;$(document).on("click",".treasure-box .btn-submit",(function(){var n=$("#treasure-form")[0],a=p(n);if(a)return TT.event.emit("TT_ALERT_MESSAGE",a,"error"),!1;$.ajax({url:"//activity.huya.com/awardcom/index.php?m=Api&do=signAwardUserInfo",dataType:"jsonp",data:$("#treasure-form").serialize()}).done((function(n){200==n.status?(TT.event.emit("TT_ALERT_MESSAGE","提交成功","success"),$(".treasure-box .btn-close").click()):TT.event.emit("TT_ALERT_MESSAGE",n.msg,"error")}))})),$(document).on("click",".treasure-box .btn-close,.treasure-box .btn-ok",(function(){i&&(i.close(),i=null)}));var r={isNonEmpty:function(n,a){if(""==$.trim(n))return a},isQQ:function(n,a){if(!/(^\d+$)/.test(n))return a},isMobile:function(n,a){if(!/(^\d{11}$)/.test(n))return a}},l=function(){this.cache=[]};l.prototype.add=function(n,a){for(var e,s=this,t=0;e=a[t++];)!function(a){var e=a.strategy.split(":"),t=a.errorMsg;s.cache.push((function(){var a=e.shift();return e.unshift(n.value),e.push(t),r[a].apply(n,e)}))}(e)},l.prototype.start=function(){for(var n,a=0;n=this.cache[a++];){var e=n();if(e)return e}};var p=function(n){var a=n,e=new l;return e.add(a.name,[{strategy:"isNonEmpty",errorMsg:"请输入您的姓名"}]),e.add(a.qq,[{strategy:"isNonEmpty",errorMsg:"请输入您的QQ号码"},{strategy:"isQQ",errorMsg:"请输入正确的QQ号码"}]),e.add(a.phone,[{strategy:"isNonEmpty",errorMsg:"请输入您的手机号码"},{strategy:"isMobile",errorMsg:"请输入正确的手机号码"}]),e.add(a.address,[{strategy:"isNonEmpty",errorMsg:"请输入您的地址"}]),e.start()};var c=e(1256);a.default=function(n){var a=function(n){var a=new Object;if(-1!=n.indexOf("?"))for(var e=n.substr(n.indexOf("?")+1).split("&"),s=0;s<e.length;s++)a[e[s].split("=")[0]]=decodeURIComponent(e[s].split("=")[1]);return a}(n.sUrl);if(5==a.type){var e=s.default.layer({view:c({data:a}),zIndex:30001});e.view.on("click",".J_close",(function(n){n.preventDefault(),e.close(),e=null}))}else 1!=a.type&&2!=a.type&&3!=a.type||(i&&(i.close(),i=null),i=s.default.layer({view:t({data:a}),zIndex:30001}),$('input[name="name"]').focus())}}}]);