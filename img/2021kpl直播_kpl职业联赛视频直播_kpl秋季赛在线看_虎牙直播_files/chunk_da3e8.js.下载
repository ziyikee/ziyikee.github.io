(window.HUYA_MAIN_APP_WEBPACK_JSONP=window.HUYA_MAIN_APP_WEBPACK_JSONP||[]).push([[317],{1169:function(t,e,i){"use strict";var n=i(285),a=i.n(n),r=i(14),l=i(295),o=i(0),s=i(50),p=i(4),u=i.n(p),d=i(1170),c=i.n(d);function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var n,a,r=[],l=!0,o=!1;try{for(i=i.call(t);!(l=(n=i.next()).done)&&(r.push(n.value),!e||r.length!==e);l=!0);}catch(t){o=!0,a=t}finally{try{l||null==i.return||i.return()}finally{if(o)throw a}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return b(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return b(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var h=function(){};h.View=function(t){var e=t.onClick,i=t.onDrag,n=t.onDrop,p=t.onJump,d=t.visible,b=void 0===d||d,h=Object(l.d)(),v=Object(r.useRef)(null),m=f(Object(r.useState)(null),2),x=m[0],w=m[1],g=f(Object(r.useState)(null),2),G=g[0],M=g[1],O=f(Object(r.useState)(0),2),U=O[0],k=O[1];Object(r.useEffect)((function(){return o.default.ready((function(t){return t.addTafListener("1130050",w)})),s.a.on("1130052",M,!0),function(){o.default.ready((function(t){return t.removeTafListener("1130050",w)})),s.a.off("1130052",M)}}),[]),Object(r.useEffect)((function(){if(x){var t=setTimeout((function(){w(null)}),8e3);return function(){return clearTimeout(t)}}}),[x]),Object(r.useEffect)((function(){if(G){var t=setTimeout((function(){M(null)}),5e3);return function(){return clearTimeout(t)}}}),[G]);var z,y,q,I=Object(r.useCallback)((function(t){t.stopPropagation(),w(null)}),[]),P=Object(r.useCallback)((function(t){if(null!=v.current){t.preventDefault(),t.stopPropagation(),i(),k(1);var e=v.current,a=e.offsetParent,r=a.offsetWidth-e.offsetWidth,l=a.offsetHeight-e.offsetHeight,o=r,s=e.offsetTop,p=t.clientX,d=t.clientY;e.style.left="".concat(o,"px");var c=o,f=s,b=u.a.throttle((function(t){t.stopPropagation(),t.preventDefault();var i=t.clientX-p,n=t.clientY-d;c=o+i,f=s+n,e.style.left="".concat(Math.max(0,Math.min(c,r)),"px"),e.style.top="".concat(Math.max(0,Math.min(f,l)),"px"),e.style.bottom="auto"}),24);document.addEventListener("mousemove",b,!0),document.addEventListener("mouseup",(function t(i){document.removeEventListener("mousemove",b,!0),document.removeEventListener("mouseup",t,!0),k(2),e.style.left="".concat(o,"px"),setTimeout((function(){k(0),n(o,f),e.style.left=""}),150)}),!0)}}),[i,n]),R=Object(r.useCallback)((function(t){P(t);var i=!1;setTimeout((function(){i=!0}),200);var n=t.target;n.addEventListener("mouseup",(function t(){n.removeEventListener("mouseup",t,!1),i||e()}),!1)}),[e,P]),C=Object(r.useMemo)((function(){if(G){var t="".concat(G.sActionUrl).match(/moment_id\=(\d+)/);if(t)return t[1]}}),[G]);return r.default.createElement("div",{className:a()(c.a["ball-view"],b?[c.a.normal,c.a.drag,c.a.drop][U]:c.a.hidden,(z={},y=c.a["theme-dark"],q=h==l.a,y in z?Object.defineProperty(z,y,{value:q,enumerable:!0,configurable:!0,writable:!0}):z[y]=q,z)),ref:v},r.default.createElement("div",{className:c.a.wrapper},r.default.createElement("div",{className:c.a.ball,onMouseDown:R,title:"按住可拖动"},r.default.createElement("b",null,r.default.createElement("i",null))),x&&r.default.createElement("div",{className:c.a.tips,onClick:function(){return p(x.lMomId)}},r.default.createElement("div",{className:c.a["tips-hd"]},r.default.createElement("img",{className:c.a["tips-avatar"],src:x.sAvatarUrl}),r.default.createElement("span",{className:c.a["tips-title"]},x.sNick)),r.default.createElement("div",{className:c.a["tips-content"]},x.sMomContent),r.default.createElement("i",{className:c.a["tips-x"],onClick:I})),G&&r.default.createElement("div",{className:c.a.notice,onClick:function(){return p(C)}},r.default.createElement("div",{className:c.a["notice-title"]},G.sMainTitle),r.default.createElement("div",{className:c.a["notice-subtitle"]},G.sSubTitle))))},h.Edit=function(t){var e=t.onClick,i=void 0===e?function(){}:e;return r.default.createElement("i",{className:a()(c.a["ball-edit"]),onClick:i})},e.a=h},1170:function(t,e,i){var n=i(1171);"string"==typeof n&&(n=[[t.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};i(287)(n,a);n.locals&&(t.exports=n.locals)},1171:function(t,e,i){var n=i(286),a=i(288),r=i(1172),l=i(1173),o=i(1174),s=i(1175),p=i(1176);e=n(!1);var u=a(r),d=a(l),c=a(o),f=a(s),b=a(p);e.push([t.i,".ball-view--19sRps-ih3GIs4n1CGztMM{position:absolute;bottom:200px;left:-56px;width:56px;height:52px;cursor:pointer}.ball-view--19sRps-ih3GIs4n1CGztMM .wrapper--1PhnOqJco5xzVsT1daO13T{position:absolute;top:0;right:0;height:100%;width:auto}.ball-view--19sRps-ih3GIs4n1CGztMM .wrapper--1PhnOqJco5xzVsT1daO13T .ball--SUy7qX0rw4HwmKOq3lH_x{width:56px;overflow:hidden}.ball-view--19sRps-ih3GIs4n1CGztMM.normal--3aDEO-ZIT8flUnkBF3mgYT .ball--SUy7qX0rw4HwmKOq3lH_x{transition:width 200ms ease-out 3s;width:28px}.ball-view--19sRps-ih3GIs4n1CGztMM.normal--3aDEO-ZIT8flUnkBF3mgYT:hover .ball--SUy7qX0rw4HwmKOq3lH_x{transition:width 120ms ease-in 0s;width:56px}.ball-view--19sRps-ih3GIs4n1CGztMM.drag--2cYTGYQel1RP4WqaCbYfat{cursor:move}.ball-view--19sRps-ih3GIs4n1CGztMM.drag--2cYTGYQel1RP4WqaCbYfat .ball--SUy7qX0rw4HwmKOq3lH_x b{padding:5px;border-radius:50%}.ball-view--19sRps-ih3GIs4n1CGztMM.drop--Oqjpv7qN2X3yneZOksyht{transition:left 120ms ease-in}.ball-view--19sRps-ih3GIs4n1CGztMM.drop--Oqjpv7qN2X3yneZOksyht .ball--SUy7qX0rw4HwmKOq3lH_x b{padding:5px;border-radius:50%}.ball-view--19sRps-ih3GIs4n1CGztMM.hidden--bytDRR1VGdSER9-E2d3Ug{opacity:0}.ball-view--19sRps-ih3GIs4n1CGztMM .ball--SUy7qX0rw4HwmKOq3lH_x b{display:inline-block;position:relative;top:0;left:0;width:40px;height:40px;padding:5px 10px 5px 5px;background:#fff;border:1px solid #edeef2;box-shadow:0px 2px 6px rgba(0,0,0,0.06);border-radius:100px 0 0 100px}.ball-view--19sRps-ih3GIs4n1CGztMM .ball--SUy7qX0rw4HwmKOq3lH_x i{display:inline-block;width:100%;height:100%;border-radius:50%;background-image:url("+u+");background-size:cover}.ball-view--19sRps-ih3GIs4n1CGztMM .tips--29W1_idOaVSU_kvloUF9gD{position:absolute;right:100%;top:0px;margin-right:15px;width:200px;color:#888;background:#fff;border:1px solid #d7d7d7;border-radius:4px;padding:10px 13px;box-shadow:0px 2px 5px rgba(34,34,34,0.2)}.ball-view--19sRps-ih3GIs4n1CGztMM .tips--29W1_idOaVSU_kvloUF9gD::after{content:'';display:block;position:absolute;width:8px;height:8px;border-right:1px solid #d7d7d7;border-top:1px solid #d7d7d7;transform:rotate(45deg);right:-5px;top:20px;background:inherit}.ball-view--19sRps-ih3GIs4n1CGztMM .tips--29W1_idOaVSU_kvloUF9gD .tips-x--3pB9GRunLPuhhZQnPGz3sB{position:absolute;right:9px;top:9px;width:9px;height:9px;background:url("+d+") 50% no-repeat;opacity:0.8}.ball-view--19sRps-ih3GIs4n1CGztMM .tips--29W1_idOaVSU_kvloUF9gD .tips-x--3pB9GRunLPuhhZQnPGz3sB:hover{opacity:1}.ball-view--19sRps-ih3GIs4n1CGztMM .tips--29W1_idOaVSU_kvloUF9gD .tips-hd--1qBL6pF2nO32hTweBUOD3-{width:100%;overflow:hidden}.ball-view--19sRps-ih3GIs4n1CGztMM .tips--29W1_idOaVSU_kvloUF9gD .tips-avatar--axP1MiaO6YK-o1-gNq5Aq{float:left;width:24px;height:24px;border-radius:50%}.ball-view--19sRps-ih3GIs4n1CGztMM .tips--29W1_idOaVSU_kvloUF9gD .tips-title--1rbZRzwGy3ms-YDjSKDzvI{display:block;margin-left:30px;line-height:24px;font-size:12px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.ball-view--19sRps-ih3GIs4n1CGztMM .tips--29W1_idOaVSU_kvloUF9gD .tips-content--338SPUTEBbuTOkqRNBhD6G{margin-top:5px;font-size:14px}.ball-view--19sRps-ih3GIs4n1CGztMM.theme-dark--E3P2q5nOJxrrrzqLFMLcf .tips--29W1_idOaVSU_kvloUF9gD{color:#fff;background:#000;background:rgba(0,0,0,0.8);border:1px solid rgba(0,0,0,0.8)}.ball-view--19sRps-ih3GIs4n1CGztMM.theme-dark--E3P2q5nOJxrrrzqLFMLcf .tips--29W1_idOaVSU_kvloUF9gD::after{border-right:1px solid rgba(0,0,0,0.8);border-top:1px solid rgba(0,0,0,0.8)}.ball-view--19sRps-ih3GIs4n1CGztMM.theme-dark--E3P2q5nOJxrrrzqLFMLcf .tips-x--3pB9GRunLPuhhZQnPGz3sB{background-image:url("+c+")}.ball-view--19sRps-ih3GIs4n1CGztMM .notice--2xhuQUQ5B7SYPbLNeuoklp{position:absolute;right:100%;top:-16px;margin-right:5px;width:230px;height:91px;background:url("+f+") 50% no-repeat;background-size:cover;box-sizing:border-box;padding:20px}.ball-view--19sRps-ih3GIs4n1CGztMM .notice--2xhuQUQ5B7SYPbLNeuoklp .notice-title--1VB4SFfIx6BoihYU6Qe9UZ,.ball-view--19sRps-ih3GIs4n1CGztMM .notice--2xhuQUQ5B7SYPbLNeuoklp .notice-subtitle--3mj53Lf_ODP2XUONjsrPIq{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.ball-view--19sRps-ih3GIs4n1CGztMM .notice--2xhuQUQ5B7SYPbLNeuoklp .notice-title--1VB4SFfIx6BoihYU6Qe9UZ{font-size:16px}.ball-view--19sRps-ih3GIs4n1CGztMM .notice--2xhuQUQ5B7SYPbLNeuoklp .notice-subtitle--3mj53Lf_ODP2XUONjsrPIq{margin-top:1px;font-size:12px}.ball-edit--3fiGdl35X1uqj9bLVDlQzX{position:absolute;bottom:120px;right:5px;width:60px;height:60px;background:url("+b+") left top no-repeat;background-size:cover;cursor:pointer}\n",""]),e.locals={"ball-view":"ball-view--19sRps-ih3GIs4n1CGztMM",wrapper:"wrapper--1PhnOqJco5xzVsT1daO13T",ball:"ball--SUy7qX0rw4HwmKOq3lH_x",normal:"normal--3aDEO-ZIT8flUnkBF3mgYT",drag:"drag--2cYTGYQel1RP4WqaCbYfat",drop:"drop--Oqjpv7qN2X3yneZOksyht",hidden:"hidden--bytDRR1VGdSER9-E2d3Ug",tips:"tips--29W1_idOaVSU_kvloUF9gD","tips-x":"tips-x--3pB9GRunLPuhhZQnPGz3sB","tips-hd":"tips-hd--1qBL6pF2nO32hTweBUOD3-","tips-avatar":"tips-avatar--axP1MiaO6YK-o1-gNq5Aq","tips-title":"tips-title--1rbZRzwGy3ms-YDjSKDzvI","tips-content":"tips-content--338SPUTEBbuTOkqRNBhD6G","theme-dark":"theme-dark--E3P2q5nOJxrrrzqLFMLcf",notice:"notice--2xhuQUQ5B7SYPbLNeuoklp","notice-title":"notice-title--1VB4SFfIx6BoihYU6Qe9UZ","notice-subtitle":"notice-subtitle--3mj53Lf_ODP2XUONjsrPIq","ball-edit":"ball-edit--3fiGdl35X1uqj9bLVDlQzX"},t.exports=e}}]);