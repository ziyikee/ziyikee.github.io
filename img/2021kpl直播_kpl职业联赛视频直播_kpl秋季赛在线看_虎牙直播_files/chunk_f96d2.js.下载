(window.HUYA_MAIN_APP_WEBPACK_JSONP=window.HUYA_MAIN_APP_WEBPACK_JSONP||[]).push([[417],{1376:function(e,t,n){var a=n(1377);"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(287)(a,i);a.locals&&(e.exports=a.locals)},1377:function(e,t,n){(t=n(286)(!1)).push([e.i,".panel--2ziT75l8g5Y26rBqbNQ0tG{padding:7px 15px 9px;color:#666}.panel--2ziT75l8g5Y26rBqbNQ0tG .options--3wh7HduPliZ0iVn3ViH0JO .item--9zT75IqU_HR9GOsTNA0cU{white-space:nowrap;cursor:pointer}.panel--2ziT75l8g5Y26rBqbNQ0tG .options--3wh7HduPliZ0iVn3ViH0JO .item--9zT75IqU_HR9GOsTNA0cU+.item--9zT75IqU_HR9GOsTNA0cU{margin-top:5px}\n",""]),t.locals={panel:"panel--2ziT75l8g5Y26rBqbNQ0tG",options:"options--3wh7HduPliZ0iVn3ViH0JO",item:"item--9zT75IqU_HR9GOsTNA0cU"},e.exports=t},1462:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mount=void 0;var a=n(12),i=(0,a.__importStar)(n(28)),l=(0,a.__importDefault)(n(42)),r=(0,a.__importDefault)(n(3)),o=(0,a.__importDefault)(n(323)),u=(0,a.__importDefault)(n(311)),c=n(306),f=n(15),d=n(4),s=(0,a.__importDefault)(n(348)),p=n(77),v=(0,a.__importStar)(n(44)),m=(0,a.__importDefault)(n(1376));function h(){return[{value:v.ShieldType.Ad,text:"屏蔽直播间广告",enable:!!v.default.cfg[v.ShieldType.Ad]},{value:v.ShieldType.EnterMessage,text:"屏蔽聊天区进场消息",enable:!!v.default.cfg[v.ShieldType.EnterMessage]},{value:v.ShieldType.GiftMessage,text:"屏蔽聊天区礼物消息",enable:!!v.default.cfg[v.ShieldType.GiftMessage]},{value:v.ShieldType.GiftEffect,text:"屏蔽聊天区礼物特效",enable:!!v.default.cfg[v.ShieldType.GiftEffect]},{value:v.ShieldType.VideoEffect,text:"屏蔽视频区特效通知",enable:!!v.default.cfg[v.ShieldType.VideoEffect]}]}t.mount=function(){var e=document.createElement("div");e.id="J_RoomShield",document.body.appendChild(e),l.default.render(i.default.createElement(T,null),e)};var E=(0,d.once)((function(){return document.getElementById("J-room-chat-shield")})),_=(0,d.once)((function(){return new Promise((function(e,t){var n=(0,d.getUid)();n?e((0,p.getUserCard)(n,r.default.lp)):t(new Error("未登录"))}))}));function T(){var e=(0,i.useState)(h),t=e[0],n=e[1];(0,i.useEffect)((function(){function e(){n(h())}return v.default.on("change",e),function(){v.default.off("change",e)}}),[]);var a=(0,s.default)(!1,120),l=a[0],r=a[1],d=a[2];a[3];(0,i.useEffect)((function(){var e=E();if(e)return e.addEventListener("mouseenter",r,!1),e.addEventListener("mouseleave",d,!1),function(){e.removeEventListener("mouseenter",r,!1),e.removeEventListener("mouseleave",d,!1)}}),[r,d]),(0,i.useEffect)((function(){var e=E();e&&(t.find((function(e){return e.enable}))?-1==e.className.indexOf(" shield-on")&&(e.className+=" shield-on"):e.className=e.className.replace(" shield-on",""))}),[t]),(0,i.useEffect)((function(){var e=E();e&&(l?-1==e.className.indexOf(" shield-active")&&(e.className+=" shield-active"):e.className=e.className.replace(" shield-active",""))}),[l]);var p=(0,i.useCallback)((function(e,n){var a=n?0:1;v.default.set(e,a);var i=t.find((function(t){return t.value==e}));(0,f.reportEvent)({eid:"click/zhibo/shield/"+e+"/"+a,eid_desc:"点击/直播/屏蔽/"+(null==i?void 0:i.text)+"/"+(a?"选中":"取消")})}),[t]),T=(0,i.useState)(!1),N=T[0],g=T[1];return(0,i.useEffect)((function(){l&&_().then((function(e){var t=66==e.tNobleInfo.tLevelAttr.iAttrType;g(t)})).catch((function(){}))}),[l]),(0,i.useEffect)((function(){var e=E(),n=function(){var e=t.filter((function(e){var t=e.value;return N||t!=v.ShieldType.Ad})),n=e.filter((function(e){return e.enable})),a={},i=n.length<e.length;e.forEach((function(e){var t=e.value;a[t]=i?1:0})),v.default.setup(a),(0,f.reportEvent)({eid:"click/zhibo/shield/all/"+(i?1:0),eid_desc:"点击/直播/屏蔽/所有/"+(i?"选中":"取消")})};if(e)return e.addEventListener("click",n,!1),function(){e.removeEventListener("click",n,!1)}}),[t,N]),i.default.createElement(o.default,{style:{left:"11px",display:l?"block":"none"}},i.default.createElement(u.default,{absissa:78},i.default.createElement("div",{className:m.default.panel,onMouseEnter:r,onMouseLeave:d},i.default.createElement("div",{className:m.default.options},t.map((function(e,t){var n=e.value,a=e.text,l=e.enable;return i.default.createElement("div",{className:m.default.item,style:{display:N||n!=v.ShieldType.Ad?"block":"none"},key:t},i.default.createElement(c.Checkbox,{value:n,text:a,checked:l,onClick:p}))}))))))}}}]);