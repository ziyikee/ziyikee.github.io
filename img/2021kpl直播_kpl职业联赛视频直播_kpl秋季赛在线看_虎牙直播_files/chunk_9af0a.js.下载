(window.HUYA_MAIN_APP_WEBPACK_JSONP=window.HUYA_MAIN_APP_WEBPACK_JSONP||[]).push([[34],{1009:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(12),r=(0,o.__importDefault)(n(4)),a=(0,o.__importDefault)(n(419)),i=(0,o.__importDefault)(n(75));(0,o.__importDefault)(n(325)).default.on("resultNotice",(function(e){var t=e.vEmoticon.value[0],n=t?i.default.findEmoticon(t.sEmoticonId):void 0;if(n){var s=t.iType,c=(t.sEmoticonId,t.iFrameIdx),u=n.type,f=n.url,d=n.extraUrl,m=n.flexiUrl;if(1===s){var p=function(e){var t=e.id,n=e.extraUrl;if(!l[t]){var o=JSON.parse(HUYA_UTIL.unescape(n)),a=o.framesize,i=o.url,s="mul-emot-animation-"+t,c="\n@keyframes mul-emot-"+t+" {\n    0% { background-position: 0 0; }\n    100% { background-position: -"+54*(a-1)+"px  0; }\n}\n."+s+" {\n    background: url("+i+") no-repeat;\n    animation: mul-emot-"+t+" "+83*a+"ms steps("+(a-1)+") infinite;\n}";r.default.importStyle(c),l[t]=s}return l[t]}(n),g=a.default.showMessage((0,o.__assign)((0,o.__assign)({},e.tDecoration),{noXss:!0,sContent:'<i class="mul-emot '+p+'"></i>'})).elm,v=JSON.parse(HUYA_UTIL.unescape(d)).framesize;setTimeout((function(){var e=g.querySelector(".mul-emot");e.className="mul-emot",Object.assign(e.style,{backgroundImage:"url("+f+")",backgroundPositionX:"calc(0px - 54px * "+(c+1)+")"})}),2*v*83)}else if(2===s){var h=m.replace(".png","_3.png")||d||f,y=0===u?"28px":2===u?"20px":"auto";a.default.showMessage((0,o.__assign)((0,o.__assign)({},e.tDecoration),{noXss:!0,sContent:'<img src="'+h+'" style="max-height: '+y+';" />'}))}}}));var l={}},294:function(e,t,n){"use strict";n.r(t);var o=n(19);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=c(e);if(t){var r=c(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(s,e);var t,n,o,r=l(s);function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r.call(this)}return t=s,(n=[{key:"open",value:function(e){e&&this.emit("open",e)}},{key:"close",value:function(){this.emit("close")}}])&&a(t.prototype,n),o&&a(t,o),s}(n.n(o).a);t.default=new u},419:function(e,t,n){"use strict";n.r(t);n(0),n(2);var o=n(33),r=n.n(o),a=n(326),i=n.n(a),l=n(74),s=n(4),c=n(8),u=n(294),f=n(998),d=n(321);function m(e){return"string"!=typeof e?e:e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;")}function p(){$.extend(this,new c.a)}p.prototype={showMessage:function(e){var t=e.tUserInfo,n=e.sContent,a=t.lUid&&Object(s.getUid)()&&t.lUid==Object(s.getUid)();try{n=decodeURIComponent(e.sContent)}catch(e){}var l=e.noXss?n:m(n),c=0,d=!1,p=[];a&&p.push('<span style="display:inline-block;line-height:22px;color:#FFA900;">[我]</span>');var y=e.vDecorationPrefix.value,b=null,T=-1,I=null;if(y)for(var S=0,C=y.length;S<C;S++){var _=y[S].iAppId,w=y[S].iViewType,O=y[S].vData,M="";0==w&&(5e3===_?I=Object(f.getBullbleInfo)(O):g[_]&&(M=g[_](O))),1==w&&(M=v(O)),2==w&&(M=O.sGifUrl&&TT.isSupportWebp()?'<img src="'+TT.trimUrl(O.sGifUrl).replace(".webp","_3.webp")+'" />':'<img src="'+TT.trimUrl(O.sUrl).replace(".png","_3.png")+'" />'),10425==_&&O.iVipLevel,10100==_&&(1==O.iType||2==O.iType)||10090==_?b?(10090==b.iAppId&&10100==_&&1==O.iType||10100==b.iAppId&&2==b.vData.iType&&10090==_)&&(b=y[S],p.splice(T,1,M)):(b=y[S],T=p.length,p.push(M)):p.push(M),10200==_&&(c=O.iLevel,d=66==O.tLevel.iAttrType)}var P="",F=e.vDecorationSuffix.value;F.length>0&&F.forEach((function(e){var t=e.iViewType,n=e.vData;if(2==t){var o=n.sUrl,r=n.sGifUrl,a=r&&TT.isSupportWebp()?r:o;if(a){var i=a.lastIndexOf(".");P+='<img src="'.concat(TT.trimUrl(a.slice(0,i)),"_3").concat(a.slice(i),'" />')}}1==t&&n&&(P+=v(n))}));var A=t.sNickName;try{A=m(HUYA_UTIL.unescape(decodeURIComponent(A)))}catch(e){A=m(HUYA_UTIL.unescape(A))}var k={uid:t.lUid,nick:A,msg:l};l=i.a.replaceEmoticonTextWithHTMLImg(l);var U=h(e.tFormat.iFontColor),B=0!=U?' style="color: #'+U+';"':"",x="",E="";if(-1!=e.tFormat.iNickNameFontColor&&(E=' style="color: #'+h(e.tFormat.iNickNameFontColor)+';" '),I&&(I.background||I.icon)){var j=I.background,R=I.icon,N=I.color;x='<div class="msg-bubble"'.concat(j?' style="background-image:url('.concat(j,');"'):"",">")+(R?'<img class="msg-bubble-icon" src="'.concat(R,'" />'):"")+'<p class="msg-bubble-decorationPrefix">'+p.join("")+'</p><span class="name J_userMenu" title="点击查看个人信息"'+E+">"+A+'</span><p class="msg-bubble-decorationSuffix">'+P+'</p><span class="colon">:</span>'+'<span class="msg"'.concat(N&&' style="color:'.concat(N,';"'),">").concat(l,"</span>")+"</div>"}else x=c&&c>0?'<div class="msg-nobleSpeak box-noble-level-'+c+(d?" legendary":"")+'"><p class="msg-nobleSpeak-decorationPrefix">'+p.join("")+'</p><span class="name J_userMenu" title="点击查看个人信息"'+E+">"+A+'</span><p class="msg-nobleSpeak-decorationSuffix">'+P+'</p><span class="colon">:</span><span class="msg"'+B+">"+l+"</span></div>":'<div class="msg-normal"><p class="msg-normal-decorationPrefix">'+p.join("")+'</p><span class="name J_userMenu" title="点击查看个人信息"'+E+">"+A+'</span><p class="msg-normal-decorationSuffix">'+P+'</p><span class="colon">:</span><span class="msg"'+B+">"+l+"</span></div>";var $=Object(o.createMessage)((function(e,t){var n=document.createElement("div");return n.innerHTML=x,n.addEventListener("click",(function(e){if(e.target&&-1!=e.target.className.indexOf("J_userMenu")){u.default.open({uid:k.uid,muteText:k.msg});try{ya.reportProductEvent({eid:"click/zhibo/gp/yhm",eid_desc:"点击/直播/公屏/用户名"})}catch(e){}}}),!1),n}));return r.a.append($),$},onSpeakMessage:function(e){var t=e.tUserInfo;if(t&&t.lUid<0){var n=h(e.tFormat.iFontColor),o=0==n?"":' style="color: #'+n+';"',a=t.sNickName||"";if(a)try{a=decodeURIComponent(a)}catch(e){}var i=e.sContent;if(i)try{i=decodeURIComponent(i)}catch(e){}var l='<div class="msg-sys">'+(a?'<span class="msg-sys-admin">'+_.escape(a)+'</span><span class="colon">:</span>':"")+'<span class="msg"'+o+">"+_.escape(i).replace(/\n/g,"<br />")+"</span></div>";r.a.append((function(e,t){var n=document.createElement("div");return n.innerHTML=l,n}))}else this.showMessage(e)}};var g={5010:function(e){var t=e.iFlag,n=e.sPrefix,o=e.iColor;if(t&&n){var r=o>0?' style="color: #'.concat(Object(s.toRgb)(o),';"'):"",a=m(n);return'<span class="msg-InterConnect"'.concat(r,' title="').concat(a,'">').concat(a,"</span>")}return""},10350:function(e){var t=e.lLevel,n=e.tTeamMedalInfo.sTeamWidgetPrefix;return t>0&&n?'<img src="'.concat(TT.trimUrl(n).replace(/\/app\//,"/web/").replace(/<level>|&lt;level&gt;/,"".concat(t)),'" />'):""},10090:function(e){return'<img src="'+TT.trimUrl(e.sUrl).replace(".png","_3.png")+'" />'},10100:function(e){return 1==e.iType||2==e.iType?'<img src="'+TT.trimUrl(e.sManagerDecorationUrl).replace(".png","_3.png")+'" />':""},10400:function(e){var t=e.lBadgeId,n=e.iBadgeLevel,o=e.iBadgeType,r=e.sBadgeName,a=e.tFaithInfo.sFaithName,i=e.tSuperFansInfo.iSFFlag,s=e.iCustomBadgeFlag,c=l.CustomFansBadge.getCustomBadgeAssets(s,e);return c?d.a.createCustom(n,r,t,i,c):d.a.create(n,1==o?a:r,t,o,i)},10399:function(e){var t=e.sBadgeName,n=e.tCompactInfo,o=n.lBadgeId,r=n.iBadgeLevel;return d.a.createTrial(o,r,t)},10300:function(e){var t=e.iLevel,n=e.sIcon;if(t>0&&n){var o=n.lastIndexOf("."),r="".concat(TT.trimUrl(n.slice(0,o)),"_3").concat(n.slice(o));return'<img src="'.concat(r,'" />')}return""}};function v(e){if(!e)return"";var t=e.sText,n=e.iColor,o=e.iSize,r=["display: inline-block","line-height: 20px"];return n>0&&r.push("color: #".concat(h(n))),o>0&&r.push("transform: scale(".concat(o/100,")")),'<span style="'.concat(r.join(";"),';">').concat(t,"</span>")}function h(e){if(e>0){var t=e.toString(16);if(t.length<6){for(var n=6-t.length,o="",r=0;r<n;r++)o+="0";e=o+t}else e=t}else e=0;return e}t.default=new p},82:function(e,t,n){"use strict";n.r(t);var o=n(4),r=n.n(o),a=n(0),i=n(2),l=n(3),s=n(54),c=n(91),u=(n(1),n(83)),f=new $.Callbacks,d=[],m={addListener:function(e){f.add(e)},removeListener:function(e){f.remove(e)},addOnceListener:function(e){f.add((function t(){e.apply(this,arguments),f.remove(t)}))},addFilter:function(e){"function"==typeof e&&d.push(e)},removeFilter:function(e){for(var t=[],n=0,o=d.length;n<o;n++)e===d[n]&&t.push(n);for(var r=t.length;r--;)d.splice(t[r],1)}},p=HUYA_UTIL.getCookieVal("udb_uid"),g=HUYA_UTIL.getCookieVal("guid");function v(e){for(var t=!(!p||e.tUserInfo.lUid!=p),n=!(!g||e.tUserInfo.sGuid!=g),o=[].concat(d),r=0,a=o.length;r<a;r++)if(!1===o[r]({data:e,isOwn:t,isSame:n}))return;f.fire({data:e,isOwn:t,isSame:n})}a.default.isH5?a.default.ready((function(e){e.addTafListener("1400",v)})):a.default.on("onSpeakMessage",(function(e){v(e.param)}));var h=n(159),y=new h.a(-1);y.toRgb=function(e){return-1===e?"FFFFFF":r.a.toRgb(e)},y.rgb=function(){return y.toRgb(y.get())};var b=new h.a(-1),T=new h.a(-1);b.change((function(e){y.set(-1!==e?e:T.get())})),T.change((function(e){-1===b.get()&&y.set(e)}));var I=$.extend({defaultColor:T,customColor:b},y,{set:null});m.addListener((function(e){if(e.isOwn&&-1===b.get()){var t=e.data.tBulletFormat;t&&t.iFontColor&&T.set(t.iFontColor)}}));var S=n(337),C=n.n(S);function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var M=[I.toRgb(I.defaultColor.get()),"66FF99","CCFF66","22CECE","FF706E","FF66FF","FFCC00","FF6699"];I.defaultColor.change((function(e){M[0]=I.toRgb(e)}));var P=$.map(M,(function(e,t){return 0===t?-1:parseInt(e,16)}));function F(e){var t,n=e.color,o=e.grade,r=e.badge,a=e.anchorBadge,i=$("#J-room-fans-color"),s=$("#J-color-list-fans");function c(){if("normal"===r.usingBadge.type&&r.usingBadge.id==a.lBadgeId){var e=o.get();s.find(".color-item").each((function(t,n){$(n)[t>e?"addClass":"removeClass"]("locked")})),(r.usingBadge.info.tSuperFansInfo.iSFFlag>0||1==r.usingBadge.info.iVFlag)&&s.find(".color-item").last().removeClass("locked")}else s.find(".color-item").each((function(e,t){$(t)[0!=e?"addClass":"removeClass"]("locked")}))}t="",$.each(M,(function(e,n){t+='<li class="color-item'+("FFFFFF"==n?" color-item1":"")+'" style="background-color: #'+n+';"></li>'})),s.html(t),n.defaultColor.change((function(e){var t=I.toRgb(e);s.find(".color-item").eq(0).css("backgroundColor","#"+t)["FFFFFF"==t?"addClass":"removeClass"]("color-item1")})),c(),o.change(c),r.on("use",c),r.on("scoreChange:normal",c);var u="ROOM_CHAT_BARRAGE_COLOR_NEW_"+TT.env+l.default.lp;function f(){if("normal"===r.usingBadge.type&&r.usingBadge.id==a.lBadgeId){var e=function(){localStorage.removeItem(u),f.clear()},t=s.find(".color-item").eq(o.get());t.html('<span style="position: absolute;width: 25px;height: 20px;color: #fff;background-color: #f50;text-align: center;line-height: 20px;border-radius: 10px; top: -7px;right: -10px; z-index:2">新</span>'),i.one("mouseleave",e),t.one("mouseenter",e),r.on("use",(function(){i.off("mouseleave",e),t.off("mouseenter",e)}))}}function d(e){var t=_.indexOf(M,e);-1!=t?s.find(".color-item").removeClass("current").eq(t).addClass("current"):s.find(".color-item").removeClass("current")}function m(e,t){var n=$('<div class="color-grade-tip common-panel-tip">'+e+"</div>");i.append(n),n.css({left:t.position().left+24-n.outerWidth()/2,top:t.position().top-25})}o.change((function(){localStorage.setItem(u,1),f(),TT.event.emit("BARRAGE_COLOR_UNLOCK")})),localStorage.getItem(u)&&f(),r.on("use",(function(){"normal"===r.usingBadge.type&&r.usingBadge.id==a.lBadgeId?localStorage.getItem(u)&&f():f.clear()})),f.clear=function(){s.find(".color-item").eq(o.get()).html("")},d(n.rgb()),n.change((function(){d(n.rgb())})),r.on("use",(function(){n.customColor.set(P[0])})),s.on("mouseenter",".color-item",(function(e){var t=$(this),n=t.index();if(t.hasClass("locked")){var o="";if(a.lBadgeId>0)o=r.normalBadge.find(a.lBadgeId)?"normal"===r.usingBadge.type&&r.usingBadge.id==a.lBadgeId?n==M.length-1?"超粉/钻粉专属":"需要拥有【"+r.find(a.lBadgeId).name+'】徽章<span class="tip-mark">'+A[n]+"级</span>":"请戴上您的【"+r.find(a.lBadgeId).name+"】徽章":n==M.length-1?"超粉/钻粉专属":"需要拥有【"+(1==a.iBadgeType?a.tFaithItem.sFaithName:a.sBadgeName)+'】徽章<span class="tip-mark">'+A[n]+"级</span>";else o="主播暂未开通粉丝徽章";m(o,t)}})).on("mouseleave",".color-item",(function(){m.clear()})).on("click",".color-item",(function(){var e=$(this),t=e.index();if(!e.hasClass("locked")&&!e.hasClass("current")){n.customColor.set(P[t]);try{ya.reportProductEvent({eid:"click/room/chatColor/"+t,eid_desc:"点击/直播间/弹幕颜色/"+M[t]})}catch(e){}}})),m.clear=function(){$(".color-grade-tip").remove()}}var A=[0,4,6,8,10,14,18];function k(e){var t=0;return $.isNumeric(e)&&("number"!=typeof e&&(e=parseInt(e,10)),$.each(A,(function(n,o){if(!(e>=o))return!1;t=n}))),t}var U={createPalette:function(){Promise.all([C.a.ensureGetBadgeInfoList(),C.a.getCurrentPresenterBadgeInfo()]).then((function(e){var t=w(e,2),n=(t[0],t[1]),o=C.a.normalBadge.find(n.lBadgeId),r=new h.a(k(o?o.iBadgeLevel:0));C.a.on("scoreChange:normal",(function(e){var t=e.tBadgeInfo,o=t.lBadgeId,a=t.iBadgeLevel;o==n.lBadgeId&&r.set(k(a))}));new F({color:I,grade:r,badge:C.a,anchorBadge:n})}))}},B=n(28),x=n.n(B),E=n(42),j=n.n(E);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||G(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||G(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){if(e){if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function q(e){var t=e.userTeamMedalInfo,n=void 0===t?[]:t,o=e.usingTeamMedalId,r=e.teamMedalConfig,a=H(Object(B.useState)(D(n)),2),i=a[0],l=a[1],s=H(Object(B.useState)((function(){return i.find((function(e){return e.teamMedalInfo.teamMedalId==o}))||{teamMedalInfo:{teamMedalId:0},level:0}})),2),c=s[0],f=s[1];Object(B.useEffect)((function(){var e=function(e){return l([].concat(D(i),[N({},e)]))},t=function(e){var t=i.find((function(t){return t.teamMedalInfo.teamMedalId==e.teamMedalInfo.teamMedalId}));t&&(Object.assign(t,e),l(D(i)),t.teamMedalInfo.teamMedalId==c.teamMedalInfo.teamMedalId&&f(N(N({},c),t)))},n=function(e){return f(N({},e))};return u.default.on("add",e),u.default.on("upgrade",t),u.default.on("use",n),function(){u.default.off("add",e),u.default.off("upgrade",t),u.default.off("use",n)}}),[i,c]);var d=H(Object(B.useState)((function(){var e=r.colourLevelInfo||{};return[I.defaultColor.get()].concat(D(Object.keys(e).sort((function(t,n){return e[t]-e[n]}))))})),2),m=d[0],p=d[1];Object(B.useEffect)((function(){I.defaultColor.change((function(e){m[0]=e,p(D(m))}));var e=function(){I.customColor.set(-1),h(0)};return u.default.on("use",e),function(){!function(e){throw new TypeError('"'+e+'" is read-only')}("setColors"),u.default.off("use",e)}}),[m]);var g=H(Object(B.useState)(0),2),v=g[0],h=g[1];return m.map((function(e,t){var n=0!=t&&(0==c.teamMedalInfo.teamMedalId||c.level<r.colourLevelInfo[e]),o={color:I.toRgb(e),locked:n,selected:v==t,onPick:function(){I.customColor.set(e),h(t)},onMouseEnter:function(t){if(n){var o=i.length?0==c.teamMedalInfo.teamMedalId?"请佩戴您的战队勋章":"需要拥有【".concat(c.teamMedalInfo.teamName,"】勋章").concat(r.colourLevelInfo[e],"级"):"需要拥有战队勋章",a=$(t.target).position();j.a.render(x.a.createElement(Y,{msg:o,origin:a}),document.getElementById("J-room-club-tips"))}},onMouseLeave:function(e){j.a.unmountComponentAtNode(document.getElementById("J-room-club-tips"))},key:t};return x.a.createElement(z,o)}))}function z(e){var t=e.color,n=e.locked,o=e.selected,r=e.onPick,a=e.onMouseEnter,i=e.onMouseLeave;return x.a.createElement("li",{className:["color-item","FFFFFF"==t?" color-item1":"",n?" locked":"",o?" current":""].join(""),style:{backgroundColor:"#".concat(t)},onClick:function(){n||o||r(t)},onMouseEnter:a,onMouseLeave:i})}function Y(e){var t=e.msg,n=e.origin,o=n.left,r=n.top,a=Object(B.useCallback)((function(e){if(e){var t=$(e);t.css({left:o+24-t.outerWidth()/2,top:r-25})}}),[]);return x.a.createElement("div",{ref:a,className:"common-panel-tip"},t)}var W={createPalette:function(){Promise.all([u.default.getTeamMedalConfig(),u.default.getUserTeamMedalInfo()]).then((function(e){var t=H(e,2),n=t[0],o=t[1],r={userTeamMedalInfo:o.userTeamMedalInfo,usingTeamMedalId:o.usingTeamMedalId,teamMedalConfig:n};j.a.render(x.a.createElement(q,r),document.getElementById("J-color-list-club"))}))}},V=n(87),K=[4,2],Z=[0,20],X=function(e){var t=0;if($.isNumeric(e)){e=parseInt(e,10);for(var n=0,o=Z.length;n<o&&e>=Z[n];n++)t=n}return t};function Q(e){var t,n=e.size,o=e.grade,r=$(".room-font-list");function a(e,t){var n=$('<div class="font-grade-tip common-panel-tip"><span class="tip-mark">'+e+"级</span>解锁</div>");n.css({left:t.left-10,top:t.top-35}),$("#J-room-speaking-box").append(n)}function i(e){r.find(".room-font-item").removeClass("on").eq(_.indexOf(K,e)).addClass("on")}a.clear=function(){$(".font-grade-tip").remove()},t="",$.each(K,(function(e,n){t+='<li class="room-font-item room-font-item'+(e+1)+'"></li>'})),r.html(t),r.on("click",".room-font-item",(function(e){e.preventDefault();var t=$(this).index();if(o.get()>=t&&n.get()!=K[t]){n.set(K[t]);try{ya.reportProductEvent({eid:"click/room/chatSize/"+t,eid_desc:"点击/直播间/弹幕大小/"+K[t]})}catch(e){}}})).on("mouseenter",".room-font-item",(function(e){var t=$(this).index();t>o.get()&&a(Z[t],$(this).position())})).on("mouseleave",".room-font-item",(function(e){a.clear()})),i(n.get()),n.change(i)}var ee=new h.a(K[0]);var te={get:ee.get,change:ee.change,createPalette:function(){V.default.get((function(e){var t=new h.a(X(e));V.default.change((function(e){var n=X(e);n!==t.get()&&t.set(n)}));new Q({size:ee,grade:t})}))}},ne=[1,3,2],oe=[0,25,30],re=function(e){var t=0;if($.isNumeric(e)){e=parseInt(e,10);for(var n=0,o=oe.length;n<o&&e>=oe[n];n++)t=n}return t};function ae(e){var t,n,o,r=e.pos,a=e.grade,i=$(".room-select-list");function l(e,t){var n=$('<div class="font-grade-tip common-panel-tip"><span class="tip-mark">'+e+"级</span>解锁</div>");n.css({left:t.left-10,top:t.top-35}),$("#J-room-speaking-box").append(n)}function s(e){i.find(".room-select-item").removeClass("on").eq(_.indexOf(ne,e)).addClass("on")}l.clear=function(){$(".font-grade-tip").remove()},t=[1,3,2],n=["正常","顶部","底部"],o="",$.each(ne,(function(e,r){o+='<li class="room-select-item room-select-item'+t[e]+'">',o+='<div class="room-select-pic"></div><span class="room-select-text">'+n[e]+"</span>",o+="</li>"})),i.html(o),i.on("click",".room-select-item",(function(e){e.preventDefault();var t=$(this).index();if(a.get()>=t&&r.get()!=ne[t]){r.set(ne[t]);try{ya.reportProductEvent({eid:"click/room/chatPos/"+t,eid_desc:"点击/直播间/弹幕位置/"+ne[t]})}catch(e){}}})).on("mouseenter",".room-select-item",(function(e){var t=$(this).index();t>a.get()&&l(oe[t],$(this).position())})).on("mouseleave",".room-select-item",(function(e){l.clear()})),s(r.get()),r.change(s)}var ie=new h.a(ne[0]);var le={get:ie.get,change:ie.change,createPalette:function(){V.default.get((function(e){var t=new h.a(re(e));V.default.change((function(e){var n=re(e);n!==t.get()&&t.set(n)}));new ae({pos:ie,grade:t})}))}},se=n(419),ce=n(8),ue=n(301),fe=n(92),de=n(1003),me=6613==i.default.gid||7001==i.default.gid,pe=10,ge=me?666:5,ve=21;var he=null,ye=null,be=1,Te=!1,Ie=ve,Se=$(".chat-room__bd"),Ce=0,_e=0,we=!0;function Oe(){return(new Date).getTime()}function Me(){!function(){if(0==$(".room_msg_fast_tip").length){var e=$('<div class="room_msg_fast_tip">说得太快啦，休息<span class="msg_send_time">'+Ie+"</span> 秒吧~</div>");Se.append(e)}else $(".msg_send_time").text(Ie),$(".room_msg_fast_tip").show();clearTimeout(ye),ye=setTimeout((function(){$(".room_msg_fast_tip").hide(),clearTimeout(ye)}),3e3),he||(he=setInterval((function(){Ie--,$(".msg_send_time").text(Ie),Ie<=0&&(clearInterval(he),he=null,Pe())}),1e3))}()}function Pe(){be=1,Te=!1,Ie=ve,$(".room_msg_fast_tip").hide()}var Fe=function(e){Te?Me():(e(),we?Ce=Oe():(_e=Ce,(Ce=Oe())-_e<1e3*pe?be++:Pe()),we=!1,be>=ge?(Te=!0,window.ya&&ya.reportProductEvent({eid:"Status/BarrageTooFast",eid_desc:"次数/发言频率限制",ref:YA.cookie.get("ya_eid")})):Te=!1)},Ae=n(334),ke=n(326),Ue=n.n(ke),Be=n(415),xe={tag:null,filters:[]};a.default.on("setSendBarrageTag",(function(e){xe.tag=e})),a.default.on("setDisplayBarrageTags",(function(e){xe.filters=e.tags})),a.default.isH5&&m.addFilter((function(e){var t=e.data,n=e.isOwn,o=t.vTagInfo?t.vTagInfo.value:[];if(o.length&&!n){var r=!1;for(var a in o){var i=o[a];if(xe.filters.includes(i.sTag)||0==xe.filters.length){r=!0;break}}if(!r)return!1}}));var Ee=xe,je=n(15);function Re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var De=i.default.id,He=i.default.sid,Ge=new ce.a,Je={};Je.iFontColor=I.customColor.get(),I.customColor.change((function(){Je.iFontColor=I.customColor.get()})),Je.iFontSize=te.get(),te.change((function(){Je.iFontSize=te.get()})),Je.iTransitionType=le.get(),le.change((function(){Je.iTransitionType=le.get()}));var qe=null;function ze(e){var t=e.iStatus,n=e.sToast;return 0===t||0!==t&&""===n}function Ye(e,t){Ge.emit("sendReq");var n=setTimeout((function(){var t=qe?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(n),!0).forEach((function(t){Le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},qe):JSON.parse('{"iStatus":0,"tNotice":{"tUserInfo":{"lUid":0,"lImid":0,"sNickName":"","iGender":0,"sAvatarUrl":"","iNobleLevel":0,"tNobleLevelInfo":{"iNobleLevel":0,"iAttrType":0},"sGuid":"","sHuYaUA":""},"lTid":0,"lSid":0,"sContent":"","iShowMode":0,"tFormat":{"iFontColor":-1,"iFontSize":4,"iPopupStyle":0,"iNickNameFontColor":-1,"iDarkFontColor":-1,"iDarkNickNameFontColor":-1},"tBulletFormat":{"iFontColor":-1,"iFontSize":4,"iTextSpeed":0,"iTransitionType":1,"iPopupStyle":0,"tBorderGroundFormat":{"iEnableUse":0,"iBorderThickness":0,"iBorderColour":-1,"iBorderDiaphaneity":100,"iGroundColour":-1,"iGroundColourDiaphaneity":100,"sAvatarDecorationUrl":"","iFontColor":-1,"iTerminalFlag":-1},"vGraduatedColor":{"proto":{},"value":[]},"iAvatarFlag":0,"iAvatarTerminalFlag":-1},"iTermType":0,"vDecorationPrefix":{"proto":{"iAppId":0,"iViewType":0,"vData":{"buf":null,"vew":null,"len":0,"position":0,"length":0,"buffer":null},"lSourceId":0,"iType":0},"value":[]},"vDecorationSuffix":{"proto":{"iAppId":0,"iViewType":0,"vData":{"buf":null,"vew":null,"len":0,"position":0,"length":0,"buffer":null},"lSourceId":0,"iType":0},"value":[]},"vAtSomeone":{"proto":{"lUid":0,"sNickName":""},"value":[]},"lPid":0,"vBulletPrefix":{"proto":{"iAppId":0,"iViewType":0,"vData":{"buf":null,"vew":null,"len":0,"position":0,"length":0,"buffer":null},"lSourceId":0,"iType":0},"value":[]},"sIconUrl":"","iType":0,"vBulletSuffix":{"proto":{"iAppId":0,"iViewType":0,"vData":{"buf":null,"vew":null,"len":0,"position":0,"length":0,"buffer":null},"lSourceId":0,"iType":0},"value":[]},"vTagInfo":{"proto":{"iAppId":0,"sTag":""},"value":[]}},"sToast":""}');t.iStatus=-1,t.sContent=e,Ge.emit("sendTimeout",t),a.default.call("sendMessageTimeout",t)}),5e3);function o(e){clearTimeout(n),Ge.emit("sendRsp",e),ze(e)&&(qe=e,Ge.emit("sendSuccess",e),a.default.call("sendMessageSuccess",e),TT.event.emit("RoomSendMessageSuccess")),t(e)}a.default.ready((function(t){if(a.default.isH5){var n=new t.taf.HUYA.SendMessageReq;if(n.tUserId=t.userId,n.lTid=De,n.lSid=He,n.lPid=l.default.lp,n.sContent=e,n.tBulletFormat=$.extend(n.tBulletFormat||{},Je),Ee.tag){var r=new t.taf.HUYA.MessageTagInfo;r.iAppId=1,r.sTag=Ee.tag,n.vTagInfo.value.push(r)}t.sendWup2("liveui","sendMessage",n,o)}else a.default.on("speakSendMessageRsp",(function(e){return o(e.param)})),t.callAs("speakSendMessage",{lTid:De,lSid:He,sContent:e,tBulletFormat:Je})})),Ge.emit("speak",e)}function We(){a.default.ready((function(e){a.default.isH5?e.sendWup("mobileui","setUserProfile",new e.taf.HUYA.SetUserProfileReq):e.callAs("setUserProfile")}))}function Ve(){var e=this;function t(t){var n=t.bSendMessagePopUp,o=t.sSendMessageTips,r=t.iSendMessagePopUpAmtTime;function a(){e.silenced=!1,e.silencedTips=""}if(clearTimeout(e.silencedCD),n&&o){e.silenced=!0,e.silencedTips=o;e.silencedCD=setTimeout(a,Math.min(1e3*r,2147483647))}else a()}e.pending=!1,Ge.on("sendReq",(function(){return e.pending=!0})),Ge.on("sendTimeout",(function(){return e.pending=!1})),Ge.on("sendRsp",(function(){return e.pending=!1})),e.isSecretPass=!("1"==i.default.isSecret),TT.event.on("RoomChatSpeakerSend",(function(t){e.send(t)})),a.default.on("secretRoomPass",(function(){e.isSecretPass=!0})),ue.e.getMyRoleInfo().then(t).catch((function(e){})),ue.e.on("changeNotice",t),ue.e.on("warningNotice",(function(t){var n=t.lUid,r=(t.lPid,t.sSystemTips,t.sSendTips);n==Object(o.getUid)()&&e.noticeMe(r)}))}Ge.send=Ye,Ge.notice=function(e){if(e){var t=$("#pubNoticMe"),n=t.find(".closeBtn");t.find("p").text(e),t.show(),clearTimeout(Ge.notice.timer),n.off("click.closeNotice"),Ge.notice.timer=setTimeout((function(){return t.hide()}),3e3),n.on("click.closeNotice",(function(){return t.hide()}))}},Ge.on("sendRsp",(function(e){905==e.iStatus&&0==$(".speakTipsBindPhone").length&&(new de.a).on("todo",(function(){Object(fe.default)().fail((function(e){if("IGNORANCE"===e){var t=function e(t){905!=t.iStatus&&(Ge.off("sendReq",We),Ge.off("sendRsp",e))};Ge.off("sendReq",We),Ge.off("sendRsp",t),Ge.on("sendReq",We),Ge.on("sendRsp",t)}else TT.event.emit("TT_ALERT_MESSAGE","手机绑定失败，请稍后重试！(".concat(e,")"),"error")}))}))})),Ve.prototype={maxInputSize:30,send:function(e){var t=this;HUYA_UTIL.getCookieVal("udb_uid")&&(t.isSecretPass?Fe((function(){t.sendMessage(e)})):t.noticeMe("直播间上锁了哟，需解锁后才能发言！"))},msgParser:[{type:Be.ElementType.Emoticon,matcher:Ae.EmoticonParser.emoticonNameMatcher}],sendMessage:function(e){if(!this.pending){var t=this;if(t.silenced)t.noticeMe(t.silencedTips);else if(e){var n=0,o=0;if(Re(Be.Editor.parse(e,this.msgParser),1)[0].forEach((function(e){var t=e.type,r=e.content;if(t===Be.ElementType.Emoticon){var a=Re(Ue.a.parse(r),1)[0];a&&"string"!=typeof a?(n+=1,o+=1):n+=r.length}else t===Be.ElementType.Text&&(n+=r.length)})),n>t.maxInputSize)t.noticeMe("输入字数最大不能超过"+t.maxInputSize);else if(o>10)t.noticeMe("表情最多发送10个～可以继续输入文字噢");else Ye(e,(function(e){var n=e.iStatus,o=e.sToast;ze({iStatus:n,sToast:o})&&Object(je.reportEvent)({eid:"click/room/speak",gid:i.default.gid,pid:l.default.lp}),905!=n&&o&&t.noticeMe(o)}))}else t.noticeMe("请输入要发言的内容！")}},noticeMe:function(e){Ge.notice(e)}},a.default.ready((function(){new Ve})),Ge.on("sendReq",(function(){var e=(new Date).getTime();try{window.performanceInfo._hmt.push(["reportApiTime","huya-main-speak","start",e,"",e])}catch(e){}var t=Object(o.once)((function(){try{window.performanceInfo._hmt.push(["reportApiTime","huya-main-speak","end",(new Date).getTime(),"",e])}catch(e){}}));Ge.one("sendRsp",t),Ge.one("sendTimeout",t)}));var Ke=Ge,Ze=(n(44),n(78)),Xe=n(33),Qe=n.n(Xe),et=n(74);var tt={get:function(){return new $.Deferred((function(e){a.default.ready((function(t){if(a.default.isH5){var n=new t.taf.HUYA.GetRctTimedMessageReq;n.tUserId=t.userId,n.lPid=l.default.lp,n.lTid=i.default.id,n.lSid=i.default.sid,t.sendWup2("mobileui","getRctTimedMessage",n,(function(t){e.resolve(t)}))}}))}))}};n(1006),n(1009);function nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ot(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var rt={};rt.barrage={color:I,size:te,position:le},rt.receive=se.default,rt.speak=Ke,rt.broadcaster=m;var at=6613==i.default.gid||7001==i.default.gid;(i.default.isOff||at)&&a.default.isH5&&Promise.all([et.CustomFansBadge.fetchCustomBadge().catch((function(){return"nothing"})),new Promise((function(e,t){tt.get().done((function(t){e(t)}))}))]).then((function(e){var t=nt(e,2),n=(t[0],t[1]),o=new Date(1e3*s.a.time);o.setHours(0,0,0,0);var r=function(e){return("00"+e).slice((e+"").length)},a=0;HUYA_UTIL.getCookieVal("udb_uid");$.each(n.vTimedMesasgeNotice.value,(function(e,t){Ze.default.testMsg(t.tNotice)||(t.lCreatedTime>a+180&&(a=t.lCreatedTime,Qe.a.append((function(e,t){var n,i,l,s,c,u=document.createElement("div");return u.className="msg-timed",u.innerHTML="<span>".concat((n=new Date(1e3*a),i=n.getMonth()+1,l=n.getDate(),s=n.getHours(),c=n.getMinutes(),n.getTime()>o.getTime()?r(s)+":"+r(c):r(i)+"月"+r(l)+"日 "+r(s)+":"+r(c)),"</span>"),u}))),se.default.showMessage(t.tNotice))}))})),m.addOnceListener(c.default.stop),Ke.on("sendSuccess",(function(e){var t=e.tNotice;0!=t.iShowMode&&1!=t.iShowMode||se.default.showMessage(t)})),Ke.on("sendTimeout",(function(e){var t=e.tNotice;se.default.showMessage(t)}));var it,lt,st,ct,ut,ft=1;function dt(e){Qe.a.append((function(t,n){var o=document.createElement("div");return o.className="msg-auditorSys",o.innerHTML="<i></i><em>系统消息：</em><span>".concat(_.escape(e),"</span>"),o}))}a.default.on("updateMsgConnectStatus",(function(e){var t=e.status;ft=t})),m.addListener((function(e){var t=e.data,n=e.isOwn,o=e.isSame;n&&o||Ze.default.testMsg(t)||0!=t.iShowMode&&1!=t.iShowMode||1!=ft&&function(e){return!!e.vDecorationPrefix.value.find((function(e){return 5010===e.iAppId}))}(t)||se.default.onSpeakMessage(t)})),a.default.on("barrageHistoryData",(function(e){se.default.showMessage(e)})),m.addListener((function(e){TT.emit("LIVE_ROOM_MSG_NOTICE",e.data)})),u.default.getUserTeamMedalInfo().then((function(e){var t=e.usingTeamMedalId;function n(e){var n=e.data;if(e.isOwn||!t)return!0;var o=n.vDecorationPrefix.value.find((function(e){return 10350==e.iAppId}));return!!o&&o.vData.tTeamMedalInfo.lTeamMedalId===t}u.default.on("use",(function(e){var n=e.teamMedalInfo.teamMedalId;t=n})),u.default.on("readOnlyTeamMedalDanm",(function(e){e?(m.addFilter(n),a.default.call("broadcaterAddFilter",n)):(m.removeFilter(n),a.default.call("broadcaterRemoveFilter",n))}))})),u.default.getTeamMedalConfig().then((function(e){var t=null,n=$("#J-room-chat-color"),o=0==e.matchId?$("#J-room-fans-color"):$("#J-room-club-color"),a=r.a.once((function(){return 0==e.matchId?U.createPalette():W.createPalette()})),i=function(){clearTimeout(t),a(),o.show(),n.html(""),localStorage.removeItem("BARRAGE_COLOR_UNLOCK")},l=function(){clearTimeout(t),t=setTimeout((function(){o.hide()}),100)};n.on("mouseenter",i).on("mouseleave",l),o.on("mouseenter",i).on("mouseleave",l),n.css("backgroundColor",-1==I.get()?"":"#"+I.rgb()),I.change((function(e){n.css("backgroundColor",-1==I.get()?"":"#"+I.rgb())})),TT.event.on("BARRAGE_COLOR_UNLOCK",(function(){n.html("<span>新</span>"),localStorage.setItem("BARRAGE_COLOR_UNLOCK",1)})),localStorage.getItem("BARRAGE_COLOR_UNLOCK")&&n.html("<span>新</span>")})),it=null,lt=$("#J-room-speaking-box"),st=r.a.once((function(){te.createPalette(),le.createPalette()})),ct=function(){clearTimeout(it),st(),lt.show()},ut=function(){clearTimeout(it),it=setTimeout((function(){lt.hide()}),100)},$("#J-room-chat-font").on("mouseenter",ct).on("mouseleave",ut),lt.on("mouseenter",ct).on("mouseleave",ut),Promise.all([n.e(7),n.e(12),n.e(15),n.e(31),n.e(30),n.e(45),n.e(41),n.e(39),n.e(44),n.e(42),n.e(40),n.e(68),n.e(69),n.e(78),n.e(79),n.e(417)]).then(n.t.bind(null,1462,7)).then((function(e){(0,e.mount)()})),Promise.all([n.e(7),n.e(15),n.e(31),n.e(30),n.e(45),n.e(41),n.e(39),n.e(44),n.e(42),n.e(40),n.e(68),n.e(69),n.e(382),n.e(383)]).then(n.t.bind(null,1463,7)).then((function(e){(0,e.mount)()})),TT.getUserInfo((function(e){var t=e.uid;l.default.lp==t?Promise.all([n.e(7),n.e(12),n.e(15),n.e(24),n.e(31),n.e(30),n.e(25),n.e(45),n.e(41),n.e(39),n.e(44),n.e(42),n.e(40),n.e(51),n.e(52),n.e(68),n.e(69),n.e(78),n.e(79),n.e(223),n.e(222),n.e(215),n.e(220),n.e(221),n.e(216)]).then(n.bind(null,1466)):ue.e.getMyRoleInfo().then((function(e){var t=e.tRole,o=t.iRole,r=t.lPermission;ue.e.isManager(o)&&r!==ue.a.Null&&Promise.all([n.e(7),n.e(12),n.e(15),n.e(24),n.e(31),n.e(30),n.e(25),n.e(45),n.e(41),n.e(39),n.e(44),n.e(42),n.e(40),n.e(51),n.e(52),n.e(68),n.e(69),n.e(78),n.e(79),n.e(223),n.e(222),n.e(215),n.e(220),n.e(221),n.e(216)]).then(n.bind(null,1466))}))})),ue.e.on("changeNoticeGlobal",(function(e){var t=e.bPopUp,n=e.sSystemTips;t&&dt(n)})),ue.e.on("warningNotice",(function(e){e.lUid,e.lPid;var t=e.sSystemTips;e.sSendTips;dt(t)}));t.default=rt},998:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBullbleInfo=void 0;var o,r,a=n(12),i=n(4);!function(e){e[e.Adr=1]="Adr",e[e.Ios=2]="Ios",e[e.AdrZhushou=4]="AdrZhushou",e[e.IosZhushou=8]="IosZhushou",e[e.Web=16]="Web",e[e.Pc=32]="Pc"}(o||(o={})),function(e){e[e.Pos1=1]="Pos1",e[e.Pos2=2]="Pos2",e[e.Pos3=4]="Pos3",e[e.Pos4=8]="Pos4",e[e.Pos5=16]="Pos5"}(r||(r={})),t.getBullbleInfo=function(e){var t=e.lBubbleId,n=e.iGameFlag,l=e.sBubbleZip,s=e.iColor,c=e.iTerminalFlag,u=e.mExpand;if(t<=0||""===l||0==(c&o.Web))return{background:"",icon:"",color:""};var f=u.value[r.Pos5],d=u.value[r.Pos2],m=void 0!==f?"_"+f:"",p=void 0!==d?"_"+d:"",g={bubbleId:t,ua:"web",template:"game",model:"general"},v=n&r.Pos5?""+(0,i.placeholderReplace)(l,(0,a.__assign)((0,a.__assign)({},g),{pos:5}))+m+".png":"",h=n&r.Pos2?""+(0,i.placeholderReplace)(l,(0,a.__assign)((0,a.__assign)({},g),{pos:2}))+p+".png":"",y=s.toString(16);return{background:v,icon:h,color:0!=n&&s>0?"#"+("000000"+y).slice(y.length):""}}}}]);