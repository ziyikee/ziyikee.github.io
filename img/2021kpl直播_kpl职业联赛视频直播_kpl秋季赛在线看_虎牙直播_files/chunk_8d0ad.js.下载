(window.HUYA_MAIN_APP_WEBPACK_JSONP=window.HUYA_MAIN_APP_WEBPACK_JSONP||[]).push([[396],{351:function(t,e,n){var o=n(697);"string"==typeof o&&(o=[[t.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(287)(o,a);o.locals&&(t.exports=o.locals)},396:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MotoHyExtId=void 0;e.MotoHyExtId="gqtsidf1"},689:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mount=void 0;var o=n(12),a=(0,o.__importDefault)(n(28)),r=(0,o.__importDefault)(n(42)),i=(0,o.__importDefault)(n(690)),l=(0,o.__importDefault)(n(351));e.mount=function(t){var e=document.getElementById("J_treasureChestContainer");if(e){var n=document.createElement("div");n.className=l.default.root,e.appendChild(n),r.default.render(a.default.createElement(i.default,(0,o.__assign)({},t)),n)}}},690:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(12),a=(0,o.__importStar)(n(28)),r=(0,o.__importDefault)(n(285)),i=n(4),l=(0,o.__importDefault)(n(394)),u=(0,o.__importDefault)(n(336)),c=n(298),d=(0,o.__importDefault)(n(696)),s=n(396),f=(0,o.__importStar)(n(79)),p=(0,o.__importDefault)(n(351));e.default=function(t){var e=(0,a.useState)(t),n=e[0],m=e[1];(0,a.useEffect)((function(){function t(t){var e=t.tDetailInfo,o=e.lGatherUid;m({iTotalCount:n.iTotalCount+1,iResponse:(0,i.getUid)()&&o==(0,i.getUid)()?1:0,tDetailInfo:e})}return l.default.on("MotorcadeGatherBegin",t),function(){l.default.off("MotorcadeGatherBegin",t)}}),[n]),(0,a.useEffect)((function(){function t(t){var e=t.lMotorcadeId,a=t.lGatherId,r=n.tDetailInfo.lMotorcadeId==e&&n.tDetailInfo.lGatherId==a;m((0,o.__assign)((0,o.__assign)({},n),{iTotalCount:r?0:n.iTotalCount-1}))}return l.default.on("MotorcadeGatherEnd",t),function(){l.default.off("MotorcadeGatherEnd",t)}}),[n]),(0,a.useEffect)((function(){function t(t){t.lMotorcadeId,t.lGatherId;var e=t.lResponseUid;m((0,o.__assign)((0,o.__assign)({},n),{iResponse:(0,i.getUid)()&&e==(0,i.getUid)()?1:n.iResponse}))}return l.default.on("MotorcadeGatherResponse",t),function(){l.default.off("MotorcadeGatherResponse",t)}}),[n]);var g=n.iTotalCount,x=n.iResponse,_=n.tDetailInfo,E=_.lMotorcadeId,v=_.lGatherId,k=(_.lGatherUid,_.tFlag),b=(_.lEndTime,_.iCountdown,_.iResponseCount,_.sAppIcon,_.sWebPCIcon),h=_.sMotorcadeName,y=(0,a.useState)(""),M=y[0],C=y[1],P=(0,a.useState)(!1),S=P[0],N=P[1],Q=(0,a.useState)(!1),j=Q[0],w=Q[1],D=(0,a.useState)(!1),T=D[0],J=D[1];(0,a.useEffect)((function(){0===g&&(C(""),N(!1),w(!1),J(!1))}),[g]);var G=(0,a.useCallback)((function(){TT.sudo((function(){g>1?J(!0):f.getInstance().then((function(t){t.showPanel(s.MotoHyExtId,"motorcadeId="+E)}))}))}),[g,E]),I=(0,a.useCallback)((function(){TT.sudo((function(){S||(N(!0),l.default.responseMotorcadeGathering(E,v).then((function(t){var e=t.iRetCode,a=t.sErrMsg;N(!1),0==e?m((0,o.__assign)((0,o.__assign)({},n),{iResponse:1})):905==e?w(!0):C("响应召集失败："+a)})).catch((function(t){N(!1),C("响应召集失败："+(t&&t.message||"unknow"))})))}))}),[S,E,v,n]);return g>0?a.default.createElement("div",{className:(0,r.default)(p.default.MotorcadeEntry)},a.default.createElement("div",{className:p.default.icon},a.default.createElement("img",{src:b}),a.default.createElement("p",{className:p.default.text},a.default.createElement("span",null,k.sName.split("").map((function(t){return a.default.createElement("b",null,t)}))))),1===g&&0===x&&a.default.createElement("span",{className:p.default.btn0,onClick:I}),1===g&&1===x&&a.default.createElement("span",{className:p.default.btn1}),g>1&&a.default.createElement("span",{className:p.default.btn2,onClick:G}),g>1&&a.default.createElement("em",{className:p.default.TotalCount},g),j&&a.default.createElement(u.default,null,a.default.createElement("div",{className:p.default.MotorTeam},a.default.createElement("div",{className:p.default.content},a.default.createElement("p",{className:p.default.tit},"需要先加入",a.default.createElement("em",null,h),"车队"),a.default.createElement("p",{className:p.default.subtit},"才能响应"),a.default.createElement("p",{className:p.default.desc},"响应成功后这里将成为你们的主场！"),a.default.createElement("div",{className:p.default.ft},a.default.createElement("span",{className:p.default.btn,onClick:function(){w(!1),G()}}))),a.default.createElement("div",{className:p.default.bg}),a.default.createElement("div",{className:p.default.x,onClick:function(){return w(!1)}}))),""!=M&&a.default.createElement(u.default,null,a.default.createElement(c.Modal,{onClose:function(){return C("")}},a.default.createElement("div",{className:p.default.tips},M))),T&&a.default.createElement(d.default,{onClose:function(){return J(!1)}}),S&&a.default.createElement("i",{className:p.default.pending})):null}},696:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(12),a=(0,o.__importStar)(n(28)),r=(0,o.__importDefault)(n(285)),i=(0,o.__importDefault)(n(336)),l=(0,o.__importStar)(n(79)),u=n(396),c=(0,o.__importDefault)(n(351));e.default=function(t){var e,n=t.onClose,o=(0,a.useState)(!0),d=o[0],s=o[1],f=(0,a.useState)(null),p=f[0],m=f[1],g=(0,a.useState)(null),x=g[0],_=g[1];return(0,a.useEffect)((function(){x&&l.getInstance().then((function(t){t.getWebInnerIFrame(u.MotoHyExtId,!0).then((function(t){m(t)}))}))}),[x]),(0,a.useEffect)((function(){function t(){s(!1)}if(p&&x){p.addEventListener("load",t,!1),x.appendChild(p);var e=setTimeout((function(){s(!1)}),5e3);return function(){p.removeEventListener("load",t,!1),clearTimeout(e)}}}),[p,x]),a.default.createElement(i.default,null,a.default.createElement("div",{className:c.default.MotorcadeExt},a.default.createElement("div",{className:(0,r.default)(c.default.ext,(e={},e[c.default.pending]=d,e)),ref:_},a.default.createElement("i",{className:c.default.x,onClick:n})),a.default.createElement("div",{className:c.default.mask,onClick:n})))}},697:function(t,e,n){var o=n(286),a=n(288),r=n(698),i=n(699),l=n(700),u=n(701),c=n(702),d=n(703),s=n(704),f=n(705);e=o(!1);var p=a(r),m=a(i),g=a(l),x=a(u),_=a(c),E=a(d),v=a(s),k=a(f);e.push([t.i,".treasureChestContainer--a-91gqviOAHvbDJPuGirM{position:absolute;right:16px;bottom:10px;z-index:999;display:flex;flex-direction:column;align-items:center}.root--2e-_dZ2qOaQdA9N-FSwpMY{display:inline-block;margin-top:10px}.MotorcadeEntry--1gKNkQJxV2Yl_7yPkxafSe{display:inline-block;position:relative;text-align:center}.MotorcadeEntry--1gKNkQJxV2Yl_7yPkxafSe .TotalCount--euhuYc4MXAOdRwbONNo0p{position:absolute;right:-6px;top:-6px;line-height:18px;min-width:18px;text-align:center;border-radius:9px;background:#FF0303;color:#fff;font-style:normal;font-weight:normal}.MotorcadeEntry--1gKNkQJxV2Yl_7yPkxafSe .icon--1XvTvCmGoxCS1vuO_nfoC-{display:inline-block;position:relative}.MotorcadeEntry--1gKNkQJxV2Yl_7yPkxafSe .icon--1XvTvCmGoxCS1vuO_nfoC- img{max-width:48px}.MotorcadeEntry--1gKNkQJxV2Yl_7yPkxafSe .icon--1XvTvCmGoxCS1vuO_nfoC- .text--2D-kJUHMcY-VsY6ebGP8xK{position:absolute;top:0;right:0;bottom:0;left:0}.MotorcadeEntry--1gKNkQJxV2Yl_7yPkxafSe .icon--1XvTvCmGoxCS1vuO_nfoC- .text--2D-kJUHMcY-VsY6ebGP8xK span{display:inline-flex;align-items:center;justify-content:center;flex-direction:column;width:18px;height:38px;margin:0 auto;color:#fff;line-height:1.1}.MotorcadeEntry--1gKNkQJxV2Yl_7yPkxafSe .icon--1XvTvCmGoxCS1vuO_nfoC- .text--2D-kJUHMcY-VsY6ebGP8xK span b{font-weight:bold;font-style:normal}.MotorcadeEntry--1gKNkQJxV2Yl_7yPkxafSe .btn0--3Qo9S_PfpFPB9OazPjo3qr,.MotorcadeEntry--1gKNkQJxV2Yl_7yPkxafSe .btn1--1FJDcLW667mqso2Qkv_gca,.MotorcadeEntry--1gKNkQJxV2Yl_7yPkxafSe .btn2--Fxw0p0nh-ePlJr_iemU-3{display:block;position:relative;margin:-5px auto 0;width:52px;height:24px;background-size:cover}.MotorcadeEntry--1gKNkQJxV2Yl_7yPkxafSe .btn0--3Qo9S_PfpFPB9OazPjo3qr{background-image:url("+p+");cursor:pointer}.MotorcadeEntry--1gKNkQJxV2Yl_7yPkxafSe .btn1--1FJDcLW667mqso2Qkv_gca{background-image:url("+m+")}.MotorcadeEntry--1gKNkQJxV2Yl_7yPkxafSe .btn2--Fxw0p0nh-ePlJr_iemU-3{background-image:url("+g+");cursor:pointer}.MotorcadeEntry--1gKNkQJxV2Yl_7yPkxafSe .pending--rrJCj9aKMEgFf5sjWvIp1{position:absolute;top:0;right:0;bottom:0;left:0;margin:auto;width:16px;height:16px;background:url(https://a.msstatic.com/huya/main/assets/img/loading.gif) 50% no-repeat}.tips--2vkR3xMOANfUZ1GfTxrZLS{display:flex;align-items:center;justify-content:center;max-width:260px;min-width:180px;min-height:50px;text-align:center}.MotorTeam--33nnkygLD3j6c_1Rb6gsk4{position:absolute;top:0;right:0;bottom:0;left:0;margin:auto;width:294px;height:225px;background:#0D1C66;border-radius:0px 0px 4px 4px}.MotorTeam--33nnkygLD3j6c_1Rb6gsk4 .bg--3r3i9CLdLsuXgg1zS8tM_X{position:absolute;z-index:0;left:0;top:-10px;width:294px;height:74px;background:url("+x+") 50% no-repeat;background-size:cover}.MotorTeam--33nnkygLD3j6c_1Rb6gsk4 .x--3rlwonG3vrvHEmFJdVpHs7{position:absolute;z-index:2;top:0;right:10px;width:25px;height:25px;background:url("+_+") 50% no-repeat;background-size:cover;cursor:pointer}.MotorTeam--33nnkygLD3j6c_1Rb6gsk4 .content--1BZkQZBajvgNrE2nQSYt5P{position:relative;z-index:1;text-align:center}.MotorTeam--33nnkygLD3j6c_1Rb6gsk4 .content--1BZkQZBajvgNrE2nQSYt5P .tit--2dRkd8OyzFg0GOzDz4QfnL{font-size:16px;color:#889fff;margin-top:35px}.MotorTeam--33nnkygLD3j6c_1Rb6gsk4 .content--1BZkQZBajvgNrE2nQSYt5P .tit--2dRkd8OyzFg0GOzDz4QfnL em{color:#FFBA00;margin:0 .3em}.MotorTeam--33nnkygLD3j6c_1Rb6gsk4 .content--1BZkQZBajvgNrE2nQSYt5P .subtit--jo-aoGwPs11WorMNsuJi0{font-size:16px;color:#889fff;margin-top:8px}.MotorTeam--33nnkygLD3j6c_1Rb6gsk4 .content--1BZkQZBajvgNrE2nQSYt5P .desc--1tlKXcTKpWucqi2E8S9x8L{color:#889fff;margin-top:18px}.MotorTeam--33nnkygLD3j6c_1Rb6gsk4 .content--1BZkQZBajvgNrE2nQSYt5P .ft--10OUjW3_Xx9l1devYAKbnx{margin-top:22px}.MotorTeam--33nnkygLD3j6c_1Rb6gsk4 .content--1BZkQZBajvgNrE2nQSYt5P .btn--2eu7ZmaQuBroAtEuGy5ZGE{display:inline-block;width:203px;height:46px;background:url("+E+") 50% no-repeat;background-size:cover;cursor:pointer}.MotorcadeExt--2Hi_7T62v61EIqzF5SLCj5{position:relative;width:100%;height:100%}.MotorcadeExt--2Hi_7T62v61EIqzF5SLCj5 .ext--yw9WrDVXnPyRyQtCX4r4J{position:absolute;left:0;top:0;bottom:0;right:0;margin:auto;width:374px;height:600px;margin-left:-18px;box-shadow:0 3px 8px 2px rgba(1,1,1,0.2)}.MotorcadeExt--2Hi_7T62v61EIqzF5SLCj5 .ext--yw9WrDVXnPyRyQtCX4r4J.pending--rrJCj9aKMEgFf5sjWvIp1{background:url(https://a.msstatic.com/huya/main/assets/img/loading.gif) 50% no-repeat #fff;border-radius:5px}.MotorcadeExt--2Hi_7T62v61EIqzF5SLCj5 .ext--yw9WrDVXnPyRyQtCX4r4J.pending--rrJCj9aKMEgFf5sjWvIp1 iframe{visibility:hidden}.MotorcadeExt--2Hi_7T62v61EIqzF5SLCj5 .ext--yw9WrDVXnPyRyQtCX4r4J iframe{width:100%;height:100%;border:0}.MotorcadeExt--2Hi_7T62v61EIqzF5SLCj5 .ext--yw9WrDVXnPyRyQtCX4r4J .x--3rlwonG3vrvHEmFJdVpHs7{position:absolute;top:-13px;right:-13px;width:26px;height:26px;cursor:pointer;background:url("+v+")}.MotorcadeExt--2Hi_7T62v61EIqzF5SLCj5 .ext--yw9WrDVXnPyRyQtCX4r4J .x--3rlwonG3vrvHEmFJdVpHs7:hover{background:url("+k+")}.MotorcadeExt--2Hi_7T62v61EIqzF5SLCj5 .mask--2mhB0EUBhw3gdBGLmVWVxb{width:100%;height:100%}\n",""]),e.locals={treasureChestContainer:"treasureChestContainer--a-91gqviOAHvbDJPuGirM",root:"root--2e-_dZ2qOaQdA9N-FSwpMY",MotorcadeEntry:"MotorcadeEntry--1gKNkQJxV2Yl_7yPkxafSe",TotalCount:"TotalCount--euhuYc4MXAOdRwbONNo0p",icon:"icon--1XvTvCmGoxCS1vuO_nfoC-",text:"text--2D-kJUHMcY-VsY6ebGP8xK",btn0:"btn0--3Qo9S_PfpFPB9OazPjo3qr",btn1:"btn1--1FJDcLW667mqso2Qkv_gca",btn2:"btn2--Fxw0p0nh-ePlJr_iemU-3",pending:"pending--rrJCj9aKMEgFf5sjWvIp1",tips:"tips--2vkR3xMOANfUZ1GfTxrZLS",MotorTeam:"MotorTeam--33nnkygLD3j6c_1Rb6gsk4",bg:"bg--3r3i9CLdLsuXgg1zS8tM_X",x:"x--3rlwonG3vrvHEmFJdVpHs7",content:"content--1BZkQZBajvgNrE2nQSYt5P",tit:"tit--2dRkd8OyzFg0GOzDz4QfnL",subtit:"subtit--jo-aoGwPs11WorMNsuJi0",desc:"desc--1tlKXcTKpWucqi2E8S9x8L",ft:"ft--10OUjW3_Xx9l1devYAKbnx",btn:"btn--2eu7ZmaQuBroAtEuGy5ZGE",MotorcadeExt:"MotorcadeExt--2Hi_7T62v61EIqzF5SLCj5",ext:"ext--yw9WrDVXnPyRyQtCX4r4J",mask:"mask--2mhB0EUBhw3gdBGLmVWVxb"},t.exports=e}}]);